<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elvion AI | Developer Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary: #00e5ff;    /* electric blue */
      --secondary: #2979ff;  /* deep blue */
      --fire: #ff6d00;       /* fiery orange */
      --fire-soft: #ff8a50;
      --bg-dark: #02040b;
      --bg-mid: #050b18;
      --glass-bg: rgba(7, 18, 40, 0.85);
      --glass-border: rgba(0, 229, 255, 0.3);
      --text-main: #ffffff;
      --success: #00ffb0;
      --danger: #ff1744;
      --warning: #ffd54f;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

    body {
      font-family: 'Inter', sans-serif;
      background:
        radial-gradient(circle at 0% 0%, rgba(0,229,255,0.16) 0, transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(255,109,0,0.2) 0, transparent 60%),
        radial-gradient(circle at 0% 100%, rgba(41,121,255,0.18) 0, transparent 55%),
        #02040b;
      color: var(--text-main);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* STARFIELD + ENERGY RINGS */
    #stars { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
    .star {
      position: absolute;
      background: #b3e5fc;
      border-radius: 50%;
      opacity: 0;
      box-shadow: 0 0 10px rgba(0,229,255,0.8);
      animation: twinkle var(--duration) ease-in-out infinite;
    }
    @keyframes twinkle {
      0%,100% { opacity: 0; transform: scale(0.7); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    .ring {
      position: fixed;
      border-radius: 50%;
      border: 1px solid rgba(0,229,255,0.18);
      box-shadow: 0 0 35px rgba(0,229,255,0.35);
      pointer-events: none;
      z-index: 0;
      animation: spinRing 40s linear infinite;
    }
    .ring.r1 { width: 500px; height: 500px; top: -250px; right: -120px; border-color: rgba(255,109,0,0.3); box-shadow: 0 0 50px rgba(255,109,0,0.45); }
    .ring.r2 { width: 380px; height: 380px; bottom: -180px; left: -120px; }
    .ring.r3 { width: 260px; height: 260px; top: 40%; left: 50%; transform: translate(-50%, -50%); animation-duration: 26s; }
    @keyframes spinRing {
      0%   { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .container { max-width: 1400px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

    /* FLOATING NAV WITH DROPDOWN */
    .nav-shell {
      display: flex;
      justify-content: center;
      margin-bottom: 25px;
      margin-top: 10px;
    }
    nav {
      position: relative;
      background: linear-gradient(135deg, rgba(5, 15, 40, 0.95), rgba(2, 7, 26, 0.98));
      backdrop-filter: blur(24px);
      border-radius: 999px;
      border: 1px solid var(--glass-border);
      padding: 10px 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow:
        0 18px 55px rgba(0, 0, 0, 0.85),
        0 0 35px rgba(0, 229, 255, 0.35),
        0 0 60px rgba(255, 109, 0, 0.25);
      animation: navDrop 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    @keyframes navDrop {
      from { opacity: 0; transform: translateY(-25px) scale(0.96); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    .nav-brand-mini {
      display: flex;
      align-items: center;
      gap: 8px;
      padding-right: 14px;
      border-right: 1px solid rgba(120, 144, 156, 0.35);
    }
    .nav-brand-mini span {
      font-family: 'Orbitron';
      font-size: 0.95rem;
      letter-spacing: 0.18em;
      color: var(--primary);
    }
    .nav-brand-mini i {
      color: var(--fire);
      text-shadow: 0 0 16px rgba(255, 109, 0, 0.9);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-link {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 600;
      color: #e3f2fd;
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      border: 1px solid transparent;
      transition: all 0.25s ease-out;
    }
    .nav-link i { font-size: 0.9rem; }

    .nav-link::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.3), transparent 60%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .nav-link:hover {
      border-color: rgba(0,229,255,0.7);
      box-shadow: 0 0 18px rgba(0,229,255,0.4);
      transform: translateY(-1px);
      color: var(--primary);
      background: rgba(0, 0, 0, 0.4);
    }
    .nav-link:hover::before { opacity: 1; }

    .nav-link.primary-pill {
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.16), transparent 70%);
      border-color: rgba(0,229,255,0.6);
    }

    /* DROPDOWN MENU */
    .dropdown {
      position: relative;
    }
    .dropdown-toggle::after {
      content: "\f0d7";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      font-size: 0.7rem;
      margin-left: 4px;
    }
    .dropdown-menu {
      position: absolute;
      top: 110%;
      right: 0;
      min-width: 200px;
      background: linear-gradient(135deg, rgba(5,15,40,0.98), rgba(11,23,52,0.98));
      border-radius: 18px;
      border: 1px solid var(--glass-border);
      box-shadow:
        0 18px 65px rgba(0, 0, 0, 0.9),
        0 0 25px rgba(0,229,255,0.35);
      padding: 10px 8px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px) scale(0.97);
      transform-origin: top right;
      transition: opacity 0.22s ease-out, transform 0.22s ease-out;
      z-index: 5;
    }
    .dropdown.open .dropdown-menu {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0) scale(1);
    }
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 0.85rem;
      color: #e3f2fd;
      text-decoration: none;
      transition: background 0.2s, transform 0.2s;
    }
    .dropdown-item i { font-size: 0.9rem; color: var(--primary); }
    .dropdown-item small { display: block; font-size: 0.7rem; color: #90a4ae; }
    .dropdown-item:hover {
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.25), transparent 75%);
      transform: translateX(2px);
    }

    /* HEADER */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 26px 0 30px;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(55, 71, 79, 0.6);
      animation: headerFade 0.7s ease-out;
    }
    @keyframes headerFade {
      from { opacity: 0; transform: translateY(-10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .brand img {
      width: 64px;
      height: 64px;
      border-radius: 20px;
      border: 2px solid rgba(0,229,255,0.7);
      box-shadow:
        0 0 30px rgba(0,229,255,0.7),
        0 0 55px rgba(255,109,0,0.45);
      animation: logoPulse 2.8s ease-in-out infinite;
    }
    @keyframes logoPulse {
      0%,100% { transform: scale(1); box-shadow: 0 0 30px rgba(0,229,255,0.65); }
      50% { transform: scale(1.06); box-shadow: 0 0 45px rgba(0,229,255,0.95); }
    }
    .brand h1 {
      font-family: 'Orbitron';
      font-size: 2.1rem;
      background: conic-gradient(from 140deg, #00e5ff, #2979ff, #ff6d00, #00e5ff);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: titleGlow 4s ease infinite;
    }
    @keyframes titleGlow {
      0%,100% { text-shadow: 0 0 14px rgba(0,229,255,0.7); background-position: 0% 50%; }
      50% { text-shadow: 0 0 30px rgba(255,109,0,0.7); background-position: 100% 50%; }
    }
    .brand small {
      display: block;
      margin-top: 4px;
      font-size: 0.7rem;
      letter-spacing: 0.32em;
      color: rgba(179, 229, 252, 0.9);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 18px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.28), rgba(2,5,18,0.95));
      border: 1px solid rgba(0,229,255,0.4);
      box-shadow: 0 0 25px rgba(0,229,255,0.4);
    }
    .user-info span {
      font-size: 0.85rem;
      color: #e3f2fd;
    }
    .avatar-pill {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid rgba(0,229,255,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 0, rgba(0,229,255,0.6), rgba(2,5,18,1));
      color: #fff;
    }
    .logout-btn {
      background: linear-gradient(135deg, rgba(255,109,0,0.8), rgba(183,28,28,0.9));
      border: none;
      border-radius: 999px;
      padding: 7px 14px;
      color: #fff;
      font-size: 0.75rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 0 18px rgba(255,109,0,0.7);
      transition: transform 0.18s, box-shadow 0.18s;
    }
    .logout-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 30px rgba(255,109,0,0.9);
    }

    /* NOTIFICATIONS (NO API LABELS) */
    .notification-center {
      background: var(--glass-bg);
      border-radius: 18px;
      border: 1px solid var(--glass-border);
      padding: 20px 22px;
      margin-bottom: 20px;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.7);
    }
    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }
    .notification-title {
      font-family: 'Orbitron';
      font-size: 1.05rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: #e1f5fe;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .notification-title i {
      color: var(--primary);
      text-shadow: 0 0 14px rgba(0,229,255,0.8);
    }
    .notification-badge {
      background: radial-gradient(circle at 0 0, rgba(255,109,0,0.9), rgba(191,54,12,1));
      border-radius: 999px;
      padding: 4px 9px;
      font-size: 0.7rem;
      font-weight: 700;
      box-shadow: 0 0 14px rgba(255,109,0,0.9);
    }
    .notification-list {
      max-height: 220px;
      overflow-y: auto;
      padding-right: 4px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .notification-list::-webkit-scrollbar {
      width: 6px;
    }
    .notification-list::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--primary), var(--secondary));
      border-radius: 999px;
    }
    .notification-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 11px 12px;
      border-radius: 14px;
      background: linear-gradient(120deg, rgba(5,10,30,0.9), rgba(10,19,45,0.9));
      border: 1px solid rgba(0,229,255,0.18);
      box-shadow: 0 5px 20px rgba(0,0,0,0.65);
      font-size: 0.86rem;
    }
    .notification-item.received { border-left: 3px solid var(--success); }
    .notification-item.sent     { border-left: 3px solid var(--fire-soft); }
    .notification-item.fund     { border-left: 3px solid var(--primary); }

    .notification-icon {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 0, rgba(0,229,255,0.55), rgba(2,6,18,1));
      box-shadow: 0 0 12px rgba(0,229,255,0.7);
      flex-shrink: 0;
    }
    .notification-content {
      flex: 1;
    }
    .notification-text {
      color: #e1f5fe;
      margin-bottom: 3px;
    }
    .notification-meta {
      font-size: 0.7rem;
      color: #90a4ae;
    }
    .notification-amount {
      font-family: 'Orbitron';
      font-size: 0.9rem;
      font-weight: 700;
    }
    .notification-amount.plus { color: var(--success); }
    .notification-amount.minus { color: var(--danger); }

    /* DASHBOARD GRID & CARDS */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 20px;
      margin-bottom: 22px;
    }
    .card {
      background: var(--glass-bg);
      border-radius: 18px;
      border: 1px solid var(--glass-border);
      padding: 22px 22px 24px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.75);
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.18), transparent 55%);
      opacity: 0;
      transition: opacity 0.35s;
    }
    .card:hover::before { opacity: 1; }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
    }
    .card-title {
      font-family: 'Orbitron';
      font-size: 1rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #e1f5fe;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .card-title i {
      color: var(--primary);
    }

    /* BALANCE */
    .balance-wrapper {
      text-align: center;
      padding: 12px 0 18px;
    }
    .balance-amount {
      font-family: 'Orbitron';
      font-size: 3.1rem;
      font-weight: 900;
      background: linear-gradient(135deg, #00e5ff, #2979ff);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 26px rgba(0,229,255,0.8);
      margin-bottom: 8px;
    }
    .balance-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: #90a4ae;
    }

    /* BUTTONS */
    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 12px 18px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 0.82rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #0a101f;
      background: linear-gradient(135deg, #00e5ff, #2979ff);
      box-shadow: 0 8px 28px rgba(0,229,255,0.6);
      overflow: hidden;
    }
    .btn span { position: relative; z-index: 1; }
    .btn::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0 0, rgba(255,255,255,0.4), transparent 55%);
      opacity: 0;
      transition: opacity 0.25s, transform 0.25s;
      transform: translate(-40%, -40%);
    }
    .btn:hover::before { opacity: 1; transform: translate(0, 0); }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow:
        0 12px 35px rgba(0,229,255,0.85),
        0 0 30px rgba(41,121,255,0.75);
    }

    .btn-secondary {
      background: linear-gradient(135deg, rgba(11, 22, 50, 0.95), rgba(7, 13, 30, 1));
      color: #e1f5fe;
      border: 1px solid rgba(0,229,255,0.3);
      box-shadow: 0 6px 24px rgba(0,0,0,0.8);
    }

    .btn-ghost {
      background: transparent;
      color: #b0bec5;
      border-radius: 999px;
      border: 1px solid rgba(0,229,255,0.35);
      padding: 6px 12px;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .btn-danger-line {
      background: linear-gradient(135deg, rgba(26,6,10,0.95), rgba(74,20,20,0.95));
      color: #ffcdd2;
      border-radius: 9px;
      padding: 6px 10px;
      border: 1px solid rgba(244,67,54,0.7);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
    }
    .btn-delete {
      background: linear-gradient(135deg, rgba(33,33,33,0.96), rgba(66,66,66,0.96));
      color: #eceff1;
      border-radius: 9px;
      padding: 6px 10px;
      border: 1px solid rgba(158,158,158,0.7);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      margin-left: 6px;
    }

    .loader {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 2px solid rgba(187,222,251,0.4);
      border-top-color: #e1f5fe;
      animation: spin 0.8s linear infinite;
      display: none;
    }
    .btn.loading .loader {
      display: inline-block;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* TABLES */
    .table-container {
      margin-top: 12px;
      max-height: 360px;
      overflow: auto;
      border-radius: 14px;
    }
    table { width: 100%; border-collapse: collapse; font-size: 0.86rem; }
    th, td { padding: 12px 12px; }
    th {
      position: sticky;
      top: 0;
      background: rgba(2, 9, 26, 0.98);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #90a4ae;
      border-bottom: 1px solid rgba(55,71,79,0.9);
    }
    td {
      border-bottom: 1px solid rgba(38,50,56,0.8);
      color: #e1f5fe;
    }
    tr:hover td {
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.16), transparent 80%);
    }

    .cost-pos { color: var(--success); font-family: 'Orbitron'; }
    .cost-neg { color: var(--danger); font-family: 'Orbitron'; }

    /* MODALS */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 50% 0, rgba(0,229,255,0.25), rgba(0,0,0,0.95));
      backdrop-filter: blur(16px);
      z-index: 40;
      display: none;
      align-items: center;
      justify-content: center;
    }
    .modal {
      background: linear-gradient(145deg, #050b18, #050b20);
      border-radius: 20px;
      border: 1px solid rgba(0,229,255,0.35);
      width: 90%;
      max-width: 420px;
      padding: 26px 24px 26px;
      box-shadow:
        0 18px 60px rgba(0,0,0,0.95),
        0 0 45px rgba(0,229,255,0.5);
      position: relative;
      animation: modalUp 0.35s ease-out;
    }
    @keyframes modalUp {
      from { opacity: 0; transform: translateY(20px) scale(0.96); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }
    .close-modal {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.4);
      background: transparent;
      color: #eceff1;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    label {
      display: block;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #b3e5fc;
      margin-bottom: 4px;
    }
    input {
      width: 100%;
      padding: 11px 10px;
      border-radius: 10px;
      border: 1px solid #cfd8dc;
      font-size: 0.9rem;
      margin-bottom: 16px;
    }
    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 18px rgba(0,229,255,0.7);
    }

    /* TOAST */
    #toast-container {
      position: fixed;
      top: 24px;
      right: 24px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 60;
    }
    .toast {
      display: flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(135deg, #020612, #041020);
      padding: 12px 14px;
      border-radius: 12px;
      min-width: 260px;
      font-size: 0.8rem;
      border-left: 3px solid var(--primary);
      box-shadow:
        0 12px 40px rgba(0,0,0,0.9),
        0 0 25px rgba(0,229,255,0.6);
      color: #e1f5fe;
      animation: toastIn 0.25s ease-out;
    }
    @keyframes toastIn {
      from { opacity: 0; transform: translateX(30px); }
      to   { opacity: 1; transform: translateX(0); }
    }

    /* VERIFICATION */
    #verify-box {
      display: none;
      margin-top: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--warning);
      background: linear-gradient(135deg, rgba(255,213,79,0.15), rgba(255,109,0,0.08));
      font-size: 0.8rem;
    }

    /* FAQ */
    .faq-section {
      margin-top: 24px;
      background: var(--glass-bg);
      border-radius: 18px;
      border: 1px solid var(--glass-border);
      padding: 20px 22px 26px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.8);
    }
    .faq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }
    .faq-item {
      padding: 14px 14px;
      border-radius: 14px;
      border-left: 3px solid var(--fire-soft);
      background: linear-gradient(125deg, rgba(11,22,50,0.92), rgba(6,12,30,0.95));
      font-size: 0.85rem;
    }
    .faq-heading {
      font-weight: 600;
      margin-bottom: 6px;
      color: #e1f5fe;
    }
    .contact-box {
      margin-top: 18px;
      padding: 16px 16px;
      border-radius: 14px;
      border: 1px solid rgba(0,229,255,0.4);
      background: radial-gradient(circle at 0 0, rgba(0,229,255,0.25), rgba(6,12,30,0.96));
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 12px;
      justify-content: space-between;
      font-size: 0.84rem;
    }
    .contact-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .contact-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      text-decoration: none;
      font-size: 0.8rem;
      border: 1px solid rgba(0,229,255,0.5);
      color: #e1f5fe;
      background: rgba(2,7,22,0.9);
    }

    /* ADMIN */
    #admin-panel {
      margin-top: 20px;
      border-color: rgba(255,213,79,0.6);
      box-shadow: 0 0 32px rgba(255,213,79,0.4);
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      header { flex-direction: column; align-items: flex-start; gap: 16px; }
      nav { width: 100%; justify-content: space-between; }
      .nav-links { flex-wrap: wrap; }
    }
  </style>
</head>
<body>
<div id="stars"></div>
<div class="ring r1"></div>
<div class="ring r2"></div>
<div class="ring r3"></div>
<div id="toast-container"></div>

<div class="container">
  <!-- Floating Nav + Dropdown -->
  <div class="nav-shell">
    <nav>
      <div class="nav-brand-mini">
        <i class="fas fa-bolt"></i>
        <span>ELVION</span>
      </div>
      <div class="nav-links">
        <a href="https://elvionai.com.ng" class="nav-link primary-pill">
          <i class="fas fa-home"></i> Home
        </a>
        <a href="https://elvionai.com.ng/api.html" class="nav-link">
          <i class="fas fa-book"></i> Docs
        </a>
        <a href="https://elvionai.com.ng/philadelphia.html" class="nav-link">
          <i class="fas fa-robot"></i> Philadelphia AI
        </a>

        <div class="dropdown" id="nav-dropdown">
          <button class="nav-link dropdown-toggle" type="button">
            <i class="fas fa-bars"></i> Console
          </button>
          <div class="dropdown-menu">
            <a href="#wallet" class="dropdown-item">
              <i class="fas fa-wallet"></i>
              <div>
                Wallet & Credits
                <small>Fund, view balance</small>
              </div>
            </a>
            <a href="#keys" class="dropdown-item">
              <i class="fas fa-key"></i>
              <div>
                API Keys
                <small>Manage & revoke</small>
              </div>
            </a>
            <a href="#activity" class="dropdown-item">
              <i class="fas fa-history"></i>
              <div>
                Activity Log
                <small>Calls & payments</small>
              </div>
            </a>
          </div>
        </div>
      </div>
    </nav>
  </div>

  <!-- Header -->
  <header>
    <div class="brand">
      <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" alt="Elvion Logo">
      <div>
        <h1>ELVION AI</h1>
        <small>DEVELOPER&nbsp;CONSOLE</small>
      </div>
    </div>
    <div class="user-info">
      <div class="avatar-pill"><i class="fas fa-user"></i></div>
      <span id="user-email">Loading...</span>
      <button class="logout-btn" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </div>
  </header>

  <!-- Notification Center -->
  <section class="notification-center">
    <div class="notification-header">
      <div class="notification-title">
        <i class="fas fa-bell"></i> NOTIFICATIONS
      </div>
      <span class="notification-badge" id="notif-badge">0</span>
    </div>
    <div class="notification-list" id="notification-list">
      <div style="text-align:center; padding:20px; color:#90a4ae; font-size:0.85rem;">
        Loading notifications...
      </div>
    </div>
  </section>

  <!-- Top grid -->
  <section class="dashboard-grid">
    <!-- Wallet -->
    <div class="card" id="wallet">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-wallet"></i> WALLET</h3>
        <button class="btn-ghost" onclick="loadData()">
          <i class="fas fa-sync"></i> Refresh
        </button>
      </div>
      <div class="balance-wrapper">
        <div class="balance-amount" id="balance-display">---</div>
        <div class="balance-label">Credits available</div>
      </div>
      <button class="btn" onclick="openModal('payment-modal')">
        <span><i class="fas fa-bolt"></i> Fund wallet</span>
        <div class="loader"></div>
      </button>
      <div id="verify-box">
        <div><strong>Verifying transaction...</strong></div>
        <div style="margin-top:4px;">Syncing with payment gateway, please hold.</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-rocket"></i> ACTIONS</h3>
      </div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:16px;">
        <button class="btn-secondary" onclick="openModal('transfer-modal')">
          <span><i class="fas fa-paper-plane"></i> Transfer</span>
        </button>
        <button class="btn-secondary" id="gen-key-btn" onclick="generateKey()">
          <span><i class="fas fa-key"></i> New key</span>
          <div class="loader"></div>
        </button>
      </div>
      <div style="font-size:0.8rem; color:#b0bec5; padding:10px 12px; border-radius:10px; border:1px solid rgba(55,71,79,0.9);">
        <div style="text-transform:uppercase; letter-spacing:0.16em; font-size:0.72rem; margin-bottom:4px; color:#90a4ae;">
          API KEY COST
        </div>
        <div style="display:flex; align-items:center; justify-content:space-between;">
          <span style="font-family:'Orbitron'; font-weight:700; color:var(--primary);">100 Credits</span>
          <span style="font-size:0.72rem; color:#78909c;">Charged instantly on creation</span>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-chart-line"></i> STATS</h3>
      </div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px;">
        <div style="padding:14px 12px; border-radius:12px; border:1px solid rgba(0,229,255,0.4); background:rgba(2,7,22,0.9); text-align:center;">
          <div style="font-size:0.75rem; letter-spacing:0.16em; color:#90a4ae; text-transform:uppercase; margin-bottom:6px;">Active keys</div>
          <div style="font-family:'Orbitron'; font-size:2rem;" id="active-keys-display">0</div>
        </div>
        <div style="padding:14px 12px; border-radius:12px; border:1px solid rgba(255,109,0,0.5); background:rgba(15,8,6,0.96); text-align:center;">
          <div style="font-size:0.75rem; letter-spacing:0.16em; color:#ffab91; text-transform:uppercase; margin-bottom:6px;">Total calls</div>
          <div style="font-family:'Orbitron'; font-size:2rem;" id="total-calls-display">0</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Keys -->
  <section class="card" id="keys">
    <div class="card-header">
      <h3 class="card-title"><i class="fas fa-code"></i> API KEYS</h3>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Key</th>
            <th>Created</th>
            <th>Status</th>
            <th style="text-align:right;">Actions</th>
          </tr>
        </thead>
        <tbody id="key-list">
          <tr><td colspan="4" style="text-align:center; padding:24px;">Loading keys...</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Activity (reuses backend history) -->
  <section class="card" id="activity" style="margin-top:18px;">
    <div class="card-header">
      <h3 class="card-title"><i class="fas fa-history"></i> ACTIVITY</h3>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Action</th>
            <th style="text-align:right;">Amount</th>
            <th style="text-align:right;">Time (UTC)</th>
          </tr>
        </thead>
        <tbody id="usage-list">
          <tr><td colspan="3" style="text-align:center; padding:24px;">Loading history...</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Admin -->
  <section class="card" id="admin-panel" style="display:none;">
    <div class="card-header">
      <h3 class="card-title"><i class="fas fa-crown"></i> ADMIN</h3>
    </div>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px;">
      <div>
        <label>Self grant</label>
        <button class="btn" style="margin-top:4px;" onclick="adminGrantSelf()">
          <span><i class="fas fa-magic"></i> Grant 100K</span>
          <div class="loader"></div>
        </button>
      </div>
      <div>
        <label>Gift user</label>
        <input type="email" id="gift-email" placeholder="user@example.com">
        <input type="number" id="gift-amount" placeholder="Amount">
        <button class="btn-secondary" onclick="adminGift()">
          <span><i class="fas fa-gift"></i> Send gift</span>
        </button>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="faq-section">
    <div style="font-family:'Orbitron'; letter-spacing:0.18em; text-transform:uppercase; font-size:0.9rem; margin-bottom:12px; color:#e1f5fe;">
      SUPPORT & FAQ
    </div>
    <div class="faq-grid">
      <div class="faq-item">
        <div class="faq-heading">Want free API credits?</div>
        <div>Reach out to compliance to learn about promotions and bonus credits for eligible builders.</div>
      </div>
      <div class="faq-item">
        <div class="faq-heading">Got any inquiry?</div>
        <div>Technical, billing, or product questions are welcome. Share details so the team can respond with precision.</div>
      </div>
      <div class="faq-item">
        <div class="faq-heading">Having issues?</div>
        <div>Describe what you were doing, the endpoint, and any error messages. That helps support resolve it instantly.</div>
      </div>
    </div>
    <div class="contact-box">
      <span>Need help or credits now? The compliance team responds instantly.</span>
      <div class="contact-actions">
        <a class="contact-btn" href="mailto:elvionlabs@gmail.com">
          <i class="fas fa-envelope"></i> Email compliance
        </a>
        <a class="contact-btn" href="https://wa.me/2348159983206" target="_blank" rel="noopener">
          <i class="fab fa-whatsapp"></i> Chat on WhatsApp
        </a>
      </div>
    </div>
  </section>
</div>

<!-- Modals -->
<div id="payment-modal" class="modal-overlay">
  <div class="modal">
    <button class="close-modal" onclick="closeModal('payment-modal')">&times;</button>
    <div style="text-align:center; margin-bottom:16px;">
      <i class="fas fa-wallet" style="font-size:2.4rem; color:var(--primary); margin-bottom:6px;"></i>
      <div style="font-family:'Orbitron'; font-size:1.1rem;">Fund wallet</div>
      <div style="font-size:0.8rem; color:#90a4ae; margin-top:4px;">Secure NGN payment</div>
    </div>
    <label>Amount (NGN)</label>
    <input type="number" id="pay-amount" value="1000" min="100">
    <button class="btn" id="pay-btn" onclick="initiatePayment()">
      <span><i class="fas fa-lock"></i> Pay now</span>
      <div class="loader"></div>
    </button>
  </div>
</div>

<div id="transfer-modal" class="modal-overlay">
  <div class="modal">
    <button class="close-modal" onclick="closeModal('transfer-modal')">&times;</button>
    <div style="text-align:center; margin-bottom:16px;">
      <i class="fas fa-paper-plane" style="font-size:2.4rem; color:var(--fire-soft); margin-bottom:6px;"></i>
      <div style="font-family:'Orbitron'; font-size:1.1rem;">Transfer credits</div>
      <div style="font-size:0.8rem; color:#90a4ae; margin-top:4px;">Send to another developer</div>
    </div>
    <label>Receiver email</label>
    <input type="email" id="trans-email" placeholder="developer@example.com">
    <label>Amount</label>
    <input type="number" id="trans-amount" placeholder="500">
    <button class="btn" id="trans-btn" onclick="transferCredits()">
      <span><i class="fas fa-rocket"></i> Send</span>
      <div class="loader"></div>
    </button>
  </div>
</div>

<div id="key-modal" class="modal-overlay">
  <div class="modal">
    <button class="close-modal" onclick="closeModal('key-modal')">&times;</button>
    <div style="text-align:center; margin-bottom:16px;">
      <i class="fas fa-key" style="font-size:2.4rem; color:var(--success); margin-bottom:6px;"></i>
      <div style="font-family:'Orbitron'; font-size:1.1rem;">New API key</div>
      <div style="font-size:0.8rem; color:#90a4ae; margin-top:4px;">Store this securely</div>
    </div>
    <div id="new-key" style="padding:12px 10px; border-radius:12px; background:#000; color:var(--success); font-family:monospace; font-size:0.8rem; word-break:break-all; margin-bottom:12px; border:1px dashed rgba(0,229,255,0.6);"></div>
    <button class="btn-secondary" onclick="copyKey()">
      <span><i class="fas fa-copy"></i> Copy</span>
    </button>
  </div>
</div>

<script type="module">
  const API_URL = "https://web-production-9a18.up.railway.app";
  const ADMIN_EMAIL = "koladhino@gmail.com";

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onIdTokenChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const app = initializeApp({
    apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
    authDomain: "elvionai.firebaseapp.com",
    projectId: "elvionai",
    storageBucket: "elvionai.appspot.com",
    messagingSenderId: "161078300830",
    appId: "1:161078300830:web:f460df8591704eb0e96b8f"
  });

  const auth = getAuth(app);
  let token = null;

  window.logout = () => signOut(auth);
  window.openModal = id => document.getElementById(id).style.display = 'flex';
  window.closeModal = id => document.getElementById(id).style.display = 'none';
  window.copyKey = () => {
    navigator.clipboard.writeText(document.getElementById('new-key').innerText);
    toast('Key copied to clipboard', 'success');
    closeModal('key-modal');
  };

  // Dropdown toggle
  const dropdown = document.getElementById('nav-dropdown');
  dropdown.querySelector('.dropdown-toggle').addEventListener('click', () => {
    dropdown.classList.toggle('open');
  });
  document.addEventListener('click', (e) => {
    if (!dropdown.contains(e.target)) dropdown.classList.remove('open');
  });

  onIdTokenChanged(auth, async (user) => {
    if (user) {
      token = await user.getIdToken(true);
      document.getElementById('user-email').innerText = user.email;
      if (user.email.toLowerCase() === ADMIN_EMAIL) {
        document.getElementById('admin-panel').style.display = 'block';
      }
      loadData();

      const params = new URLSearchParams(window.location.search);
      const ref = params.get('reference') || params.get('trxref');
      if (ref) {
        window.history.replaceState({}, document.title, window.location.pathname);
        startVerificationLoop(ref);
      }
    } else {
      window.location.href = 'developer-dashboard.html'; // adjust login route if needed
    }
  });

  async function req(endpoint, method = 'GET', body = null) {
    const opts = {
      method,
      headers: { 'Content-Type': 'application/json', 'X-Firebase-Token': token }
    };
    if (body) opts.body = JSON.stringify(body);

    const res = await fetch(`${API_URL}${endpoint}`, opts);
    const data = await res.json();
    if (!res.ok) throw new Error(data.detail || 'Request failed');
    return data;
  }

  window.loadData = async () => {
    try {
      const d = await req('/api/user/keys-and-balance');
      document.getElementById('balance-display').innerText = d.balance.toLocaleString();
      document.getElementById('active-keys-display').innerText = d.keys.filter(k => k.is_active).length;

      const kList = document.getElementById('key-list');
      kList.innerHTML = d.keys.map(k => `
        <tr>
          <td style="font-family:monospace; color:var(--primary);">...${k.api_key.slice(-10)}</td>
          <td>${new Date(k.created_at).toLocaleDateString()}</td>
          <td>
            <span style="font-size:0.75rem; padding:4px 8px; border-radius:999px; border:1px solid ${k.is_active ? 'rgba(0,255,176,0.7)' : 'rgba(144,164,174,0.7)'}; color:${k.is_active ? 'var(--success)' : '#b0bec5'};">
              ${k.is_active ? 'Active' : 'Inactive'}
            </span>
          </td>
          <td style="text-align:right;">
            ${k.is_active ? `<button class="btn-danger-line" onclick="revoke('${k.api_key}')">Revoke</button>` : ''}
            <button class="btn-delete" onclick="deleteKey('${k.api_key}')">Delete</button>
          </td>
        </tr>
      `).join('') || '<tr><td colspan="4" style="text-align:center; padding:24px;">No keys yet</td></tr>';

      const h = await req('/api/user/usage-history');
      document.getElementById('total-calls-display').innerText = h.logs.length;

      const usageBody = document.getElementById('usage-list');
      usageBody.innerHTML = h.logs.map(l => {
        const isPos = l.type === 'funding' || l.type === 'gift';
        return `
          <tr>
            <td>${l.endpoint}</td>
            <td style="text-align:right;" class="${isPos ? 'cost-pos' : 'cost-neg'}">
              ${isPos ? '+' : '-'} ${l.cost}
            </td>
            <td style="text-align:right; color:#90a4ae;">
              ${new Date(l.timestamp).toLocaleString()}
            </td>
          </tr>
        `;
      }).join('') || '<tr><td colspan="3" style="text-align:center; padding:24px;">No activity yet</td></tr>';

      buildNotifications(h.logs);
    } catch (e) {
      toast(e.message, 'error');
    }
  };

  function buildNotifications(logs) {
    const list = document.getElementById('notification-list');
    const badge = document.getElementById('notif-badge');
    if (!logs.length) {
      list.innerHTML = '<div style="text-align:center; padding:20px; color:#90a4ae; font-size:0.85rem;">No notifications yet</div>';
      badge.innerText = '0';
      return;
    }
    const sorted = logs.slice().sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 8);
    badge.innerText = sorted.length.toString();

    list.innerHTML = sorted.map(l => {
      let cls = 'fund', icon = 'fa-credit-card', label = 'Wallet updated';
      if (l.type === 'gift' || l.endpoint.toLowerCase().includes('received')) {
        cls = 'received';
        icon = 'fa-gift';
        label = 'Credits received';
      } else if (l.endpoint.toLowerCase().includes('transfer')) {
        cls = 'sent';
        icon = 'fa-paper-plane';
        label = 'Credits sent';
      } else if (l.type === 'usage') {
        cls = 'sent';
        icon = 'fa-code';
        label = 'API usage';
      }
      const isPos = l.type === 'funding' || l.type === 'gift';
      const amount = `${isPos ? '+' : '-'}${l.cost}`;
      return `
        <div class="notification-item ${cls}">
          <div class="notification-icon">
            <i class="fas ${icon}"></i>
          </div>
          <div class="notification-content">
            <div class="notification-text">${label}</div>
            <div class="notification-meta">${new Date(l.timestamp).toLocaleString()}</div>
          </div>
          <div class="notification-amount ${isPos ? 'plus' : 'minus'}">${amount}</div>
        </div>
      `;
    }).join('');
  }

  async function startVerificationLoop(ref) {
    const box = document.getElementById('verify-box');
    box.style.display = 'block';
    for (let i = 0; i < 20; i++) {
      try {
        const res = await req(`/api/payments/verify?transaction_ref=${ref}`);
        if (res.status === 'success' || res.status === 'already_credited') {
          box.style.display = 'none';
          toast(`Payment verified: +${res.credits_added} credits`, 'success');
          loadData();
          return;
        }
        if (res.status === 'failed') {
          box.style.display = 'none';
          toast('Payment failed', 'error');
          return;
        }
      } catch {}
      await new Promise(r => setTimeout(r, 3000));
    }
    box.style.display = 'none';
    toast('Verification timed out. Check activity.', 'error');
  }

  window.initiatePayment = async () => {
    const btn = document.getElementById('pay-btn');
    btn.classList.add('loading');
    try {
      const amt = Number(document.getElementById('pay-amount').value);
      if (!amt || amt < 100) throw new Error('Minimum amount is 100 NGN');
      const res = await req('/api/payments/initiate', 'POST', { amount: amt });
      window.location.href = res.checkout_url;
    } catch (e) {
      toast(e.message, 'error');
      btn.classList.remove('loading');
    }
  };

  window.generateKey = async () => {
    const btn = document.getElementById('gen-key-btn');
    btn.classList.add('loading');
    try {
      const res = await req('/api/user/create-api-key', 'POST');
      document.getElementById('new-key').innerText = res.api_key;
      openModal('key-modal');
      toast('New API key generated', 'success');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    } finally {
      btn.classList.remove('loading');
    }
  };

  window.transferCredits = async () => {
    const btn = document.getElementById('trans-btn');
    btn.classList.add('loading');
    try {
      const email = document.getElementById('trans-email').value;
      const amt = Number(document.getElementById('trans-amount').value);
      if (!email || !amt) throw new Error('Enter email and amount');
      const res = await req('/api/user/transfer-credits', 'POST', { receiver_email: email, amount: amt });
      toast(res.message || 'Transfer successful', 'success');
      closeModal('transfer-modal');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    } finally {
      btn.classList.remove('loading');
    }
  };

  window.revoke = async (key) => {
    if (!confirm('Revoke this key? It will stop working immediately.')) return;
    try {
      await req('/api/user/revoke-api-key', 'POST', { api_key: key });
      toast('Key revoked', 'success');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    }
  };

  window.deleteKey = async (key) => {
    if (!confirm('Permanently delete this key?')) return;
    try {
      // If you add a dedicated delete endpoint, point this there.
      await req('/api/user/revoke-api-key', 'POST', { api_key: key });
      toast('Key deleted', 'success');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    }
  };

  window.adminGrantSelf = async () => {
    try {
      await req('/api/admin/grant-credits', 'POST');
      toast('Admin credits granted', 'success');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    }
  };

  window.adminGift = async () => {
    try {
      const email = document.getElementById('gift-email').value;
      const amt = Number(document.getElementById('gift-amount').value);
      if (!email || !amt) throw new Error('Enter email and amount');
      await req('/api/admin/gift-credits', 'POST', { target_email: email, amount: amt });
      toast('Gift sent', 'success');
      loadData();
    } catch (e) {
      toast(e.message, 'error');
    }
  };

  function toast(msg, type) {
    const el = document.createElement('div');
    el.className = 'toast';
    let color = varPrimary();
    if (type === 'error') color = varDanger();
    if (type === 'success') color = varSuccess();
    el.style.borderLeftColor = color;
    el.innerHTML = `<i class="fas ${type === 'error' ? 'fa-times-circle' : type === 'success' ? 'fa-check-circle' : 'fa-info-circle'}"></i><span>${msg}</span>`;
    document.getElementById('toast-container').appendChild(el);
    setTimeout(() => {
      el.style.opacity = '0';
      el.style.transform = 'translateX(20px)';
      setTimeout(() => el.remove(), 250);
    }, 3500);
  }
  const varPrimary = () => getComputedStyle(document.documentElement).getPropertyValue('--primary') || '#00e5ff';
  const varDanger = () => getComputedStyle(document.documentElement).getPropertyValue('--danger') || '#ff1744';
  const varSuccess = () => getComputedStyle(document.documentElement).getPropertyValue('--success') || '#00ffb0';

  // Starfield
  const stars = document.getElementById('stars');
  for (let i = 0; i < 95; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    const size = Math.random() * 2 + 0.5;
    s.style.width = size + 'px';
    s.style.height = size + 'px';
    s.style.left = Math.random() * 100 + '%';
    s.style.top = Math.random() * 100 + '%';
    s.style.setProperty('--duration', (Math.random() * 4 + 2) + 's');
    s.style.animationDelay = (Math.random() * 4) + 's';
    stars.appendChild(s);
  }
</script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date()); 

  gtag('config', 'G-J1YTKP10ZX');
</script>
