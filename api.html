<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elvion AI | Developer Hub</title>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PrismJS for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <style>
        :root {
            /* Elvion Theme Palette */
            --bg-deep-space: #030305;
            --bg-glass-panel: rgba(10, 10, 18, 0.6);
            --bg-card: #11111a;
            --bg-input: #050508;
            
            --primary: #9d4edd;
            --primary-glow: rgba(157, 78, 221, 0.4);
            --secondary: #e040fb;
            --accent: #00b4d8;
            
            --text-main: #f0f0f5;
            --text-muted: #9ca3af;
            --text-dark: #222;
            --border: #1f1f2e;
            
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            
            --font-main: 'Inter', sans-serif;
            --font-code: 'JetBrains Mono', monospace;

            --backdrop-blur: blur(12px);
        }

        /* --- Base & Layout --- */
        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            margin: 0;
            background-color: var(--bg-deep-space);
            background-image: radial-gradient(circle at 10% 10%, rgba(157, 78, 221, 0.1) 0%, transparent 40%),
                              radial-gradient(circle at 90% 80%, rgba(0, 180, 216, 0.1) 0%, transparent 40%);
            color: var(--text-main);
            font-family: var(--font-main);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: grid;
            grid-template-columns: 280px 1fr minmax(450px, 35%);
            grid-template-rows: 100vh;
        }

        /* --- Scrollbar Styling --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: var(--border); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--primary); }

        /* --- 1. Sidebar (Navigation) --- */
        .sidebar {
            background: var(--bg-glass-panel);
            backdrop-filter: var(--backdrop-blur);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 24px 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 24px 24px;
            border-bottom: 1px solid var(--border);
        }
        .sidebar-header h1 {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 0 10px var(--primary-glow);
            color: #fff;
        }
        .sidebar-header h1 span { color: var(--primary); }

        .nav-group { padding: 16px; }
        .nav-label {
            font-size: 11px;
            text-transform: uppercase;
            color: var(--text-muted);
            padding: 0 12px 10px;
            letter-spacing: 0.8px;
            font-weight: 600;
        }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            color: var(--text-muted);
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }
        .nav-item:hover { background: rgba(157, 78, 221, 0.1); color: var(--text-main); }
        .nav-item.active {
            background: var(--primary);
            color: #fff;
            box-shadow: 0 0 15px var(--primary-glow);
        }
        .nav-item .method-badge {
            font-family: var(--font-code);
            font-size: 10px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 10px;
            width: 40px;
            text-align: center;
            color: #fff;
            opacity: 0.8;
        }
        .method-badge.POST { background: var(--primary); }
        .method-badge.GET { background: var(--accent); }
        .nav-item.active .method-badge { background: rgba(255,255,255,0.2); }

        /* --- 2. Main Content (Documentation) --- */
        .content-area {
            padding: 48px 64px;
            overflow-y: auto;
        }
        .doc-section {
            margin-bottom: 80px;
            padding-top: 20px; /* For scroll-margin */
            scroll-margin-top: 20px;
        }
        h2 { font-size: 36px; font-weight: 700; margin: 0 0 16px; border-bottom: 1px solid var(--border); padding-bottom: 16px; }
        h3 { font-size: 24px; font-weight: 600; margin: 40px 0 16px; }
        p, li { color: var(--text-muted); font-size: 16px; line-height: 1.7; }
        a { color: var(--accent); text-decoration: none; font-weight: 500; }
        a:hover { text-decoration: underline; }
        code {
            font-family: var(--font-code);
            background-color: var(--bg-card);
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: var(--secondary);
            border: 1px solid var(--border);
        }
        .param-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            margin: 24px 0;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        .param-table th, .param-table td { padding: 14px 16px; text-align: left; border-bottom: 1px solid var(--border); }
        .param-table th { background: var(--bg-card); color: var(--text-muted); font-weight: 500; }
        .param-table td:first-child { color: var(--primary); font-family: var(--font-code); font-weight: 500; }
        .param-table .required { color: var(--error); font-weight: 700; margin-left: 4px; }
        .param-table .type { color: var(--accent); font-family: var(--font-code); }

        /* --- 3. Playground (Interactive Panel) --- */
        .playground {
            background: var(--bg-glass-panel);
            backdrop-filter: var(--backdrop-blur);
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .playground-header { padding: 16px 24px; border-bottom: 1px solid var(--border); }
        .playground-header label {
            display: block; font-size: 11px; text-transform: uppercase;
            color: var(--text-muted); margin-bottom: 8px; font-weight: 600;
        }
        .api-key-wrapper { position: relative; }
        .api-key-wrapper i { position: absolute; left: 14px; top: 12px; color: var(--text-muted); font-size: 14px; }
        #globalApiKey {
            width: 100%; background: var(--bg-input); border: 1px solid var(--border);
            padding: 10px 12px 10px 40px; border-radius: 6px; color: var(--text-main);
            font-family: var(--font-code); font-size: 13px; transition: all 0.2s;
        }
        #globalApiKey:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 10px var(--primary-glow); }

        .playground-tabs { display: flex; padding: 16px 24px 0; }
        .tab-btn {
            background: none; border: none; color: var(--text-muted); font-family: var(--font-main);
            padding: 8px 16px; cursor: pointer; font-size: 14px; font-weight: 600;
            border-bottom: 2px solid transparent; transition: all 0.2s;
        }
        .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); }

        .playground-content { flex: 1; overflow-y: auto; padding: 24px; position: relative; }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.3s; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Code View */
        .lang-select {
            width: 100%; background: var(--bg-card); color: var(--text-main); border: 1px solid var(--border);
            padding: 10px; border-radius: 6px; margin-bottom: 16px; font-size: 13px; cursor: pointer;
        }
        .code-container { position: relative; border-radius: 8px; overflow: hidden; }
        .copy-btn {
            position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.1);
            border: none; color: var(--text-main); padding: 6px 10px; border-radius: 4px;
            font-size: 12px; cursor: pointer; z-index: 5; transition: background 0.2s;
        }
        .copy-btn:hover { background: var(--primary); }
        pre[class*="language-"] { margin: 0; border: 1px solid var(--border); }
        code[class*="language-"] { font-size: 13px !important; }

        /* Console View */
        .console-form .field { margin-bottom: 16px; }
        .console-form label { display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 6px; font-weight: 500; }
        .console-form .input, .console-form textarea, .console-form select {
            width: 100%; background: var(--bg-input); border: 1px solid var(--border);
            padding: 10px; border-radius: 6px; color: var(--text-main); font-size: 13px;
        }
        .console-form textarea { min-height: 80px; resize: vertical; font-family: var(--font-code); }
        
        .execute-btn {
            width: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white; border: none; padding: 12px; border-radius: 6px;
            font-weight: 600; font-size: 14px; cursor: pointer; margin-top: 10px;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: all 0.2s; box-shadow: 0 4px 15px var(--primary-glow);
        }
        .execute-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px var(--primary-glow); }
        .execute-btn:disabled { opacity: 0.6; cursor: not-allowed; }

        .response-area {
            margin-top: 24px; border-top: 1px solid var(--border);
            padding-top: 24px; display: none;
        }
        .response-area.visible { display: block; animation: fadeIn 0.5s; }
        .response-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-family: var(--font-code); font-size: 12px; }
        .response-status.success { color: var(--success); font-weight: 600; }
        .response-status.error { color: var(--error); font-weight: 600; }
        .response-time { color: var(--text-muted); }
        .response-image-preview { max-width: 100%; border-radius: 6px; margin-bottom: 12px; border: 1px solid var(--border); }
    </style>
</head>
<body>

    <!-- [1] SIDEBAR NAVIGATION -->
    <aside class="sidebar">
        <header class="sidebar-header">
            <h1>Elvion<span>AI</span></h1>
        </header>
        <nav>
            <div class="nav-group">
                <div class="nav-label">Getting Started</div>
                <a href="#intro" class="nav-item">Introduction</a>
                <a href="#auth" class="nav-item">Authentication</a>
            </div>
            <div class="nav-group">
                <div class="nav-label">Core AI Models</div>
                <a href="#seraphina" class="nav-item"><span class="method-badge POST">POST</span> Seraphina Chat</a>
                <a href="#bobby" class="nav-item"><span class="method-badge POST">POST</span> Bobby Chat</a>
            </div>
            <div class="nav-group">
                <div class="nav-label">Creative Suite</div>
                <a href="#image-gen" class="nav-item"><span class="method-badge POST">POST</span> Generate Image</a>
            </div>
            <!-- Add more nav items for each endpoint -->
        </nav>
    </aside>

    <!-- [2] MAIN CONTENT -->
    <main class="content-area">
        <section id="intro" class="doc-section">
            <h2>Welcome to the Elvion AI Developer Hub</h2>
            <p>This is your central command for integrating Elvion's powerful suite of generative AI models. Our API is designed for simplicity, power, and speed, enabling you to build next-generation applications with ease. This interactive documentation allows you to read, learn, and test every endpoint live.</p>
            <h3>How to Use This Documentation</h3>
            <ol>
                <li><strong>Get Your API Key:</strong> Visit the <a href="https://elvionai.com.ng/developer-login.html" target="_blank">Developer Dashboard</a> to generate your API key.</li>
                <li><strong>Set Your Key:</strong> Paste your key into the "Global API Key" input in the top-right panel. It will be saved in your browser for the session.</li>
                <li><strong>Explore:</strong> Use the left navigation to jump to an endpoint. The central panel provides detailed information.</li>
                <li><strong>Experiment:</strong> The right panel is your playground. View multi-language code snippets or switch to the "Live Console" to make real API calls and see instant results.</li>
            </ol>
        </section>

        <section id="auth" class="doc-section">
            <h2>Authentication</h2>
            <p>The Developer API uses <strong>Bearer Token</strong> authentication. You must include your API key in the `Authorization` header of every request to a protected endpoint.</p>
            <p>All endpoints listed in this documentation under "Core AI Models" and "Creative Suite" are protected and will deduct credits from your account balance.</p>
            <h3>Example Header</h3>
            <div class="code-container"><pre><code class="language-http">Authorization: Bearer elv_your_api_key_here</code></pre></div>
        </section>

        <section id="seraphina" class="doc-section" data-endpoint="/api/developer/seraphina/chat" data-method="POST">
            <h2>Seraphina Chat</h2>
            <p>Access Seraphina, our premier reasoning and research model powered by Perplexity. Ideal for applications requiring factual accuracy, deep analysis, and web-grounded answers with citations. This endpoint supports streaming for real-time conversational experiences.</p>
            
            <h3>Endpoint</h3>
            <code>POST /api/developer/seraphina/chat</code>

            <h3>Parameters</h3>
            <table class="param-table">
                <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>message</code><span class="required">*</span></td><td class="type">string</td><td>The latest user query or message to send to the model.</td></tr>
                    <tr><td><code>history</code></td><td class="type">array</td><td>An array of previous conversation turns to provide context. Each object should be <code>{ "role": "user" | "assistant", "content": "..." }</code>.</td></tr>
                    <tr><td><code>stream</code></td><td class="type">boolean</td><td>Defaults to <code>true</code>. When true, the response is streamed in chunks. For the live console, this is internally set to <code>false</code> for simplicity.</td></tr>
                    <tr><td><code>temperature</code></td><td class="type">float</td><td>Optional. Controls randomness (0.0 to 1.0). Defaults to <code>0.7</code>.</td></tr>
                </tbody>
            </table>

            <h3>Response Example</h3>
            <div class="code-container"><pre><code class="language-json">{
  "reply": "The sky appears blue due to a phenomenon called Rayleigh scattering...",
  "citations": [ ... ],
  "usage": { ... }
}</code></pre></div>
        </section>
        
        <section id="bobby" class="doc-section" data-endpoint="/api/developer/bobby/chat" data-method="POST">
            <h2>Bobby Chat</h2>
            <p>Interact with Bobby (Thena Llama), a versatile and efficient model perfect for creative writing, coding assistance, and general-purpose chat applications. Bobby offers a great balance of performance and cost-effectiveness.</p>
            
            <h3>Endpoint</h3>
            <code>POST /api/developer/bobby/chat</code>

            <h3>Parameters</h3>
            <table class="param-table">
                <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>prompt</code><span class="required">*</span></td><td class="type">string</td><td>The user's input prompt.</td></tr>
                    <tr><td><code>systemPrompt</code></td><td class="type">string</td><td>Optional. A custom system instruction to guide Bobby's personality, tone, and task. If omitted, the default friendly and helpful persona is used.</td></tr>
                </tbody>
            </table>
        </section>
        
        <section id="image-gen" class="doc-section" data-endpoint="/api/developer/generate-image" data-method="POST">
            <h2>Generate Image</h2>
            <p>Create stunning, high-resolution images from text prompts. This endpoint leverages powerful diffusion models from Thena and MiniMax, giving you creative flexibility.</p>
            
            <h3>Endpoint</h3>
            <code>POST /api/developer/generate-image</code>

            <h3>Parameters</h3>
            <table class="param-table">
                <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>prompt</code><span class="required">*</span></td><td class="type">string</td><td>A detailed, descriptive text prompt of the desired image. Be specific for best results.</td></tr>
                    <tr><td><code>model</code></td><td class="type">string</td><td>For Thena engine: <code>"v6"</code>, <code>"photoreal"</code>, <code>"anime_core"</code>. Defaults to <code>"v6"</code>.</td></tr>
                    <tr><td><code>use_minimax</code></td><td class="type">boolean</td><td>Set to <code>true</code> to use the MiniMax engine instead of the default Thena engine. Defaults to <code>false</code>.</td></tr>
                    <tr><td><code>creative</code></td><td class="type">boolean</td><td>(Thena only) Toggles a more artistic and less literal interpretation of the prompt. Defaults to <code>false</code>.</td></tr>
                </tbody>
            </table>
            <h3>Success Response</h3>
            <p>Returns a JSON object containing the generated image as a Base64 encoded string.</p>
            <div class="code-container"><pre><code class="language-json">{
  "image_b64": "iVBORw0KGgoAAAANSUhEUgA... (long base64 string)"
}</code></pre></div>
        </section>

    </main>

    <!-- [3] PLAYGROUND (INTERACTIVE PANEL) -->
    <aside class="playground">
        <header class="playground-header">
            <label>Global API Key</label>
            <div class="api-key-wrapper">
                <i class="fas fa-key"></i>
                <input type="password" id="globalApiKey" placeholder="elv_...">
            </div>
        </header>

        <div class="playground-tabs">
            <button class="tab-btn active" onclick="switchView('code')">Code Examples</button>
            <button class="tab-btn" onclick="switchView('console')">Live Console</button>
        </div>

        <div class="playground-content">
            <!-- Code Snippet View -->
            <div id="view-code" class="view active">
                <select id="langSelect" class="lang-select">
                    <option value="curl">cURL</option>
                    <option value="python">Python</option>
                    <option value="js">Node.js</option>
                </select>
                <div class="code-container">
                    <button class="copy-btn"><i class="far fa-copy"></i></button>
                    <pre><code id="codeBlock" class="language-bash"></code></pre>
                </div>
            </div>

            <!-- Live Console View -->
            <div id="view-console" class="view">
                <form id="console-form" class="console-form"></form>
                <div id="response-area" class="response-area">
                    <div class="response-header">
                        <span id="response-status" class="response-status"></span>
                        <span id="response-time" class="response-time"></span>
                    </div>
                    <img id="response-image-preview" class="response-image-preview" style="display: none;">
                    <div class="code-container">
                        <pre><code id="response-body" class="language-json"></code></pre>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    
    <script>
        // --- STATE & CONFIG ---
        const BASE_URL = "https://web-production-9a18.up.railway.app";
        let currentSectionId = 'intro';

        // --- DOM ELEMENTS ---
        const contentArea = document.querySelector('.content-area');
        const navItems = document.querySelectorAll('.nav-item');
        const docSections = document.querySelectorAll('.doc-section');
        const apiKeyInput = document.getElementById('globalApiKey');
        const langSelect = document.getElementById('langSelect');

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            apiKeyInput.value = localStorage.getItem('elvionApiKey') || '';
            apiKeyInput.addEventListener('input', e => {
                localStorage.setItem('elvionApiKey', e.target.value);
                updateCodeSnippets(); // Update code with new key
            });
            langSelect.addEventListener('change', updateCodeSnippets);
            document.querySelector('.copy-btn').addEventListener('click', copyCode);
            
            // Initial render
            setActiveSection('intro');
        });

        // --- SCROLLSPY ---
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setActiveSection(entry.target.id);
                }
            });
        }, { root: contentArea, threshold: 0.3 });
        docSections.forEach(section => observer.observe(section));

        // --- UI & STATE MANAGEMENT ---
        function setActiveSection(id) {
            currentSectionId = id;
            navItems.forEach(item => item.classList.toggle('active', item.getAttribute('href') === `#${id}`));
            updatePlayground();
        }

        function updatePlayground() {
            updateCodeSnippets();
            renderConsoleForm();
            document.getElementById('response-area').classList.remove('visible');
        }
        
        function switchView(view) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            if (view === 'code') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('view-code').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('view-console').classList.add('active');
            }
        }

        // --- DYNAMIC CONTENT RENDERING ---
        function updateCodeSnippets() {
            const section = document.getElementById(currentSectionId);
            if (!section || !section.dataset.endpoint) {
                document.getElementById('codeBlock').innerHTML = Prism.highlight('// Select an API endpoint from the navigation.', Prism.languages.javascript, 'javascript');
                return;
            }
            
            const endpoint = section.dataset.endpoint;
            const method = section.dataset.method;
            const lang = langSelect.value;
            const apiKey = apiKeyInput.value || 'YOUR_API_KEY';
            const params = getExampleParams(currentSectionId);

            let code = '';
            let langClass = '';

            if (lang === 'curl') {
                langClass = 'language-bash';
                code = `curl -X ${method} "${BASE_URL}${endpoint}" \\\n  -H "Authorization: Bearer ${apiKey}" \\\n  -H "Content-Type: application/json"`;
                if (method === 'POST') code += ` \\\n  -d '${JSON.stringify(params, null, 2)}'`;
            } else if (lang === 'python') {
                langClass = 'language-python';
                code = `import requests\nimport json\n\nAPI_URL = "${BASE_URL}${endpoint}"\nAPI_KEY = "${apiKey}"\n\nheaders = {\n    "Authorization": f"Bearer {API_KEY}",\n    "Content-Type": "application/json"\n}\n`;
                if (method === 'POST') {
                    code += `payload = ${JSON.stringify(params, null, 4)}\n\nresponse = requests.post(API_URL, headers=headers, json=payload)\n`;
                } else {
                    code += `\nresponse = requests.get(API_URL, headers=headers)\n`;
                }
                code += `\nprint(response.json())`;
            } else if (lang === 'js') {
                langClass = 'language-javascript';
                code = `const API_URL = "${BASE_URL}${endpoint}";\nconst API_KEY = "${apiKey}";\n\nconst options = {\n  method: '${method}',\n  headers: {\n    'Authorization': \`Bearer \${API_KEY}\`,\n    'Content-Type': 'application/json'\n  }\n};\n`;
                if (method === 'POST') {
                    code += `options.body = JSON.stringify(${JSON.stringify(params, null, 2)});\n`;
                }
                code += `\nfetch(API_URL, options)\n  .then(res => res.json())\n  .then(console.log)\n  .catch(console.error);`;
            }
            
            const codeBlock = document.getElementById('codeBlock');
            codeBlock.className = langClass;
            codeBlock.innerHTML = Prism.highlight(code, Prism.languages[lang] || Prism.languages.clike, lang);
        }

        function renderConsoleForm() {
            const container = document.getElementById('console-form');
            const section = document.getElementById(currentSectionId);
            if (!section || !section.dataset.endpoint) {
                container.innerHTML = `<p style="color:var(--text-muted); text-align:center; margin-top: 40px;">Select an endpoint to start testing.</p>`;
                return;
            }
            
            let formHTML = '';
            if (currentSectionId === 'seraphina') {
                formHTML += createField('message', 'Message', 'textarea', 'Why is the sky blue?');
                formHTML += createField('history', 'History (JSON)', 'textarea', '[]');
            } else if (currentSectionId === 'bobby') {
                formHTML += createField('prompt', 'Prompt', 'textarea', 'Write a haiku about a robot.');
            } else if (currentSectionId === 'image-gen') {
                formHTML += createField('prompt', 'Prompt', 'textarea', 'A majestic lion with a cosmic mane, photorealistic.');
                formHTML += `<div class="field"><label>Engine</label><select id="console-use_minimax" class="input"><option value="false">Thena (Default)</option><option value="true">MiniMax</option></select></div>`;
            }
            // Add other endpoint forms here...
            
            formHTML += `<button class="execute-btn" onclick="executeApiCall()"><i class="fas fa-play"></i> Send Request</button>`;
            container.innerHTML = formHTML;
        }
        
        // --- API CALL LOGIC ---
        async function executeApiCall() {
            const apiKey = apiKeyInput.value;
            if (!apiKey) {
                alert('Please provide your API Key in the header.');
                return;
            }
            
            const section = document.getElementById(currentSectionId);
            const endpoint = section.dataset.endpoint;
            const method = section.dataset.method;
            
            const btn = document.querySelector('#console-form .execute-btn');
            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Sending...`;

            const responseArea = document.getElementById('response-area');
            const statusEl = document.getElementById('response-status');
            const timeEl = document.getElementById('response-time');
            const bodyEl = document.getElementById('response-body');
            const imgEl = document.getElementById('response-image-preview');

            imgEl.style.display = 'none';

            let body = {};
            const form = document.getElementById('console-form');
            const inputs = form.querySelectorAll('[id^="console-"]');
            inputs.forEach(input => {
                const key = input.id.replace('console-', '');
                let value = input.value;
                if(input.type === 'checkbox') value = input.checked;
                try {
                    // Try to parse JSON for fields that might be objects/arrays
                    if(value.trim().startsWith('[') || value.trim().startsWith('{')) {
                        body[key] = JSON.parse(value);
                    } else {
                       body[key] = value;
                    }
                } catch {
                    body[key] = value; // Assign as string if JSON parsing fails
                }
            });
            
            const startTime = performance.now();
            try {
                const response = await fetch(BASE_URL + endpoint, {
                    method: method,
                    headers: { 'Authorization': `Bearer ${apiKey}`, 'Content-Type': 'application/json' },
                    body: method === 'POST' ? JSON.stringify(body) : undefined
                });
                
                const responseData = await response.json();
                const endTime = performance.now();
                
                statusEl.textContent = `Status: ${response.status}`;
                statusEl.className = `response-status ${response.ok ? 'success' : 'error'}`;
                timeEl.textContent = `${Math.round(endTime - startTime)}ms`;
                
                bodyEl.innerHTML = Prism.highlight(JSON.stringify(responseData, null, 2), Prism.languages.json, 'json');

                if (responseData.image_b64) {
                    imgEl.src = `data:image/png;base64,${responseData.image_b64}`;
                    imgEl.style.display = 'block';
                }

            } catch (error) {
                const endTime = performance.now();
                statusEl.textContent = `Network Error`;
                statusEl.className = `response-status error`;
                timeEl.textContent = `${Math.round(endTime - startTime)}ms`;
                bodyEl.innerHTML = Prism.highlight(JSON.stringify({ error: error.message }, null, 2), Prism.languages.json, 'json');
            } finally {
                btn.disabled = false;
                btn.innerHTML = `<i class="fas fa-play"></i> Send Request`;
                responseArea.classList.add('visible');
            }
        }

        // --- HELPERS ---
        function getExampleParams(id) {
            switch (id) {
                case 'seraphina': return { message: "Explain the theory of relativity in simple terms.", history: [], stream: false };
                case 'bobby': return { prompt: "Write a short story about a lighthouse keeper." };
                case 'image-gen': return { prompt: "A majestic lion with a cosmic mane, photorealistic.", model: "v6", use_minimax: false };
                default: return {};
            }
        }

        function createField(id, label, type = 'text', placeholder = '') {
            const fieldId = `console-${id}`;
            if (type === 'textarea') {
                return `<div class="field"><label for="${fieldId}">${label}</label><textarea id="${fieldId}" class="input" placeholder="${placeholder}"></textarea></div>`;
            }
            return `<div class="field"><label for="${fieldId}">${label}</label><input type="${type}" id="${fieldId}" class="input" placeholder="${placeholder}"></div>`;
        }

        function copyCode() {
            const code = document.getElementById('codeBlock').textContent;
            navigator.clipboard.writeText(code);
            const btn = document.querySelector('.copy-btn');
            const originalIcon = btn.innerHTML;
            btn.innerHTML = `<i class="fas fa-check"></i>`;
            setTimeout(() => { btn.innerHTML = originalIcon; }, 1500);
        }
    </script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date()); 

  gtag('config', 'G-J1YTKP10ZX');
</script>
