<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Profile â€” Elvion AI CHAT Philadelphia AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Your Elvion profile. Continue conversations, upload files, and access saved links in a stunning blue environment.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --cyan: #00ffff;
      --blue: #0090ff;
      --card-bg: rgba(18,26,48,0.97);
      --border-glow: 0 0 11px var(--cyan), 0 0 24px var(--blue);
      --radius: 16px;
      --text: #e0e0e0;
      --muted: #b3b3b3;
      --white: #fff;
      --chat-bg: rgba(24,32,58,.95);
      --input-glow: 0 2px 10px #00ffff55;
    }
    html, body { height: 100%; margin: 0; }
    body {
      min-height: 100vh; font-family: 'Inter', sans-serif;
      background: radial-gradient(circle, #23233a 66%, #0a1128 100%);
      color: var(--text); display: flex; align-items: center; justify-content: center;
      position: relative;
    }
    #stars-container {
      position: fixed; width: 100vw; height: 100vh; top: 0; left: 0; z-index: 0; pointer-events: none;
    }
    .star { position: absolute; background: rgba(255,255,255,0.7); border-radius: 50%; opacity: 0; animation: twinkle 4.9s infinite linear;}
    @keyframes twinkle { 0%,100%{opacity:.18;} 52%{opacity:1;}}
    .profile-container {
      background: var(--card-bg);
      box-shadow: var(--border-glow);
      border-radius: var(--radius);
      padding: 32px 14px 22px 14px;
      max-width: 380px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1.14em;
      z-index: 2;
      margin-top: 30px;
      position: relative;
      animation: fadeIn .7s;
    }
    @keyframes fadeIn {from{opacity:0;transform:translateY(16px);} to{opacity:1;transform:translateY(0);}}
    .profile-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5em;
      margin-bottom: 6px;
    }
    .logo-img {
      width: 50px; height: 50px; border-radius: 50%;
      display:block; object-fit:cover; background:#fff; margin-bottom: 8px;
      animation: logoPulse 3.2s infinite alternate, floatLogo 3.3s infinite alternate;
    }
    @keyframes logoPulse {0%{box-shadow: 0 0 14px #00e2ff,0 0 26px #70fff7;}100%{box-shadow:0 0 11px #007c97,0 0 31px #00ceff60;}}
    @keyframes floatLogo {0%{transform:translateY(0);}100%{transform:translateY(-7px);}}
    .site-heading {
      font-family:'Orbitron',sans-serif;
      font-size:1.18em;
      font-weight:800;
      letter-spacing:.5px;
      background: linear-gradient(90deg, var(--cyan), #fff, var(--blue));
      background-size:200% auto;
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      animation: shine 4s linear infinite;
      text-shadow: var(--border-glow); text-align:center; margin-bottom:2px;
    }
    @keyframes shine {to{background-position:200% center;}}
    .profile-greet { color: #aee; font-size: .95em; text-align:center; }
    /* Menus */
    .menu-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      gap:12px;
    }
    .menu-btn {
      background: none; border:none;
      color: var(--cyan); font-size: 2em; cursor:pointer;
      padding:2px 10px;
      border-radius:12px;
      box-shadow: 0 1px 8px #00ffff19;
      transition: background .15s, color .14s;
    }
    .menu-btn:hover { background: var(--cyan); color: #222;}
    /* Modal Panel */
    .panel-bg {
      display: none;
      position: fixed; z-index: 200; top:0; left:0;
      width:100vw;height:100vh;background: rgba(0,0,0,0.56);
      align-items:flex-start;justify-content:flex-end;
    }
    .panel-bg.active { display: flex; }
    .side-panel {
      background: var(--chat-bg);
      width: 100vw;
      max-width: 360px;
      height: 100vh;
      box-shadow: -2px 0 32px #00ffffef;
      display: flex; flex-direction: column; padding: 0; position: relative; transition: transform .27s cubic-bezier(.61,-0.01,.48,1.01); overflow-y: auto;
      transform: translateX(390px);
    }
    .side-panel.active { transform: translateX(0);}
    .panel-header {
      display:flex;flex-direction:column;align-items:center;
      padding:34px 0 12px 0;background:none;
    }
    .panel-header img { width: 54px; height: 54px; border-radius:50%;object-fit:cover;}
    .panel-header .username { font-weight: 800;font-size: 1.1em;color:var(--cyan);margin-bottom:2px; }
    .panel-header .email { font-size: 0.97em; color: var(--muted);}
    .panel-links, .panel-chats {
      display: flex; flex-direction: column; gap: 1px; margin-bottom: 18px; margin-top: 9px; align-items: flex-start;
    }
    .panel-links a, .panel-chats a {
      color: var(--text);
      text-decoration: none; font-weight: 700; font-size: 1.12em;
      padding: 16px 28px 16px 28px; border-radius: 0 18px 18px 0;
      transition: background 0.13s, color 0.13s; margin-bottom:2px;
      background: #23233a;
    }
    .panel-links a:hover,.panel-chats a:hover {
      background: var(--cyan); color: #23233a;
    }
    /* Chat Section */
    .chat-area {
      background: var(--chat-bg);
      border-radius: var(--radius);
      box-shadow: 0 6px 20px rgba(0,0,0,0.18);
      padding: 0 0 15px 0;
      display: flex; flex-direction: column; align-items: center; position: relative;
      margin-bottom: 12px;margin-top:0px;
    }
    .chat-title-row {
      width: 100%; display: flex; align-items: center; justify-content: space-between;
      padding: 17px 17px 0 18px;margin-bottom:0; background: #19192a; border-radius:16px 16px 0 0;
      border-bottom: 1px solid rgba(0,255,255,.11);
      position: sticky; top: 0; z-index: 1;
    }
    .chat-title {
      font-size: 1.15em; font-weight: 800; letter-spacing: .8px;
      color: var(--cyan); text-shadow: 0 2px 14px #00ffff33;
      background: linear-gradient(90deg, var(--cyan), #fff, var(--blue));
      background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      animation: shine 3s linear infinite; font-family: 'Inter', Arial, sans-serif;
    }
    .chat-box {
      width: 96%; min-height: 110px; max-height: 350px; background: transparent;
      border-radius: 16px; padding: 13px 10px 10px 10px;
      margin-bottom: 10px; overflow-y: auto; display: flex; flex-direction: column; gap: 13px; transition: all .2s;
    }
    .chat-message { display: flex; align-items: flex-end; gap: 10px; margin-bottom: 1.5px; animation: fadeIn .3s }
    .chat-message.user { justify-content: flex-end;}
    .chat-message .msg {
      background: linear-gradient(90deg, #23233a 63%, #222 100%);
      color: #e0e0e0; padding: 8px 15px; border-radius: 15px 15px 5px 15px; max-width: 74%; font-size: 1.01em; word-break: break-word; font-family:'Inter', Arial, sans-serif; font-weight: 500;
      box-shadow: 0 1px 3px #0002; text-shadow: 0 1px 8px #0005;
    }
    .chat-message.user .msg { background: linear-gradient(90deg, #00ffff 64%, #0090ff 100%); color: #23233a; border-radius: 15px 15px 15px 5px; font-weight: 700;}
    .chat-message img, .chat-message video { max-width: 96px; max-height: 96px; border-radius: 10px; margin-top:3px; background:#fff; }
    .file-preview {max-width:100%;margin:10px 0;border-radius:12px;overflow:hidden;background:rgba(35,35,58,0.6);border:1px solid rgba(255,255,255,0.1);}
    .file-preview img, .file-preview video{max-width:100%;max-height:140px;display:block;margin:0 auto;}
    .file-preview .file-info{padding:7px;display:flex;align-items:center;font-size:.9em;color:var(--muted);}
    .file-preview .file-info i{margin-right:8px;}
    .chat-input-row {
      width: 96%; display: flex; gap: 7px; align-items: center;
      margin-top: 0; background: #19192a;
      border-radius: 12px; padding: 8px 9px;
      border: 1px solid rgba(0,255,255,.12);
      box-shadow: var(--input-glow);
    }
    .chat-input-row input[type="file"] { display: none; }
    .chat-input-row label {
      cursor: pointer; color: var(--cyan); font-size: 1.2em; padding: 0 6px; transition: color .14s;
    }
    .chat-input-row label:hover { color: var(--blue);}
    .chat-input-row input[type="text"] {
      flex: 1; padding: 9px 8px; border-radius: 14px; border: 1px solid #23233a; background: #23233a; color: #e0e0e0;
      font-size: 1em; outline: none; font-family: 'Inter', Arial, sans-serif; transition: border .13s, box-shadow .13s;
    }
    .chat-input-row input[type="text"]:focus { border: 1px solid var(--cyan); box-shadow: var(--input-glow);}
    .chat-input-row button {
      background: linear-gradient(90deg,#00ffff,#0090ff); color: #23233a; border: none; border-radius: 12px; padding: 7.5px 15px; font-size: 1.04em; font-weight: 700; cursor: pointer; box-shadow: 0 2px 11px #00ffff33; margin-left: 2px; transition: background .12s;
    }
    .chat-input-row button:hover { background: #0090ff; color: #fff;}
    @media (max-width: 430px) {
      .profile-container { padding:8px 1vw; }
      .site-heading {font-size:1em;}
      .logo-img {width:36px;height:36px;}
      .chat-area {padding:0;}
      .chat-title-row {padding:11px;}
      .chat-input-row {padding:4px;}
    }
    /* Other elements */
    .status-message { color: #ffd700; font-size: .97em; text-align:center; min-height:18px;}
  </style>
</head>
<body>
<div id="stars-container"></div>
<div class="profile-container">
  <div class="menu-bar">
    <button class="menu-btn" id="openChatMenu" title="Conversations"><i class="fa-solid fa-bars"></i></button>
    <button class="menu-btn" id="openLinkMenu" title="Links"><i class="fa-solid fa-link"></i></button>
  </div>
  <div class="profile-header">
    <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" class="logo-img" alt="Elvion AI logo">
    <div class="site-heading">Elvion AI</div>
    <div class="profile-greet" id="greetMsg">Welcome back!</div>
  </div>
  <section class="chat-area">
    <div class="chat-title-row">
      <div class="chat-title"><i class="fa-solid fa-bolt"></i> Elvion Chat</div>
    </div>
    <div class="chat-box" id="chatBox"></div>
    <div id="filePreview" class="file-preview" style="display:none;"></div>
    <form class="chat-input-row" id="chatForm" autocomplete="off">
      <label for="chatFile" title="Upload file, image, or video" id="fileLabel"><i class="fa-solid fa-paperclip"></i></label>
      <input type="file" id="chatFile" accept="image/*,video/*,application/pdf,.doc,.docx,.txt">
      <input type="text" id="chatInput" placeholder="Type a message..." autocomplete="off">
      <button type="submit"><i class="fa-solid fa-paper-plane"></i></button>
    </form>
    <div class="status-message" id="statusMsg"></div>
  </section>
</div>
<!-- Chat Menu Panel -->
<div class="panel-bg" id="chatMenuBg">
  <nav class="side-panel" id="chatMenu">
    <div class="panel-header">
      <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" alt="Profile photo">
      <div class="username" id="profileUser">User</div>
      <div class="email" id="profileEmail">Email@example.com</div>
    </div>
    <div class="panel-chats" id="panelChats">
      <!-- List of chats will be inserted here -->
    </div>
    <a href="#" id="logoutBtn" style="color:#00ffff;"><i class="fa-solid fa-sign-out"></i> Logout</a>
  </nav>
</div>
<!-- Link Menu Panel -->
<div class="panel-bg" id="linkMenuBg">
  <nav class="side-panel" id="linkMenu">
    <div class="panel-header">
      <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" alt="Elvion logo">
      <div class="username">Elvion AI Links</div>
    </div>
    <div class="panel-links">
      <a href="index.html"><i class="fa-solid fa-home"></i> Home</a>
      <a href="about.html"><i class="fa-solid fa-circle-info"></i> About</a>
      <a href="privacy.html"><i class="fa-solid fa-shield-halved"></i> Privacy Policy</a>
      <a href="terms.html"><i class="fa-solid fa-file-contract"></i> Terms</a>
      <a href="https://t.me/writingurubot" target="_blank"><i class="fab fa-telegram"></i> Telegram Bot</a>
      <!-- Add more links as needed -->
    </div>
  </nav>
</div>
<script type="module">
  // Animated star background
  document.addEventListener('DOMContentLoaded',()=>{
    const starsContainer = document.getElementById('stars-container');
    const numStars = 52, minSize=1, maxSize=2.5;
    for(let i=0; i<numStars; i++) {
      const star=document.createElement('div');
      star.className='star';
      const size = Math.random()*(maxSize-minSize)+minSize;
      star.style.width=size+'px';
      star.style.height=size+'px';
      star.style.left=Math.random()*100+'%';
      star.style.top=Math.random()*100+'%';
      star.style.animationDelay=(Math.random()*3.6)+'s';
      star.style.animationDuration=(2.7+Math.random()*1.8)+'s';
      starsContainer.appendChild(star);
    }
  });

  // Modal panel controls
  const chatMenuBg = document.getElementById('chatMenuBg');
  const chatMenu = document.getElementById('chatMenu');
  document.getElementById('openChatMenu').onclick = () => {
    chatMenuBg.classList.add('active');
    setTimeout(() => chatMenu.classList.add('active'), 30);
  };
  chatMenuBg.onclick = (e) => {
    if (e.target === chatMenuBg) {
      chatMenu.classList.remove('active');
      setTimeout(() => chatMenuBg.classList.remove('active'), 240);
    }
  };
  document.getElementById('logoutBtn').onclick = () => { window.location.href = 'signup-login.html'; };

  // Link menu controls
  const linkMenuBg = document.getElementById('linkMenuBg');
  const linkMenu = document.getElementById('linkMenu');
  document.getElementById('openLinkMenu').onclick = () => {
    linkMenuBg.classList.add('active');
    setTimeout(() => linkMenu.classList.add('active'), 30);
  };
  linkMenuBg.onclick = (e) => {
    if (e.target === linkMenuBg) {
      linkMenu.classList.remove('active');
      setTimeout(() => linkMenuBg.classList.remove('active'), 240);
    }
  };

  // Firebase Auth Logic
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
    authDomain: "elvionai.firebaseapp.com",
    projectId: "elvionai",
    storageBucket: "elvionai.firebasestorage.app",
    messagingSenderId: "161078300830",
    appId: "1:161078300830:web:f460df8591704eb0e96b8f"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Auth state check and profile display
  onAuthStateChanged(auth, async (user) => {
    if (!user) window.location.href = "signup-login.html";
    else {
      document.getElementById("greetMsg").textContent = "Welcome, " + (user.displayName || user.email.split('@')[0]) + "!";
      document.getElementById("profileUser").textContent = user.displayName || "User";
      document.getElementById("profileEmail").textContent = user.email;
    }
  });

  // Basic chat (local, fake for demo â€” replace with your backend for real AI)
  let chats = JSON.parse(localStorage.getItem("elvion_chats") || "[]");
  function renderChats() {
    const panelChats = document.getElementById("panelChats");
    panelChats.innerHTML = "";
    chats.forEach((chat, idx) => {
      const a = document.createElement("a");
      a.textContent = chat.name;
      a.href = "#";
      a.onclick = () => { loadChat(idx); chatMenuBg.classList.remove('active'); chatMenu.classList.remove('active'); };
      panelChats.appendChild(a);
    });
  }
  function saveChats() { localStorage.setItem("elvion_chats", JSON.stringify(chats)); }
  function loadChat(idx) {
    renderChatBox(chats[idx] ? chats[idx].history : []);
  }
  function renderChatBox(messages) {
    const chatBox = document.getElementById("chatBox");
    chatBox.innerHTML = "";
    messages.forEach(msg => {
      const div = document.createElement('div');
      div.className = "chat-message " + (msg.role === "user" ? "user" : "ai");
      div.innerHTML = `<div class="msg">${msg.text}</div>`;
      chatBox.appendChild(div);
    });
    chatBox.scrollTop = chatBox.scrollHeight;
  }
  // Chat input logic (local demoâ€”you'd call your backend here in production)
  document.getElementById("chatForm").onsubmit = function(e) {
    e.preventDefault();
    const chatInput = document.getElementById("chatInput");
    const file = document.getElementById("chatFile").files[0];
    const msgText = chatInput.value.trim();
    if (!msgText && !file) return;
    const newMsg = { role: "user", text: msgText };
    let currentChatIdx = chats.length-1;
    if (!chats.length) {
      chats.push({ name: "Chat " + (chats.length+1), history: [] });
      currentChatIdx = 0;
    }
    chats[currentChatIdx].history.push(newMsg);
    renderChatBox(chats[currentChatIdx].history);
    chatInput.value = "";
    document.getElementById("filePreview").style.display = "none";
    document.getElementById("filePreview").innerHTML = "";
    // AI reply demo (replace with backend logic)
    setTimeout(() => {
      const aiMsg = { role: "ai", text: "ðŸ¤– [Demo] Elvion AI read: " + msgText };
      chats[currentChatIdx].history.push(aiMsg);
      renderChatBox(chats[currentChatIdx].history);
      saveChats();
    }, 800);
    saveChats();
    renderChats();
  };
  // File preview (local)
  document.getElementById("chatFile").onchange = function() {
    const file = this.files[0];
    const filePreview = document.getElementById("filePreview");
    if (!file) { filePreview.style.display = "none"; filePreview.innerHTML = ""; return; }
    filePreview.style.display = 'block';
    if (file.type.startsWith("image/")) {
      const reader = new FileReader();
      reader.onload = e => { filePreview.innerHTML = `<img src="${e.target.result}">`; };
      reader.readAsDataURL(file);
    } else if (file.type.startsWith("video/")) {
      const reader = new FileReader();
      reader.onload = e => { filePreview.innerHTML = `<video src="${e.target.result}" controls></video>`; };
      reader.readAsDataURL(file);
    } else {
      filePreview.innerHTML = `<div class="file-info"><i class="fa-solid fa-file"></i> ${file.name}</div>`;
    }
  };
  // Initial render
  renderChats();
  loadChat(chats.length-1);
</script>
</body>
</html>
