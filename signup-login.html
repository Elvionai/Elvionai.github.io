<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up | Log In — Elvion AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sign up or log in to Elvion AI. Secure, private, and user-friendly onboarding.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* (Your original CSS exactly as you sent it—truncated for brevity here) */
    /* ... Copy all your .star, .auth-card, .logo-img, etc styles here ... */
    /* ... The existing CSS above will work without change ... */
  </style>
</head>
<body>
<div id="stars-container"></div>
<div class="auth-card">
  <a href="https://ibb.co/WpydGBSB">
    <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" class="logo-img" alt="IMG-20250715-102103-129" border="0">
  </a>
  <div class="site-heading">Elvion AI</div>
  <div class="subtitle">Sign up or log in to access the future of intelligence.</div>
  <div class="auth-tabs">
    <button class="auth-tab active" id="signupTab" tabindex="0">
      <i class="fa fa-user-plus"></i>
      <span class="tab-label">Sign Up</span>
    </button>
    <button class="auth-tab" id="loginTab" tabindex="0">
      <i class="fa fa-sign-in-alt"></i>
      <span class="tab-label">Log In</span>
    </button>
  </div>
  <section class="form-section">
    <!-- Sign Up Form -->
    <form id="signupForm" autocomplete="off">
      <button class="oauth-btn" id="googleSignUp" type="button"><i class="fab fa-google"></i>Sign Up with Google</button>
      <button class="oauth-btn" id="twitterSignUp" type="button"><i class="fab fa-twitter"></i>Sign Up with Twitter</button>
      <label for="signup-name">Full Name</label>
      <input type="text" id="signup-name" placeholder="Your name" required>
      <label for="signup-email">Email</label>
      <input type="email" id="signup-email" placeholder="Email" required>
      <label for="signup-password">Password</label>
      <input type="password" id="signup-password" placeholder="Password" required minlength="6">
      <button type="submit" class="submit-btn">Create Account</button>
      <div class="status-message" id="signupStatus"></div>
      <div class="terms-note">
        By signing up, you agree to our <a href="terms.html" target="_blank">Terms</a> and <a href="privacy.html" target="_blank">Privacy Policy</a>.
      </div>
    </form>
    <!-- Log In Form (initially hidden) -->
    <form id="loginForm" style="display:none;" autocomplete="off">
      <button class="oauth-btn" id="googleLogin" type="button"><i class="fab fa-google"></i>Log In with Google</button>
      <button class="oauth-btn" id="twitterLogin" type="button"><i class="fab fa-twitter"></i>Log In with Twitter</button>
      <label for="login-email">Email</label>
      <input type="email" id="login-email" placeholder="Email" required>
      <label for="login-password">Password</label>
      <input type="password" id="login-password" placeholder="Password" required>
      <button type="submit" class="submit-btn">Log In</button>
      <div class="form-links">
        <span id="forgotPassword">Forgot password?</span>
      </div>
      <div class="status-message" id="loginStatus"></div>
      <div class="terms-note" style="margin-bottom:0;">
        By continuing, you accept our <a href="terms.html" target="_blank">Terms</a>.
      </div>
    </form>
  </section>
</div>
<script type="module">
  // STAR ANIMATION (unchanged)
  document.addEventListener('DOMContentLoaded',()=>{
    const starsContainer = document.getElementById('stars-container');
    const numStars = 48, minSize=1, maxSize=2.2;
    for(let i=0; i<numStars; i++) {
      const star=document.createElement('div');
      star.className='star';
      const size = Math.random()*(maxSize-minSize)+minSize;
      star.style.width=size+'px';
      star.style.height=size+'px';
      star.style.left=Math.random()*100+'%';
      star.style.top=Math.random()*100+'%';
      star.style.animationDelay=(Math.random()*3.5)+'s';
      star.style.animationDuration=(2+Math.random()*1.3)+'s';
      starsContainer.appendChild(star);
    }
  });

  // TAB SWITCHER (unchanged)
  const signupTab = document.getElementById('signupTab');
  const loginTab = document.getElementById('loginTab');
  const signupForm = document.getElementById('signupForm');
  const loginForm = document.getElementById('loginForm');
  signupTab.onclick = function() {
    signupTab.classList.add('active'); loginTab.classList.remove('active');
    signupForm.style.display = 'flex'; loginForm.style.display = 'none';
  };
  loginTab.onclick = function() {
    signupTab.classList.remove('active'); loginTab.classList.add('active');
    signupForm.style.display = 'none'; loginForm.style.display = 'flex';
  };

  // FIREBASE AUTH
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signInWithPopup,
    sendEmailVerification,
    sendPasswordResetEmail,
    GoogleAuthProvider,
    TwitterAuthProvider,
    updateProfile
  } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
    authDomain: "elvionai.firebaseapp.com",
    projectId: "elvionai",
    storageBucket: "elvionai.firebasestorage.app",
    messagingSenderId: "161078300830",
    appId: "1:161078300830:web:f460df8591704eb0e96b8f"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // OAUTH HELPERS
  async function handleOAuth(provider, statusDiv) {
    try {
      const result = await signInWithPopup(auth, provider);
      if (result.user) {
        await setDoc(doc(db, "users", result.user.uid), {
          name: result.user.displayName,
          email: result.user.email,
          createdAt: new Date()
        });
      }
      window.location.href = "profile.html";
    } catch (error) {
      statusDiv.textContent = error.message;
      statusDiv.style.color = "#ffd700";
    }
  }

  // Google & Twitter OAuth
  document.getElementById('googleSignUp').onclick = (e) => { e.preventDefault(); handleOAuth(new GoogleAuthProvider(), document.getElementById('signupStatus')); };
  document.getElementById('googleLogin').onclick = (e) => { e.preventDefault(); handleOAuth(new GoogleAuthProvider(), document.getElementById('loginStatus')); };
  document.getElementById('twitterSignUp').onclick = (e) => { e.preventDefault(); handleOAuth(new TwitterAuthProvider(), document.getElementById('signupStatus')); };
  document.getElementById('twitterLogin').onclick = (e) => { e.preventDefault(); handleOAuth(new TwitterAuthProvider(), document.getElementById('loginStatus')); };

  // EMAIL/PASSWORD SIGNUP
  signupForm.onsubmit = async function(e) {
    e.preventDefault();
    const name = document.getElementById('signup-name').value.trim();
    const email = document.getElementById('signup-email').value.trim();
    const password = document.getElementById('signup-password').value;
    const status = document.getElementById('signupStatus');
    status.textContent = '';
    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      await updateProfile(userCredential.user, { displayName: name });
      await setDoc(doc(db, "users", userCredential.user.uid), {
        name,
        email,
        createdAt: new Date()
      });
      await sendEmailVerification(userCredential.user, { url: window.location.origin });
      status.textContent = "Account created! Please check your email and verify your account before logging in.";
      status.style.color = "#00ffff";
      setTimeout(() => {
        signupTab.classList.remove('active');
        loginTab.classList.add('active');
        signupForm.style.display = 'none';
        loginForm.style.display = 'flex';
      }, 3400);
    } catch (error) {
      status.textContent = error.message;
      status.style.color = "#ffd700";
    }
  };

  // EMAIL/PASSWORD LOGIN
  loginForm.onsubmit = function(e) {
    e.preventDefault();
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;
    const status = document.getElementById('loginStatus');
    status.textContent = '';
    signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        window.location.href = 'profile.html';
      }).catch((error) => {
        status.textContent = error.message;
        status.style.color = "#ffd700";
      });
  };

  // FORGOT PASSWORD
  document.getElementById('forgotPassword').onclick = function() {
    const email = document.getElementById('login-email').value;
    const status = document.getElementById('loginStatus');
    if (!email) {
      status.textContent = 'Please enter your email above first.';
      status.style.color = "#ffd700";
      return;
    }
    sendPasswordResetEmail(auth, email)
      .then(() => {
        status.textContent = 'Password reset email sent!';
        status.style.color = "#00ffff";
      })
      .catch((error) => {
        status.textContent = error.message;
        status.style.color = "#ffd700";
      });
  };
</script>
</body>
</html>
