<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Explorer | Elvion AI</title>
    <meta name="description" content="Live test and integrate Elvion AI's powerful conversational and generative models into your applications.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Orbitron:wght@700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --cyan: #00ffff; --blue: #0090ff; --magenta: #ff00ff; --red: #ff4d4d; --green: #28a745; --orange: #ffae42;
            --bg-primary: #0a1128; --bg-secondary: #10142c; --card-bg: #121a30;
            --border-color: rgba(0, 255, 255, 0.2); --border-glow: 0 0 12px rgba(0, 255, 255, 0.5);
            --radius: 8px; --text-primary: #e0e0e0; --text-secondary: #a8b2d1;
            --header-font: 'Orbitron', sans-serif; --body-font: 'Inter', sans-serif; --code-font: 'Fira Code', monospace;
        }
        *, *::before, *::after { box-sizing: border-box; }
        body { font-family: var(--body-font); background-color: var(--bg-primary); color: var(--text-primary); margin: 0; line-height: 1.7; }

        /* --- Main Header --- */
        .main-header {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .header-logo img { width: 36px; height: 36px; border-radius: 50%; }
        .header-logo h1 { font-family: var(--header-font); font-size: 1.4em; margin: 0; color: #fff; }
        .header-nav a { color: var(--text-secondary); text-decoration: none; font-weight: 500; margin-left: 25px; transition: color 0.2s; }
        .header-nav a:hover { color: var(--cyan); }
        .api-status { display: flex; align-items: center; gap: 8px; font-size: 0.9em; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; background-color: var(--orange); animation: pulse 2s infinite; }
        .status-dot.online { background-color: var(--green); animation: none; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 174, 66, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255, 174, 66, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 174, 66, 0); } }

        .container { display: flex; max-width: 1300px; margin: 0 auto; }
        
        /* --- Left & Right Sidebars --- */
        .sidebar-nav { position: sticky; top: 71px; height: calc(100vh - 71px); width: 240px; flex-shrink: 0; overflow-y: auto; border-right: 1px solid var(--border-color); padding: 30px 15px; }
        .code-examples { position: sticky; top: 71px; height: calc(100vh - 71px); width: 420px; flex-shrink: 0; background-color: #0d1117; padding: 0; overflow-y: auto; }
        
        .nav-section-title { font-family: var(--header-font); text-transform: uppercase; font-size: 0.8em; letter-spacing: 1px; color: var(--text-secondary); margin: 25px 0 10px 15px; }
        .sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-nav li a { display: block; padding: 8px 15px; color: var(--text-secondary); text-decoration: none; border-radius: 6px; font-size: 0.95em; font-weight: 500; transition: all 0.2s ease; position: relative; }
        .sidebar-nav li a:hover { color: #fff; background-color: rgba(0, 255, 255, 0.1); }
        .sidebar-nav li a.active { color: var(--cyan); background-color: rgba(0, 255, 255, 0.1); }
        
        /* --- Main Content --- */
        main { width: 100%; padding: 40px 30px; }
        section { margin-bottom: 50px; border-bottom: 1px solid var(--border-color); padding-bottom: 30px; }
        h2 { font-family: var(--header-font); font-size: 2em; color: #fff; margin: 0 0 15px 0; }
        h3 { font-family: var(--header-font); font-size: 1.3em; color: var(--cyan); margin-top: 30px; margin-bottom: 15px; }
        p { color: var(--text-secondary); margin: 0 0 15px 0; }
        code { font-family: var(--code-font); background-color: rgba(0, 255, 255, 0.1); color: var(--cyan); padding: 3px 6px; border-radius: 4px; font-size: 0.9em; }
        
        /* Interactive "Try It Out" Section */
        .api-tester { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--radius); margin-top: 25px; }
        .api-tester-header { padding: 15px; border-bottom: 1px solid var(--border-color); font-family: var(--header-font); font-size: 1.1em; }
        .api-tester-body { padding: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-secondary); }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 6px;
            padding: 10px; color: var(--text-primary); font-family: var(--code-font); font-size: 0.95em;
        }
        .form-group textarea { min-height: 80px; resize: vertical; }
        .submit-btn { /* (From previous code) */ }
        .api-response { margin-top: 20px; }
        .api-response pre { background-color: #0d1117; padding: 15px; border-radius: var(--radius); max-height: 300px; overflow-y: auto; }
        .api-response code { background: none; color: #fff; }

        /* Code Examples Styles */
        .code-header { /* (From previous code) */ }
        .lang-tab { /* (From previous code) */ }
        pre { /* (From previous code) */ }
        .copy-code-btn { /* (From previous code) */ }
        /* Syntax Highlighting Tokens */

        @media (max-width: 1200px) { .code-examples { display: none; } }
        @media (max-width: 768px) { .sidebar-nav { display: none; } .main-header { flex-direction: column; gap: 15px; padding: 15px; } main { padding: 30px 15px; } }
    </style>
</head>
<body>
    <header class="main-header">
        <a href="index.html" class="header-logo">
            <img src="https://i.ibb.co/YTkKPfvf/IMG-20250715-102103-129.jpg" alt="Elvion AI Logo">
            <h1>Elvion AI</h1>
        </a>
        <div class="header-nav">
            <div class="api-status">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Checking API Status...</span>
            </div>
            <a href="index.html">Home</a>
            <a href="developer-dashboard.html">Dashboard</a>
        </div>
    </header>

    <div class="container">
        <nav class="sidebar-nav">
            <ul>
                <li class="nav-section-title">Getting Started</li>
                <li><a href="#introduction" class="nav-link active">Introduction</a></li>
                <li><a href="#authentication" class="nav-link">Authentication</a></li>
                <li class="nav-section-title">API Endpoints</li>
                <li><a href="#endpoint-bobby" class="nav-link">Bobby Chat</a></li>
                <li><a href="#endpoint-seraphina" class="nav-link">Seraphina Chat</a></li>
                <li><a href="#endpoint-image" class="nav-link">Image Generation</a></li>
            </ul>
        </nav>

        <main>
            <section id="introduction">
                <h2>API Explorer</h2>
                <p>Welcome to the Elvion AI Developer Hub. This is an interactive environment where you can explore, test, and integrate our powerful AI models directly from your browser. Get your API key, choose an endpoint, and make your first live request in minutes.</p>
            </section>

            <section id="authentication">
                <h2>Authentication</h2>
                <p>Your API key is required for all requests. Enter it below to enable the "Try It Out" feature for all endpoints. You can generate and manage your keys from the <a href="developer-dashboard.html" style="color:var(--cyan);">Developer Dashboard</a>.</p>
                <div class="form-group">
                    <label for="api-key-input"><i class="fas fa-key"></i> Your API Key</label>
                    <input type="password" id="api-key-input" placeholder="elv_sec_...">
                </div>
            </section>
            
            <section id="endpoint-bobby">
                <h2>Bobby Chat</h2>
                <p>A fast and cost-effective conversational model for general-purpose tasks. Cost: 2 Credits/call.</p>
                <div class="api-tester">
                    <div class="api-tester-header">Try It Out</div>
                    <div class="api-tester-body">
                        <div class="form-group">
                            <label for="bobby-prompt">Prompt</label>
                            <textarea id="bobby-prompt">Tell me a short, futuristic story about a programmer and their AI companion.</textarea>
                        </div>
                        <button class="submit-btn" data-endpoint="bobby">Send API Request</button>
                        <div class="api-response">
                            <h3>Response</h3>
                            <pre id="bobby-response"><code>Awaiting request...</code></pre>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="endpoint-seraphina">
                <h2>Seraphina Chat</h2>
                <p>A premium, web-grounded research assistant for accurate, up-to-date answers. Cost: 5 Credits/call.</p>
                <div class="api-tester">
                    <div class="api-tester-header">Try It Out</div>
                    <div class="api-tester-body">
                        <div class="form-group">
                            <label for="seraphina-prompt">Message</label>
                            <textarea id="seraphina-prompt">What are the latest developments in generative AI models as of this week?</textarea>
                        </div>
                        <button class="submit-btn" data-endpoint="seraphina">Send API Request</button>
                        <div class="api-response">
                            <h3>Response</h3>
                            <pre id="seraphina-response"><code>Awaiting request...</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="endpoint-image">
                <h2>Image Generation</h2>
                <p>Create high-quality images from text. Cost: 15 Credits/call.</p>
                <div class="api-tester">
                    <div class="api-tester-header">Try It Out</div>
                    <div class="api-tester-body">
                        <div class="form-group">
                            <label for="image-prompt">Prompt</label>
                            <textarea id="image-prompt">A cyberpunk cityscape at night, neon signs reflecting on wet streets, a lone figure in a trench coat, photorealistic, cinematic lighting.</textarea>
                        </div>
                         <div class="form-group">
                            <label for="image-model">Model</label>
                            <select id="image-model">
                                <option value="v6">Thena v6 (General)</option>
                                <option value="photoreal">Thena Photoreal</option>
                                <option value="anime_core">Thena Anime Core</option>
                                <option value="minimax">MiniMax Creative</option>
                            </select>
                        </div>
                        <button class="submit-btn" data-endpoint="image">Send API Request</button>
                        <div class="api-response">
                            <h3>Response</h3>
                            <pre id="image-response"><code>Awaiting request... (Response will show image data)</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <aside class="code-examples">
            <!-- Code examples will be dynamically loaded here by JS -->
        </aside>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Global Config ---
    const API_BASE_URL = "https://web-production-9a18.up.railway.app";
    const apiKeyInput = document.getElementById('api-key-input');
    
    // --- API Status Check ---
    const statusDot = document.getElementById('status-dot');
    const statusText = document.getElementById('status-text');
    fetch(API_BASE_URL)
        .then(res => {
            if (res.ok) {
                statusDot.classList.add('online');
                statusText.textContent = 'API Online';
            } else { throw new Error(); }
        })
        .catch(() => { statusText.textContent = 'API Unreachable'; });

    // --- Scroll Spy & Nav ---
    const sections = document.querySelectorAll('main section');
    const navLinks = document.querySelectorAll('.sidebar-nav .nav-link');
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                });
            }
        });
    }, { rootMargin: '-40% 0px -60% 0px' });
    sections.forEach(section => observer.observe(section));

    // --- Interactive API Tester ---
    const allTesterButtons = document.querySelectorAll('.submit-btn[data-endpoint]');
    allTesterButtons.forEach(button => {
        button.addEventListener('click', async () => {
            const endpoint = button.dataset.endpoint;
            const apiKey = apiKeyInput.value;
            const responseElement = document.getElementById(`${endpoint}-response`);

            if (!apiKey) {
                alert('Please enter your API Key in the Authentication section first.');
                apiKeyInput.focus();
                return;
            }

            let body = {};
            let path = '';

            try {
                switch (endpoint) {
                    case 'bobby':
                        path = '/api/developer/bobby/chat';
                        body = { prompt: document.getElementById('bobby-prompt').value };
                        break;
                    case 'seraphina':
                        path = '/api/developer/seraphina/chat';
                        body = { message: document.getElementById('seraphina-prompt').value, stream: false }; // Force non-stream for simple display
                        break;
                    case 'image':
                        path = '/api/developer/generate-image';
                        const model = document.getElementById('image-model').value;
                        body = {
                            prompt: document.getElementById('image-prompt').value,
                            model: model === 'minimax' ? 'v6' : model,
                            use_minimax: model === 'minimax'
                        };
                        break;
                }

                responseElement.innerHTML = '<code>Sending request...</code>';
                button.disabled = true;

                const response = await fetch(API_BASE_URL + path, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });
                
                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.detail || `HTTP Error ${response.status}`);
                }
                
                // Truncate long image data for display
                if(data.image_b64) {
                    data.image_b64 = data.image_b64.substring(0, 100) + '... [TRUNCATED]';
                }

                responseElement.innerHTML = `<code>${JSON.stringify(data, null, 2)}</code>`;

            } catch (error) {
                responseElement.innerHTML = `<code style="color:var(--red);">${error}</code>`;
            } finally {
                button.disabled = false;
            }
        });
    });

    // --- Star Animation ---
    const starsContainer = document.createElement('div');
    starsContainer.id = 'stars-container';
    document.body.prepend(starsContainer);
    for(let i=0; i < 80; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        const size = Math.random() * 2 + 1;
        star.style.width = `${size}px`; star.style.height = `${size}px`;
        star.style.left = `${Math.random() * 100}%`; star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 4}s`;
        star.style.animationDuration = `${Math.random() * 2 + 3}s`;
        starsContainer.appendChild(star);
    }
});
</script>
</body>
</html>
