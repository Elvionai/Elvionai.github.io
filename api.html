<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elvion AI | Developer API Reference</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- PrismJS for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <style>
        :root {
            --bg-primary: #050509;
            --bg-secondary: #0D0D16;
            --bg-tertiary: #1A1A2E;
            --bg-interactive: #000000;
            --border-color: #2A2A4A;
            --text-primary: #F0F2F5;
            --text-secondary: #A0AEC0;
            --accent-purple: #9F7AEA;
            --accent-pink: #ED64A6;
            --accent-cyan: #4FD1C5;
            --font-main: 'Inter', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
            --shadow-glow: 0 0 20px rgba(159, 122, 234, 0.3);
            --shadow-hard: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        /* --- Base & Layout --- */
        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            margin: 0;
            font-family: var(--font-main);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: grid;
            grid-template-columns: 260px 1fr minmax(450px, 40%);
            grid-template-rows: 100vh;
        }

        /* --- Scrollbar Styling --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: var(--border-color); border-radius: 6px; }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--accent-purple); }

        /* --- 1. Sidebar (Navigation) --- */
        .sidebar {
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 24px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 0 24px 24px;
            border-bottom: 1px solid var(--border-color);
        }
        .sidebar-header h1 {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
            color: white;
            text-shadow: 0 0 10px var(--accent-purple);
        }
        .sidebar-header h1 span { color: var(--accent-purple); }

        .nav-group { padding: 16px; }
        .nav-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: 12px;
        }
        .nav-link {
            display: block;
            text-decoration: none;
            padding: 10px 12px;
            margin-bottom: 4px;
            border-radius: 6px;
            font-size: 14px;
            color: var(--text-secondary);
            transition: all 0.2s ease-in-out;
            border-left: 3px solid transparent;
        }
        .nav-link:hover {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }
        .nav-link.active {
            background-color: rgba(159, 122, 234, 0.1);
            color: var(--accent-purple);
            border-left-color: var(--accent-purple);
            font-weight: 500;
        }

        /* --- 2. Main Content (Documentation) --- */
        .content-area {
            padding: 48px 64px;
            overflow-y: auto;
        }
        .endpoint-section {
            margin-bottom: 96px;
            padding-top: 24px;
            scroll-margin-top: 24px;
        }
        
        h2 {
            font-size: 32px;
            font-weight: 700;
            margin: 0 0 16px 0;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }
        h3 {
            font-size: 24px;
            font-weight: 600;
            margin: 48px 0 16px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .method-badge {
            font-family: var(--font-code);
            font-size: 14px;
            font-weight: 500;
            padding: 4px 10px;
            border-radius: 6px;
        }
        .method-badge.POST { background-color: var(--accent-purple); color: white; }
        .method-badge.GET { background-color: var(--accent-cyan); color: white; }
        
        p, li { font-size: 16px; line-height: 1.7; color: var(--text-secondary); }
        code {
            font-family: var(--font-code);
            background-color: var(--bg-tertiary);
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: var(--accent-pink);
        }
        a { color: var(--accent-cyan); text-decoration: none; }
        
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 24px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-hard);
        }
        .param-table th, .param-table td { text-align: left; padding: 14px 16px; border-bottom: 1px solid var(--border-color); }
        .param-table th { background-color: var(--bg-tertiary); font-weight: 500; color: var(--text-secondary); }
        .param-name { font-family: var(--font-code); color: var(--accent-purple); }
        .required-star { color: var(--accent-pink); }
        .param-type { font-family: var(--font-code); font-size: 12px; color: var(--accent-cyan); }
        
        /* --- 3. Interactive Panel --- */
        .interactive-panel {
            background-color: var(--bg-interactive);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            padding: 16px 24px;
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        .api-key-group label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .api-key-input {
            width: 100%;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            padding: 10px 12px;
            border-radius: 6px;
            color: var(--text-primary);
            font-family: var(--font-code);
            font-size: 13px;
        }
        .api-key-input:focus { outline: none; border-color: var(--accent-purple); box-shadow: var(--shadow-glow); }
        
        .panel-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .panel-section { display: none; }
        .panel-section.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h4 { font-size: 16px; margin: 0 0 16px 0; font-weight: 600; letter-spacing: 0.5px; }

        .code-selector { display: flex; align-items: center; margin-bottom: 16px; gap: 12px; }
        .code-selector select {
            flex-grow: 1;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 6px;
            font-family: var(--font-main);
        }
        .copy-button {
            padding: 8px 14px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .copy-button:hover { background-color: var(--accent-purple); color: white; }
        
        .code-container pre { margin: 0; border: 1px solid var(--border-color); border-radius: 8px; }
        
        .console-form .form-group { margin-bottom: 16px; }
        .console-form label { display: block; font-size: 13px; color: var(--text-secondary); margin-bottom: 6px; }
        .console-form .form-input {
            width: 100%;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 10px;
            border-radius: 6px;
        }
        .console-form textarea.form-input { min-height: 100px; resize: vertical; }
        
        .execute-button {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: none;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-pink));
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            margin-top: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--shadow-glow);
            transition: transform 0.1s ease;
        }
        .execute-button:hover { filter: brightness(1.1); }
        .execute-button:active { transform: scale(0.98); }
        .execute-button:disabled { filter: grayscale(50%); cursor: not-allowed; }

        .response-area { margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color); display: none; }
        .response-area.visible { display: block; }
        .response-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .response-status { font-family: var(--font-code); font-size: 14px; }
        .status-success { color: var(--accent-cyan); }
        .status-error { color: var(--accent-pink); }
        .response-image { max-width: 100%; border-radius: 8px; margin-bottom: 16px; border: 1px solid var(--border-color); }
        .response-url { font-size: 12px; word-break: break-all; margin-bottom: 16px; }
        .response-url a { color: var(--accent-purple); }

    </style>
</head>
<body>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h1>Elvion<span>AI</span></h1>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-group">
                <div class="nav-label">Getting Started</div>
                <a href="#introduction" class="nav-link active">Introduction</a>
                <a href="#authentication" class="nav-link">Authentication</a>
            </div>
            <div class="nav-group">
                <div class="nav-label">AI Models</div>
                <a href="#seraphina-chat" class="nav-link">Seraphina Chat</a>
                <a href="#bobby-chat" class="nav-link">Bobby Chat</a>
            </div>
            <div class="nav-group">
                <div class="nav-label">Creative Tools</div>
                <a href="#generate-image" class="nav-link">Generate Image</a>
                <a href="#create-comic" class="nav-link">Create Comic</a>
                <a href="#generate-music" class="nav-link">Generate Music</a>
                <a href="#generate-video" class="nav-link">Generate Video</a>
            </div>
            <div class="nav-group">
                <div class="nav-label">Utility</div>
                <a href="#text-to-speech" class="nav-link">Text to Speech</a>
                <a href="#remove-background" class="nav-link">Remove Background</a>
            </div>
        </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content-area">
        <section id="introduction" class="endpoint-section">
            <h2>Developer API Reference</h2>
            <p>Welcome to the Elvion AI Developer API, a comprehensive toolkit for integrating state-of-the-art generative AI into your applications. This interactive documentation allows you to explore, understand, and test every endpoint live.</p>
            <h3>Base URL</h3>
            <p>All API requests should be made to the following base URL:</p>
            <code>https://web-production-9a18.up.railway.app</code>
        </section>

        <section id="authentication" class="endpoint-section">
            <h2>Authentication</h2>
            <p>The Developer API endpoints are protected and require a valid API key. You must pass your key in the `Authorization` header of each request using the `Bearer` schema.</p>
            <code>Authorization: Bearer YOUR_API_KEY</code>
            <p>You can generate and manage your keys, and top up your credit balance, from the <a href="https://elvionai.com.ng/developer-login.html" target="_blank">Elvion AI Developer Dashboard</a>.</p>
        </section>

        <section id="seraphina-chat" class="endpoint-section">
            <h3><span class="method-badge POST">POST</span> Seraphina Chat</h3>
            <p>Access Seraphina, our premier reasoning and research model. Powered by Perplexity, it excels at providing detailed, factual, and cited answers for complex queries. Ideal for knowledge-based applications, research tools, and professional content creation.</p>
            <table class="param-table">
                <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><span class="param-name">message</span> <span class="required-star">*</span></td><td><span class="param-type">string</span></td><td>The primary user query or instruction.</td></tr>
                    <tr><td><span class="param-name">history</span></td><td><span class="param-type">array</span></td><td>An array of past conversation turns: <code>[{ "role": "user" | "assistant", "content": "..." }]</code>.</td></tr>
                    <tr><td><span class="param-name">stream</span></td><td><span class="param-type">boolean</span></td><td>Set to <code>true</code> to receive a stream of response tokens. Defaults to <code>false</code> for developer API calls.</td></tr>
                </tbody>
            </table>
        </section>

        <section id="bobby-chat" class="endpoint-section">
            <h3><span class="method-badge POST">POST</span> Bobby Chat</h3>
            <p>Engage with Bobby, our versatile and cost-effective conversational model. Powered by a fine-tuned Llama model, Bobby is perfect for creative writing, coding assistance, and general-purpose chatbots.</p>
            <table class="param-table">
                <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><span class="param-name">prompt</span> <span class="required-star">*</span></td><td><span class="param-type">string</span></td><td>The user's input.</td></tr>
                    <tr><td><span class="param-name">systemPrompt</span></td><td><span class="param-type">string</span></td><td>Optional instruction to guide Bobby's personality or response format.</td></tr>
                </tbody>
            </table>
        </section>

        <section id="generate-image" class="endpoint-section">
            <h3><span class="method-badge POST">POST</span> Generate Image</h3>
            <p>Create stunning visuals from text prompts using either the advanced Thena engine or the creative MiniMax engine.</p>
            <table class="param-table">
                 <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                 <tbody>
                    <tr><td><span class="param-name">prompt</span> <span class="required-star">*</span></td><td><span class="param-type">string</span></td><td>A detailed description of the desired image.</td></tr>
                    <tr><td><span class="param-name">model</span></td><td><span class="param-type">string</span></td><td>(Thena only) The model to use, e.g., <code>"v6"</code>, <code>"photoreal"</code>, <code>"anime_core"</code>. Defaults to <code>"v6"</code>.</td></tr>
                    <tr><td><span class="param-name">use_minimax</span></td><td><span class="param-type">boolean</span></td><td>Set to <code>true</code> to use the MiniMax engine. Defaults to <code>false</code>.</td></tr>
                 </tbody>
            </table>
        </section>

        <section id="generate-video" class="endpoint-section">
            <h3><span class="method-badge POST">POST</span> Generate Video</h3>
            <p>Initiate a text-to-video generation task using the MiniMax engine. This endpoint is asynchronous. It returns a `task_id` which you must use to poll the `/api/tools/video-status` endpoint to get the final video URL when processing is complete.</p>
            <table class="param-table">
                 <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                 <tbody>
                    <tr><td><span class="param-name">prompt</span> <span class="required-star">*</span></td><td><span class="param-type">string</span></td><td>A cinematic description of the video scene.</td></tr>
                    <tr><td><span class="param-name">duration</span></td><td><span class="param-type">integer</span></td><td>The desired duration of the video in seconds. Defaults to <code>6</code>.</td></tr>
                 </tbody>
            </table>
        </section>

    </main>

    <!-- INTERACTIVE PANEL -->
    <aside class="interactive-panel">
        <div class="panel-header">
            <div class="api-key-group">
                <label>API Key</label>
                <input type="password" id="globalApiKey" class="api-key-input" placeholder="Enter your API Key to test">
            </div>
        </div>
        <div class="panel-body">
            <div id="panel-controller">
                <!-- This content is generated dynamically by JavaScript -->
                <div class="placeholder" style="text-align: center; color: var(--text-secondary); margin-top: 40px;">
                    <i class="fa-solid fa-arrow-left" style="font-size: 24px; margin-bottom: 16px;"></i>
                    <p>Select an endpoint from the navigation to see details and examples.</p>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- PrismJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <script>
        const BASE_URL = "https://web-production-9a18.up.railway.app";

        const ENDPOINT_CONFIG = {
            'introduction': {
                title: "Welcome to Elvion AI",
                description: "Select an API endpoint from the navigation menu to view its documentation, generate code snippets, and perform live tests.",
                params: []
            },
            'authentication': {
                title: "Authentication",
                description: "API Keys are required for all developer endpoints. Enter your key at the top of this panel to enable live testing.",
                params: []
            },
            'seraphina-chat': {
                title: "Test: Seraphina Chat",
                endpoint: "/api/developer/seraphina/chat",
                method: "POST",
                params: [
                    { name: "message", type: "textarea", required: true, placeholder: "Explain the theory of relativity in simple terms." },
                ]
            },
            'bobby-chat': {
                title: "Test: Bobby Chat",
                endpoint: "/api/developer/bobby/chat",
                method: "POST",
                params: [
                    { name: "prompt", type: "textarea", required: true, placeholder: "Write a short story about a robot who discovers music." },
                ]
            },
            'generate-image': {
                title: "Test: Generate Image",
                endpoint: "/api/developer/generate-image",
                method: "POST",
                params: [
                    { name: "prompt", type: "textarea", required: true, placeholder: "A majestic lion with a cosmic mane, standing on a nebula, photorealistic, 8k" },
                    { name: "model", type: "select", required: false, options: ["v6", "photoreal", "anime_core"], default: "v6" },
                    { name: "use_minimax", type: "checkbox", required: false, label: "Use MiniMax Engine" },
                ]
            },
            'generate-video': {
                title: "Test: Generate Video",
                endpoint: "/api/tools/generate-video-from-text",
                method: "POST",
                params: [
                    { name: "prompt", type: "textarea", required: true, placeholder: "A cinematic aerial shot of a futuristic city at sunset." },
                    { name: "duration", type: "number", required: false, default: 6 },
                ]
            },
            // Add other endpoint configurations here...
        };

        let currentSectionId = 'introduction';

        document.addEventListener("DOMContentLoaded", () => {
            const apiKeyInput = document.getElementById('globalApiKey');
            apiKeyInput.value = localStorage.getItem('elvionApiKey') || '';
            apiKeyInput.addEventListener('input', (e) => localStorage.setItem('elvionApiKey', e.target.value));

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.classList.toggle('active', link.hash === `#${id}`);
                        });
                        currentSectionId = id;
                        updateInteractivePanel();
                    }
                });
            }, { root: document.querySelector('.content-area'), threshold: 0.5 });

            document.querySelectorAll('.endpoint-section').forEach(section => observer.observe(section));
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelector(link.hash).scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            updateInteractivePanel();
        });

        function updateInteractivePanel() {
            const config = ENDPOINT_CONFIG[currentSectionId] || ENDPOINT_CONFIG['introduction'];
            const controller = document.getElementById('panel-controller');
            
            if (!config.endpoint) {
                 controller.innerHTML = `
                    <div class="placeholder" style="text-align: center; color: var(--text-secondary); margin-top: 40px;">
                        <h4>${config.title}</h4>
                        <p>${config.description}</p>
                    </div>`;
                return;
            }

            // Build Panel HTML
            let formHtml = config.params.map(p => {
                let inputHtml = '';
                if (p.type === 'textarea') {
                    inputHtml = `<textarea id="param-${p.name}" class="form-input" rows="4" placeholder="${p.placeholder || ''}"></textarea>`;
                } else if (p.type === 'select') {
                    const options = p.options.map(o => `<option value="${o}" ${o === p.default ? 'selected' : ''}>${o}</option>`).join('');
                    inputHtml = `<select id="param-${p.name}" class="form-input">${options}</select>`;
                } else if (p.type === 'checkbox') {
                    return `<div class="form-group"><label><input type="checkbox" id="param-${p.name}"> ${p.label}</label></div>`;
                } else {
                    inputHtml = `<input type="${p.type || 'text'}" id="param-${p.name}" class="form-input" placeholder="${p.placeholder || ''}" value="${p.default || ''}">`;
                }
                return `<div class="form-group">
                            <label for="param-${p.name}">${p.name} ${p.required ? '<span class="required-star">*</span>' : ''}</label>
                            ${inputHtml}
                        </div>`;
            }).join('');

            controller.innerHTML = `
                <div class="panel-section active">
                    <h4>Code Example</h4>
                    <div class="code-selector">
                        <select id="langSelector" onchange="updateCodeSnippet()">
                            <option value="curl">cURL</option>
                            <option value="python">Python</option>
                            <option value="javascript">Node.js</option>
                        </select>
                        <button class="copy-button" onclick="copyCode()"><i class="fa-regular fa-copy"></i> Copy</button>
                    </div>
                    <div class="code-container"><pre><code id="codeBlock" class="language-bash"></code></pre></div>
                    
                    <h4 style="margin-top: 32px;">Try It Live</h4>
                    <div class="console-form" id="live-console-form">
                        ${formHtml}
                        <button class="execute-button" onclick="executeRequest()"><i class="fa-solid fa-play"></i> Execute</button>
                    </div>
                    
                    <div class="response-area" id="responseArea">
                        <div class="response-header">
                            <h4>Response</h4>
                            <span class="response-status" id="responseStatus"></span>
                        </div>
                        <img id="responseImage" class="response-image" style="display: none;">
                        <div id="responseUrl" class="response-url"></div>
                        <div class="code-container"><pre><code id="responseBody" class="language-json"></code></pre></div>
                    </div>
                </div>`;
            
            updateCodeSnippet();
        }
        
        function getSampleBody() {
            const config = ENDPOINT_CONFIG[currentSectionId];
            if (!config) return {};
            const body = {};
            config.params.forEach(p => {
                if (p.name === 'message') body.message = 'Explain why the sky is blue.';
                if (p.name === 'prompt') body.prompt = 'A beautiful landscape painting.';
                if (p.name === 'model') body.model = p.default;
                if (p.name === 'use_minimax') body.use_minimax = false;
            });
            return body;
        }

        function updateCodeSnippet() {
            const lang = document.getElementById('langSelector')?.value;
            const codeBlock = document.getElementById('codeBlock');
            if (!lang || !codeBlock) return;
            
            const config = ENDPOINT_CONFIG[currentSectionId];
            const apiKey = "YOUR_API_KEY";
            const sampleBody = getSampleBody();

            let code = '';
            let langClass = '';

            switch(lang) {
                case 'curl':
                    langClass = 'language-bash';
                    code = `curl -X ${config.method} '${BASE_URL}${config.endpoint}' \\\n` +
                           `  -H 'Authorization: Bearer ${apiKey}' \\\n` +
                           `  -H 'Content-Type: application/json' \\\n` +
                           `  -d '${JSON.stringify(sampleBody, null, 2)}'`;
                    break;
                case 'python':
                    langClass = 'language-python';
                    code = `import requests\nimport json\n\n` +
                           `API_KEY = "${apiKey}"\n` +
                           `API_URL = "${BASE_URL}${config.endpoint}"\n\n` +
                           `headers = {\n    "Authorization": f"Bearer {API_KEY}",\n    "Content-Type": "application/json"\n}\n\n` +
                           `payload = ${JSON.stringify(sampleBody, null, 4)}\n\n` +
                           `response = requests.post(API_URL, headers=headers, json=payload)\n\n` +
                           `print(response.json())`;
                    break;
                case 'javascript':
                    langClass = 'language-javascript';
                    code = `const API_KEY = "${apiKey}";\n` +
                           `const API_URL = "${BASE_URL}${config.endpoint}";\n\n` +
                           `const payload = ${JSON.stringify(sampleBody, null, 2)};\n\n` +
                           `fetch(API_URL, {\n` +
                           `  method: '${config.method}',\n` +
                           `  headers: {\n` +
                           `    'Authorization': \`Bearer \${API_KEY}\`,\n` +
                           `    'Content-Type': 'application/json'\n` +
                           `  },\n` +
                           `  body: JSON.stringify(payload)\n` +
                           `})\n.then(res => res.json())\n.then(console.log)\n.catch(console.error);`;
                    break;
            }
            codeBlock.textContent = code;
            codeBlock.className = langClass;
            Prism.highlightElement(codeBlock);
        }

        function copyCode() {
            const code = document.getElementById('codeBlock').textContent;
            navigator.clipboard.writeText(code);
            const btn = document.querySelector('.copy-button');
            const originalIcon = btn.innerHTML;
            btn.innerHTML = `<i class="fa-solid fa-check"></i> Copied`;
            setTimeout(() => btn.innerHTML = originalIcon, 2000);
        }

        async function executeRequest() {
            const apiKey = document.getElementById('globalApiKey').value;
            if (!apiKey) {
                alert('Please enter your API Key at the top of the panel.');
                return;
            }
            
            const config = ENDPOINT_CONFIG[currentSectionId];
            const body = {};
            config.params.forEach(p => {
                const el = document.getElementById(`param-${p.name}`);
                if (el) {
                    body[p.name] = el.type === 'checkbox' ? el.checked : el.value;
                }
            });
            
            const btn = document.querySelector('.execute-button');
            const responseArea = document.getElementById('responseArea');
            const responseStatus = document.getElementById('responseStatus');
            const responseBody = document.getElementById('responseBody');
            const responseImage = document.getElementById('responseImage');
            const responseUrl = document.getElementById('responseUrl');
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Sending...';
            responseArea.classList.remove('visible');
            responseImage.style.display = 'none';
            responseUrl.innerHTML = '';

            try {
                const response = await fetch(BASE_URL + config.endpoint, {
                    method: config.method,
                    headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                    body: JSON.stringify(body)
                });

                const data = await response.json();
                responseStatus.textContent = `${response.status} ${response.statusText}`;
                responseStatus.className = `response-status ${response.ok ? 'status-success' : 'status-error'}`;
                responseBody.textContent = JSON.stringify(data, null, 2);
                
                if (data.image_b64) {
                    responseImage.src = `data:image/png;base64,${data.image_b64}`;
                    responseImage.style.display = 'block';
                }
                if (data.url) {
                    responseUrl.innerHTML = `Result URL: <a href="${data.url}" target="_blank">${data.url}</a>`;
                }
                
            } catch (error) {
                responseStatus.textContent = `CLIENT ERROR`;
                responseStatus.className = 'response-status status-error';
                responseBody.textContent = JSON.stringify({ error: error.message }, null, 2);
            } finally {
                Prism.highlightElement(responseBody);
                responseArea.classList.add('visible');
                btn.disabled = false;
                btn.innerHTML = '<i class="fa-solid fa-play"></i> Execute';
            }
        }
    </script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date()); 

  gtag('config', 'G-J1YTKP10ZX');
</script>
