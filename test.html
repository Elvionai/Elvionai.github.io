<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Craft Unforgettable Characters | Elvion AI Blog</title>
    <meta name="description" content="Learn proven techniques to create compelling, three-dimensional characters that readers will remember long after the final page.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lato:wght@400;700;900&family=Orbitron:wght@400;500;600;700;800&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* --- DEFAULT: Elvion Dark Theme --- */
            --bg-color: #000000;
            --navbar-bg: rgba(0, 0, 26, 0.9);
            --footer-bg: #00001a;
            --card-bg: rgba(18, 26, 48, 0.7);
            --text-color: #e0e0e0;
            --heading-color: #ffffff;
            --border-color: rgba(0, 255, 255, 0.2);
            --border-glow: 0 0 10px var(--link-color), 0 0 20px var(--link-hover-color);
            --link-color: #00ffff; /* Cyan */
            --link-hover-color: #00aaff; /* Light Blue */
            --button-bg: linear-gradient(45deg, var(--link-color), var(--link-hover-color));
            --button-text-color: #000000;
            --button-hover-shadow: 0 0 15px var(--link-color), 0 0 30px var(--link-hover-color);
            --input-bg: rgba(0, 0, 0, 0.3);
            --input-focus-border: var(--link-color);
            --highlight-bg: rgba(0, 255, 255, 0.15); /* Speech highlight */
            --word-highlight-bg: rgba(0, 255, 255, 0.3);
            --word-highlight-text: #ffffff;
            --body-font: 'Inter', sans-serif;
            --heading-font: 'Orbitron', sans-serif;
        }

        :root[data-theme="light"] {
            /* --- Light Theme Overrides --- */
            --bg-color: #ffffff;
            --navbar-bg: #ffffff;
            --footer-bg: #f1f1f1;
            --card-bg: #f9f9f9;
            --text-color: #333333;
            --heading-color: #111111;
            --border-color: #e0e0e0;
            --border-glow: 0 0 0 2px rgba(0, 86, 179, 0.2); /* Simple shadow for light */
            --link-color: #0056b3;
            --link-hover-color: #003d80;
            --button-bg: var(--link-color);
            --button-text-color: #ffffff;
            --button-hover-shadow: 0 2px 5px rgba(0,0,0,0.1);
            --input-bg: #fdfdfd;
            --input-focus-border: var(--link-color);
            --highlight-bg: #fff9c4; /* Light yellow */
            --word-highlight-bg: #fff176;
            --word-highlight-text: #000000;
            --body-font: 'Roboto', sans-serif;
            --heading-font: 'Lato', sans-serif;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: var(--body-font);
            margin: 0;
            padding-top: 70px; /* Space for fixed navbar */
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            font-size: 1.1rem;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        h1, h2, h3, h4 {
            font-family: var(--heading-font);
            color: var(--heading-color);
            margin-top: 0;
            line-height: 1.3;
            text-shadow: var(--heading-color) 0 0 0; /* Placeholder for transition */
        }
        
        :root[data-theme="dark"] h1,
        :root[data-theme="dark"] h2,
        :root[data-theme="dark"] h3,
        :root[data-theme="dark"] h4 {
            text-shadow: 0 0 10px var(--link-color), 0 0 20px var(--link-hover-color);
        }

        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .post-container {
             max-width: 800px; /* Optimal width for reading */
             margin: 0 auto;
             padding: 0 1rem;
        }
        
        /* --- Dark/Light Navbar --- */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--navbar-bg);
            padding: 1rem 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; }
        .navbar-brand { 
            font-family: 'Orbitron', sans-serif; /* Always Orbitron */
            font-size: 1.8rem; 
            font-weight: 700; 
            color: var(--heading-color); 
        }
        :root[data-theme="dark"] .navbar-brand {
             text-shadow: var(--border-glow);
        }
        .nav-links { display: flex; list-style: none; margin: 0; padding: 0; align-items: center; }
        .nav-links li { margin-left: 2rem; }
        .nav-links a { 
            color: var(--text-color); 
            font-weight: 500; 
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            padding: 0.5rem 0; 
            position: relative; 
        }
        .nav-links .active-link { color: var(--link-color); }
        .nav-links a::after { 
            content: ''; 
            position: absolute; 
            width: 0; 
            height: 2px; 
            bottom: 0; 
            left: 0; 
            background: var(--link-color);
            box-shadow: 0 0 5px var(--link-color);
            transition: width 0.3s ease-in-out; 
        }
        .nav-links a:hover::after, .nav-links .active-link::after { width: 100%; }
        
        /* Theme Toggle Button */
        #theme-toggle {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        #theme-toggle:hover {
            color: var(--link-color);
            border-color: var(--link-color);
        }

        .hamburger { display: none; flex-direction: column; cursor: pointer; padding: 0.5rem; background: transparent; border: none; }
        .hamburger .bar { 
            width: 25px; 
            height: 3px; 
            background-color: var(--link-color);
            margin: 4px 0; 
            transition: 0.4s; 
            box-shadow: 0 0 5px var(--link-color);
        }
        
        /* --- Dark/Light Footer --- */
        .footer {
            background: var(--footer-bg);
            color: var(--text-color);
            padding: 4rem 0 2rem;
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            position: relative;
            margin-top: 4rem;
        }
        .footer .container { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; gap: 2rem; text-align: left; }
        .footer .col { flex: 1; min-width: 200px; }
        .footer h4 { 
            font-size: 1.1rem; 
            font-weight: 700;
            margin-bottom: 1rem; 
            color: var(--heading-color);
            font-family: var(--heading-font);
        }
        .footer ul { list-style: none; padding: 0; }
        .footer ul li { margin-bottom: 0.8rem; }
        .footer .brand-info { 
            font-family: 'Orbitron', sans-serif; /* Always Orbitron */
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--heading-color); 
            margin-bottom: 1rem; 
            display: block; 
        }
         :root[data-theme="dark"] .footer .brand-info {
             text-shadow: var(--border-glow);
         }
        .footer .legal-info { 
            margin-top: 3rem; 
            text-align: center; 
            width: 100%; 
            border-top: 1px solid var(--border-color); 
            padding-top: 1.5rem; 
            color: var(--text-color);
            opacity: 0.7;
        }

        @media (max-width: 992px) {
            .nav-links { display: none; flex-direction: column; width: 100%; background: var(--navbar-bg); position: absolute; top: 100%; left: 0; padding: 1rem 0; border-top: 1px solid var(--border-color); box-shadow: 0 8px 16px rgba(0,0,0,0.05); }
            .nav-links.active { display: flex; }
            .nav-links li { margin: 1rem 0; text-align: center; }
            .hamburger { display: flex; }
            .navbar .container { flex-wrap: nowrap; }
            body { padding-top: 65px; }
        }
        
        /* --- Single Post Styles --- */
        .post-main {
            padding-top: 3rem;
            padding-bottom: 3rem;
            position: relative;
            z-index: 2; /* Above stars if we add them back */
        }

        .post-header {
            text-align: left;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .post-header .post-tag {
            padding: 0.4rem 1rem;
            background: var(--button-bg);
            color: var(--button-text-color);
            font-weight: 700;
            font-size: 0.8rem;
            border-radius: 4px;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .post-header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .post-meta {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .post-meta span { margin-right: 1rem; }
        .post-meta i { margin-right: 0.3rem; color: var(--link-color); }
        
        .post-thumbnail-placeholder {
            width: 100%;
            height: 350px;
            background-color: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--link-color);
            font-size: 5rem;
            border-radius: 10px;
            margin-bottom: 2.5rem;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        /* --- UPGRADED: Audio Player Styles --- */
        .audio-player {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
        }
        .audio-player-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .audio-player-button {
            background: var(--button-bg);
            border: none;
            color: var(--button-text-color);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--heading-font);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .audio-player-button:hover {
            box-shadow: var(--button-hover-shadow);
            transform: scale(1.02);
        }
        .audio-player-button:disabled {
            background: #aaa;
            cursor: not-allowed;
            opacity: 0.7;
        }
        #speech-status {
            font-family: var(--heading-font);
            font-size: 1rem;
            color: var(--link-color);
        }
        .audio-player-options {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .audio-player-options label {
            font-weight: 600;
        }
        .audio-player-options select {
            background: var(--input-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.3rem 0.5rem;
        }
        #read-time {
            font-style: italic;
            opacity: 0.8;
        }

        /* --- Article Content Styles --- */
        .article-content {
            font-size: 1.15rem;
            color: var(--text-color);
        }
        .article-content p, .article-content li {
            margin-bottom: 1.5rem;
            padding: 0.2rem;
            border-radius: 4px;
        }
        .article-content h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }
        .article-content h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .article-content ul, .article-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        .article-content blockquote {
            border-left: 4px solid var(--link-color);
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
            font-size: 1.1rem;
            color: var(--text-color);
            opacity: 0.9;
            background: var(--card-bg);
            border-radius: 0 4px 4px 0;
            padding: 1rem 1.5rem;
        }
        
        /* --- Word-by-Word Highlight Style --- */
        .article-content .reading-highlight {
            background-color: var(--word-highlight-bg);
            color: var(--word-highlight-text);
            padding: 0.1em 0;
            border-radius: 2px;
            transition: background-color 0.1s ease-out, color 0.1s ease-out;
        }


        /* --- Standard Button --- */
        .btn-primary {
            background: var(--button-bg);
            border: none;
            color: var(--button-text-color);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--heading-font);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            box-shadow: var(--button-hover-shadow);
        }
        .btn-secondary {
            padding: 0.7rem 1.4rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-family: var(--heading-font);
        }
        .btn-secondary:hover {
            background: var(--card-bg);
            border-color: var(--link-color);
            color: var(--link-color);
        }
        .btn-secondary.active {
            background: var(--button-bg);
            color: var(--button-text-color);
            border-color: var(--link-color);
        }

        /* --- Standard Inputs --- */
        .form-input {
            display: block;
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 1rem;
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-color);
            font-size: 1rem;
            font-family: var(--body-font);
            box-sizing: border-box; 
        }
        .form-input:focus {
            outline: none;
            border-color: var(--input-focus-border);
            box-shadow: var(--border-glow);
        }
        .form-label {
            font-weight: 700;
            font-family: var(--heading-font);
            margin-bottom: 0.5rem;
            display: block;
        }


        /* Auth Form Styles */
        #auth-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .auth-toggle { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
        #auth-username-group, #auth-pic-group { display: none; }

        /* Comment Form Styles */
        .comment-form { margin-bottom: 2.5rem; }
        #comment-input { min-height: 120px; resize: vertical; }
        .emoji-suggestions { margin-bottom: 1rem; }
        .emoji-suggestions span {
            cursor: pointer;
            font-size: 1.2rem;
            margin-right: 0.5rem;
            transition: transform 0.2s;
            opacity: 0.7;
        }
        .emoji-suggestions span:hover { transform: scale(1.3); opacity: 1; }

        /* Comment List Styles */
        .comments-wrapper {
            margin-top: 4rem;
            padding-top: 3rem;
            border-top: 2px solid var(--border-color);
        }
        .comments-wrapper h2 {
            text-align: left;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 2rem;
        }
        .comment-list { list-style: none; padding: 0; }
        .comment {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .comment img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            object-fit: cover;
        }
        .comment-content { flex: 1; }
        .comment-user {
            font-weight: 700;
            font-family: var(--heading-font);
            color: var(--heading-color);
            font-size: 1rem;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
        }
        .comment-text {
            margin: 0.5rem 0;
            color: var(--text-color);
            white-space: pre-wrap;
            font-size: 1rem;
            line-height: 1.7;
        }
        .comment-meta { font-size: 0.8rem; opacity: 0.7; margin-bottom: 0.75rem; }
        .comment-actions button {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            opacity: 0.8;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-right: 0.5rem;
            transition: all 0.3s ease;
        }
        .comment-actions button:hover {
            border-color: var(--link-color);
            color: var(--link-color);
            opacity: 1;
        }
        .comment-actions button.active {
            background: var(--link-color);
            color: var(--button-text-color);
            border-color: var(--link-color);
            opacity: 1;
        }
        .custom-verified-badge {
            width: 15px;
            height: 15px;
            background: var(--link-color);
            border-radius: 50%;
            margin-left: 0.5rem;
            display: inline-block;
        }
        :root[data-theme="dark"] .custom-verified-badge {
             box-shadow: 0 0 5px var(--link-color);
        }
        
        /* Reply Styles */
        .reply-box { margin-top: 1rem; display: none; }
        .reply-box textarea { font-size: 0.9rem; min-height: 60px; }
        .reply-box button { padding: 0.5rem 1rem; font-size: 0.8rem; margin-top: 0.5rem; }
        .replies-container {
            margin-top: 1.5rem;
            padding-left: 1.5rem;
            border-left: 2px solid var(--border-color);
        }
        .reply { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; }
        .reply img { width: 35px; height: 35px; }

    </style>
</head>
<body data-theme="dark"> <header class="navbar">
        <div class="container">
            <a href="index.html" class="navbar-brand">Elvion AI</a>
            
            <nav class="nav-links" id="nav-links">
                <li><a href="university.html">University</a></li>
                <li><a href="blog.html" class="active-link">Blog</a></li>
                <li><a href="about.html">About Us</a></li>
                <li>
                    <button id="theme-toggle" aria-label="Toggle theme">
                        <i class="fas fa-sun"></i> </button>
                </li>
            </nav>
            <button class="hamburger" id="hamburger-btn" aria-label="Toggle navigation">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </header>

    <main class="post-main">
        <div class="post-container">

            <header class="post-header">
                <span class="post-tag">Creative Writing</span>
                <h1>How to Craft Unforgettable Characters: A Writer's Guide</h1>
                <div class="post-meta">
                    <span><i class="fas fa-user-edit"></i> By Elvion AI Staff</span>
                    <span><i class="fas fa-calendar-alt"></i> Nov 6, 2025</span>
                    <span><i class="fas fa-clock"></i> <span id="read-time-meta">...</span></span>
                </div>
            </header>

            <div class="post-thumbnail-placeholder">
                <i class="fas fa-feather-pointed"></i>
            </div>
            
            <section class="audio-player">
                <div class="audio-player-controls">
                    <button id="audio-play-pause-btn" class="audio-player-button" disabled>
                        <i class="fas fa-play"></i>
                        <span>Listen</span>
                    </button>
                    <span id="speech-status">Loading voices...</span>
                </div>
                <div class="audio-player-options">
                    <label for="voice-select">Voice:</label>
                    <select id="voice-select" disabled></select>
                    <span id="read-time">Est. Reading Time: ...</span>
                </div>
            </section>

            <article class="article-content" id="article-content">
                <p>Your characters are the heart of your story. They are the vessels through which your reader experiences the world you've built, the conflicts you've crafted, and the emotions you want to evoke. A weak plot can sometimes be saved by compelling characters, but even the most brilliant plot will fall flat if the characters feel like cardboard cutouts. So, how do you create three-dimensional, unforgettable characters that leap off the page?</p>

                <h2>1. Beyond the Surface: The Iceberg Method</h2>
                <p>What we see of a character‚Äîtheir appearance, their job, their actions‚Äîis just the tip of the iceberg. The real substance lies beneath the surface. This is their **backstory**. You don't need to dump all of this information on the reader (in fact, please don't!), but *you* need to know it. What was their childhood like? What's their biggest regret? What is the secret they've never told anyone? This hidden weight informs their every decision, fear, and desire.</p>

                <blockquote>
                    **Pro-Tip:** Ask yourself: What is the single most important event that shaped my character into who they are today? How does it affect their behavior in Chapter 1?
                </blockquote>

                <h2>2. Give Them Flaws (Real Ones)</h2>
                <p>Perfection is boring. A character who is always right, always strong, and always kind is not relatable‚Äîthey're annoying. Real people are messy. They are impatient, they are selfish, they are afraid of spiders, they procrastinate. A flaw makes a character human. More importantly, a character's **fatal flaw** is often the engine of the plot. It's the internal obstacle they must overcome to achieve their external goal. Is your hero brave? Make them reckless. Is your heroine brilliant? Make her arrogant.</p>

                <h2>3. Wants vs. Needs</h2>
                <p>This is a classic writing technique for a reason. Every compelling character has two goals:</p>
                
                <ul>
                    <li><strong>The Want:</strong> This is the external, conscious goal. It's what the character *thinks* they need to be happy. (e.g., "I want to win the championship," "I want to get the promotion," "I want to defeat the villain.")</li>
                    <li><strong>The Need:</strong> This is the internal, often subconscious truth. It's what the character *actually* needs to grow as a person. (e.g., "I need to learn to trust my teammates," "I need to realize my family is more important than work," "I need to forgive myself.")</li>
                </ul>

                <p>The best stories create conflict by putting the Want and the Need at odds. The character's journey (their "arc") is complete when they either sacrifice their Want to achieve their Need, or finally realize that what they Needed was the key to getting what they Wanted all along.</p>
                
                <h2>4. Let Their Voice Be Heard</h2>
                <p>How does your character speak? Their dialogue is a window into their soul. A character's voice is more than just an accent; it's their word choice, their sentence structure, their rhythm, and what they choose to say (or not say).</p>
                
                <h3>Quick Voice Tips:</h3>
                <ul>
                    <li>An educated professor might use complex sentences and precise vocabulary.</li>
                    <li>A nervous teenager might speak in short, halting sentences, using a lot of "like" or "um."</li>
                    <li>A cynical detective might use dry, sarcastic wit.</li>
                </ul>
                <p>Try this exercise: Write a scene with two characters arguing, but remove all dialogue tags ("he said," "she yelled"). Can you tell who is speaking just by their words and rhythm? If so, you're on the right track.</p>

                <h2>5. Make Them Act: Decisions Define Character</h2>
                <p>Don't just *tell* us your character is brave; put them in a situation where they must *choose* to be brave, especially when it's hard. Character is revealed through action and choice, especially choices made under pressure. The harder the choice, the more we learn about who they really are. A character who chooses to run into a burning building is defined by that action in a way no amount of descriptive prose ever could.</p>
                
                <p>Ultimately, an unforgettable character feels *real*. They are a bundle of contradictions, flaws, desires, and secrets, just like us. By digging deep into their past, understanding their internal conflicts, and letting them express themselves through a unique voice, you can create characters that readers will carry with them long after the final page.</p>
            </article>

            <section class="comments-wrapper" id="comments">
                <h2>Join the Conversation</h2>

                <div id="auth-container">
                    <div class="auth-toggle">
                        <button id="auth-toggle-login" class="auth-toggle-btn btn-secondary active">Login</button>
                        <button id="auth-toggle-signup" class="auth-toggle-btn btn-secondary">Sign Up</button>
                    </div>
                    
                    <form id="auth-form" class="auth-form">
                        <div id="auth-username-group">
                            <label for="auth-username" class="form-label">Username</label>
                            <input type="text" id="auth-username" class="form-input" placeholder="Choose a display name">
                        </div>
                        <div id="auth-pic-group">
                            <label for="auth-pic-url" class="form-label">Profile Pic URL (Optional)</label>
                            <input type="text" id="auth-pic-url" class="form-input" placeholder="http://your-image.com/pic.jpg">
                        </div>
                        <div>
                            <label for="auth-email" class="form-label">Email</label>
                            <input type="email" id="auth-email" class="form-input" placeholder="you@example.com" required>
                        </div>
                        <div>
                            <label for="auth-password" class="form-label">Password</label>
                            <input type="password" id="auth-password" class="form-input" placeholder="Min. 6 characters" required>
                        </div>
                        <button type="submit" id="auth-submit-button" class="btn-primary">Login</button>
                        <p id="auth-error" style="color: red; margin-top: 1rem;"></p>
                    </div>
                </div>

                <div class="comment-form" id="comment-form-container" style="display: none;">
                    <h3>Leave a Comment</h3>
                    <textarea id="comment-input" class="form-input" placeholder="Share your thoughts..."></textarea>
                    <div class="emoji-suggestions" id="emoji-suggestion-box">
                        <span>üëç</span>
                        <span>‚ù§Ô∏è</span>
                        <span>üòÇ</span>
                        <span>üòÆ</span>
                        <span>ü§î</span>
                        <span>üí°</span>
                    </div>
                    <button id="comment-button" class="btn-primary">Post Comment</button>
                </div>

                <div id="comment-list-container">
                    <h3 id="comment-list-title">Comments</h3>
                    <div id="comment-list">
                        </div>
                </div>

            </section>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="col">
                <span class="brand-info">Elvion AI</span>
                <p>Where Assistance Meets Excellence.</p>
            </div>
            <div class="col">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html#hero">Home</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="university.html">University</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Company</h4>
                <ul>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="mailto:Philipsmith@consultant.com">Contact Us</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                    <li><a href="terms.html">Terms of Service</a></li>
                </ul>
            </div>
            <div class="legal-info">
                &copy; <span id="current-year-footer"></span> Elvion AI. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.getElementById('hamburger-btn');
            const navLinks = document.getElementById('nav-links');

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
            });
            
            document.getElementById('current-year-footer').textContent = new Date().getFullYear();

            // --- Theme Toggle Logic ---
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;
            const currentTheme = localStorage.getItem('theme') || 'dark'; // Default to dark

            function setTheme(theme) {
                body.setAttribute('data-theme', theme);
                themeToggle.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                localStorage.setItem('theme', theme);
            }

            setTheme(currentTheme); // Set initial theme on load

            themeToggle.addEventListener('click', () => {
                const newTheme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
            });
        });
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const playPauseBtn = document.getElementById('audio-play-pause-btn');
            const speechStatus = document.getElementById('speech-status');
            const articleContent = document.getElementById('article-content');
            const voiceSelect = document.getElementById('voice-select');
            const readTimeEl = document.getElementById('read-time');
            const readTimeMetaEl = document.getElementById('read-time-meta');
            
            if ('speechSynthesis' in window) {
                let isPlaying = false;
                let isPaused = false;
                let utterance = new SpeechSynthesisUtterance();
                let voices = [];
                let wordSpans = [];
                let currentWordIndex = 0;
                const AVG_WPM = 180; // Average words per minute for speech

                // --- 1. Prepare Article: Wrap words and Calculate Time ---
                function prepareArticle() {
                    let wordCount = 0;
                    const elements = articleContent.querySelectorAll('p, li, blockquote, h2, h3');
                    
                    elements.forEach(el => {
                        const words = el.textContent.split(/\s+/).filter(Boolean);
                        wordCount += words.length;
                        
                        let newHtml = '';
                        words.forEach(word => {
                            const span = `<span class="word">${word}</span>`;
                            wordSpans.push(span); // Store the span element (though just tracking index is fine)
                            newHtml += span + ' ';
                        });
                        el.innerHTML = newHtml;
                    });
                    
                    // Re-collect all word spans in order
                    wordSpans = Array.from(articleContent.querySelectorAll('span.word'));

                    // Calculate read time
                    const minutes = Math.ceil(wordCount / AVG_WPM);
                    const timeText = `${minutes} min read`;
                    readTimeEl.textContent = `Est. Read Time: ${timeText}`;
                    readTimeMetaEl.textContent = timeText;
                    
                    // Get full text for utterance
                    utterance.text = articleContent.textContent;
                }
                
                prepareArticle();

                // --- 2. Load Voices ---
                function populateVoiceList() {
                    voices = speechSynthesis.getVoices();
                    voiceSelect.innerHTML = '';
                    
                    // Create default options
                    let femaleOption = null;
                    let maleOption = null;

                    voices.forEach(voice => {
                        if (voice.lang.includes('en')) { // Only show English voices
                            const option = document.createElement('option');
                            option.textContent = `${voice.name} (${voice.lang})`;
                            option.setAttribute('data-name', voice.name);
                            
                            // Try to find a default male and female
                            if (!femaleOption && voice.name.match(/female/i)) femaleOption = option;
                            if (!maleOption && voice.name.match(/male/i)) maleOption = option;
                            
                            voiceSelect.appendChild(option);
                        }
                    });
                    
                    // Add filtered groups
                    const femaleGroup = document.createElement('optgroup');
                    femaleGroup.label = "Female Voices";
                    const maleGroup = document.createElement('optgroup');
                    maleGroup.label = "Male Voices";

                    voices.forEach(voice => {
                         if (voice.lang.includes('en')) {
                            const option = document.createElement('option');
                            option.textContent = `${voice.name} (${voice.lang})`;
                            option.setAttribute('data-name', voice.name);
                             
                             if (voice.name.match(/female|zira|susan/i)) femaleGroup.appendChild(option);
                             else if (voice.name.match(/male|david|mark/i)) maleGroup.appendChild(option);
                         }
                    });

                    voiceSelect.appendChild(femaleGroup);
                    voiceSelect.appendChild(maleGroup);

                    speechStatus.textContent = "Ready to play";
                    playPauseBtn.disabled = false;
                    voiceSelect.disabled = false;
                }

                populateVoiceList();
                if (speechSynthesis.onvoiceschanged !== undefined) {
                    speechSynthesis.onvoiceschanged = populateVoiceList;
                }

                // --- 3. Speech Event Handlers ---
                let currentHighlight = null;
                
                utterance.onboundary = (event) => {
                    if (event.name === 'word') {
                        // Find the word span by charIndex
                        const char = event.charIndex;
                        let wordFound = null;
                        
                        // This logic is complex: find the word span that *contains* the charIndex
                        let charCounter = 0;
                        for(let i=0; i < wordSpans.length; i++) {
                            const wordText = wordSpans[i].textContent;
                            if (char >= charCounter && char < (charCounter + wordText.length)) {
                                wordFound = wordSpans[i];
                                break;
                            }
                            charCounter += wordText.length + 1; // +1 for space
                        }

                        if (wordFound) {
                            if (currentHighlight) currentHighlight.classList.remove('reading-highlight');
                            wordFound.classList.add('reading-highlight');
                            wordFound.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            currentHighlight = wordFound;
                        }
                    }
                };

                utterance.onend = () => {
                    resetPlayer();
                };
                
                utterance.onerror = (e) => {
                    console.error('Speech synthesis error:', e);
                    speechStatus.textContent = "Error reading";
                    resetPlayer();
                };

                // --- 4. Player Controls ---
                function resetPlayer() {
                    isPlaying = false;
                    isPaused = false;
                    if (currentHighlight) currentHighlight.classList.remove('reading-highlight');
                    currentHighlight = null;
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i> <span>Listen</span>';
                    speechStatus.textContent = "Finished";
                }

                playPauseBtn.addEventListener('click', () => {
                    if (!isPlaying && !isPaused) {
                        // Start playing
                        const selectedVoiceName = voiceSelect.selectedOptions[0].getAttribute('data-name');
                        utterance.voice = voices.find(v => v.name === selectedVoiceName);
                        
                        isPlaying = true;
                        isPaused = false;
                        speechSynthesis.cancel();
                        speechStatus.textContent = "Playing...";
                        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
                        speechSynthesis.speak(utterance);
                    } else if (isPlaying && !isPaused) {
                        // Pause
                        isPlaying = false;
                        isPaused = true;
                        speechSynthesis.pause();
                        speechStatus.textContent = "Paused";
                        playPauseBtn.innerHTML = '<i class="fas fa-play"></i> <span>Resume</span>';
                    } else if (!isPlaying && isPaused) {
                        // Resume
                        isPlaying = true;
                        isPaused = false;
                        speechSynthesis.resume();
                        speechStatus.textContent = "Playing...";
                        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
                    }
                });

                window.onbeforeunload = () => {
                    speechSynthesis.cancel();
                };

            } else {
                speechStatus.textContent = "Audio playback not supported.";
                playPauseBtn.disabled = true;
            }
        });
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, updateProfile, signOut } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, where, onSnapshot, orderBy, updateDoc, doc, arrayUnion, arrayRemove, deleteDoc, getDoc, Timestamp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

        // --- 1. CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
            authDomain: "elvionai.firebaseapp.com",
            projectId: "elvionai",
            storageBucket: "elvionai.firebasestorage.app",
            messagingSenderId: "161078300830",
            appId: "1:161078300830:web:f460df8591704eb0e96b8f"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- 2. STATE & CONSTANTS ---
        let currentUser = null;
        const ARTICLE_ID = 'crafting-characters-01';

        // --- 3. DOM ELEMENTS ---
        const authContainer = document.getElementById('auth-container');
        const authForm = document.getElementById('auth-form');
        const authToggleLogin = document.getElementById('auth-toggle-login');
        const authToggleSignup = document.getElementById('auth-toggle-signup');
        const authUsernameGroup = document.getElementById('auth-username-group');
        const authPicGroup = document.getElementById('auth-pic-group');
        const authEmailInput = document.getElementById('auth-email');
        const authPasswordInput = document.getElementById('auth-password');
        const authUsernameInput = document.getElementById('auth-username');
        const authPicInput = document.getElementById('auth-pic-url');
        const authSubmitButton = document.getElementById('auth-submit-button');
        const authError = document.getElementById('auth-error');

        const commentFormContainer = document.getElementById('comment-form-container');
        const commentButton = document.getElementById('comment-button');
        const commentInput = document.getElementById('comment-input');
        const commentList = document.getElementById('comment-list');
        const emojiSuggestionBox = document.getElementById('emoji-suggestion-box');
        
        // --- 4. AUTHENTICATION ---
        function toggleAuthForm(isLogin) {
            authError.textContent = '';
            if (isLogin) {
                authToggleLogin.classList.add('active');
                authToggleSignup.classList.remove('active');
                authUsernameGroup.style.display = 'none';
                authPicGroup.style.display = 'none';
                authSubmitButton.textContent = 'Login';
            } else {
                authToggleLogin.classList.remove('active');
                authToggleSignup.classList.add('active');
                authUsernameGroup.style.display = 'block';
                authPicGroup.style.display = 'block';
                authSubmitButton.textContent = 'Sign Up';
            }
        }
        
        authToggleLogin.addEventListener('click', () => toggleAuthForm(true));
        authToggleSignup.addEventListener('click', () => toggleAuthForm(false));

        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = authEmailInput.value;
            const password = authPasswordInput.value;
            const isLogin = authSubmitButton.textContent === 'Login';
            authError.textContent = '';

            try {
                if (isLogin) {
                    await signInWithEmailAndPassword(auth, email, password);
                } else {
                    const username = authUsernameInput.value;
                    const picUrl = authPicInput.value || `https://api.dicebear.com/8.x/initials/svg?seed=${username}`;
                    if (!username) {
                        authError.textContent = 'Please enter a username.';
                        return;
                    }
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    await updateProfile(userCredential.user, { 
                        displayName: username, 
                        photoURL: picUrl 
                    });
                }
            } catch (error) {
                console.error("Auth error:", error);
                authError.textContent = error.message;
            }
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                authContainer.style.display = 'none';
                commentFormContainer.style.display = 'block';
            } else {
                currentUser = null;
                authContainer.style.display = 'block';
                commentFormContainer.style.display = 'none';
                toggleAuthForm(true); 
            }
        });

        // --- 5. COMMENTS LOGIC ---
        commentButton.addEventListener('click', async () => {
            if (!currentUser) return;
            const commentText = commentInput.value.trim();
            if (!commentText) return;
            
            const commentData = {
                text: commentText,
                userName: currentUser.displayName,
                userProfilePic: currentUser.photoURL,
                userId: currentUser.uid,
                timestamp: Timestamp.fromDate(new Date()),
                articleId: ARTICLE_ID,
                replies: [],
                likes: [],
                helpful: [],
                notHelpful: []
            };

            try {
                await addDoc(collection(db, 'comments'), commentData);
                commentInput.value = '';
            } catch (error) {
                console.error("Error posting comment: ", error);
            }
        });

        emojiSuggestionBox.addEventListener('click', (e) => {
            if (e.target.tagName === 'SPAN') {
                commentInput.value += e.target.textContent;
                commentInput.focus();
            }
        });

        // --- 6. REAL-TIME COMMENT RENDERING ---
        const q = query(
            collection(db, 'comments'), 
            where("articleId", "==", ARTICLE_ID),
            orderBy("timestamp", "desc")
        );

        onSnapshot(q, (snapshot) => {
            commentList.innerHTML = ''; 
            if (snapshot.empty) {
                document.getElementById('comment-list-title').textContent = 'No comments yet. Be the first!';
                return;
            }
            
            document.getElementById('comment-list-title').textContent = 'Comments';
            snapshot.forEach((doc) => {
                commentList.appendChild(renderComment(doc));
            });
        });

        function renderComment(doc) {
            const comment = doc.data();
            const commentId = doc.id;
            const li = document.createElement('li');
            li.className = 'comment';
            
            const hasLiked = currentUser && comment.likes.includes(currentUser.uid);
            const hasFoundHelpful = currentUser && comment.helpful.includes(currentUser.uid);
            const hasFoundNotHelpful = currentUser && comment.notHelpful.includes(currentUser.uid);
            
            let repliesHtml = '';
            if (comment.replies && comment.replies.length > 0) {
                comment.replies.sort((a, b) => a.timestamp.seconds - b.timestamp.seconds);
                comment.replies.forEach(reply => {
                    repliesHtml += `
                        <div class="reply">
                            <img src="${reply.userProfilePic || `https://api.dicebear.com/8.x/initials/svg?seed=${reply.userName}`}" alt="User Profile Pic" />
                            <div class="comment-content">
                                <span class="comment-user">${reply.userName} <span class="custom-verified-badge"></span></span>
                                <p class="comment-text">${reply.text}</p>
                                <div class="comment-meta">${new Date(reply.timestamp.seconds * 1000).toLocaleString()}</div>
                            </div>
                        </div>
                    `;
                });
            }

            const defaultAvatar = `https://api.dicebear.com/8.x/initials/svg?seed=${comment.userName}`;
            li.innerHTML = `
                <img src="${comment.userProfilePic || defaultAvatar}" alt="User Profile Pic" />
                <div class="comment-content">
                    <span class="comment-user">
                        ${comment.userName}
                        <span class="custom-verified-badge"></span>
                    </span>
                    <p class="comment-text">${comment.text}</p>
                    <div class="comment-meta">${new Date(comment.timestamp.seconds * 1000).toLocaleString()}</div>
                    <div class="comment-actions" data-id="${commentId}">
                        <button class="like-button ${hasLiked ? 'active' : ''}" title="Like">
                            <i class="fas fa-thumbs-up"></i> (${comment.likes.length})
                        </button>
                        <button class="helpful-button ${hasFoundHelpful ? 'active' : ''}" title="Helpful">
                            <i class="fas fa-hands-clapping"></i> (${comment.helpful.length})
                        </button>
                        <button class="not-helpful-button ${hasFoundNotHelpful ? 'active' : ''}" title="Not Helpful">
                            <i class="fas fa-thumbs-down"></i> (${comment.notHelpful.length})
                        </button>
                        <button class="reply-button" title="Reply">
                            <i class="fas fa-reply"></i> Reply
                        </button>
                    </div>
                    
                    <div class="reply-box" id="reply-box-${commentId}">
                        <textarea class="form-input" placeholder="Write a reply..."></textarea>
                        <button class="submit-reply-button btn-primary">Submit Reply</button>
                    </div>

                    <div class="replies-container">
                        ${repliesHtml}
                    </div>
                </div>
            `;
            return li;
        }

        // --- 7. EVENT DELEGATION ---
        commentList.addEventListener('click', async (e) => {
            if (!currentUser) {
                alert("Please log in to interact with comments.");
                return;
            }

            const button = e.target.closest('button');
            if (!button) return;
            
            const commentActions = e.target.closest('.comment-actions');
            const commentContent = e.target.closest('.comment-content');

            if (commentActions) {
                const commentId = commentActions.dataset.id;
                const commentRef = doc(db, 'comments', commentId);

                if (button.classList.contains('like-button')) {
                    toggleArrayVote(commentRef, 'likes', currentUser.uid);
                } else if (button.classList.contains('helpful-button')) {
                    toggleArrayVote(commentRef, 'helpful', currentUser.uid);
                } else if (button.classList.contains('not-helpful-button')) {
                    toggleArrayVote(commentRef, 'notHelpful', currentUser.uid);
                } else if (button.classList.contains('reply-button')) {
                    const replyBox = commentContent.querySelector(`#reply-box-${commentId}`);
                    replyBox.style.display = replyBox.style.display === 'none' ? 'block' : 'none';
                }
            }
            
            if (button.classList.contains('submit-reply-button')) {
                const replyBox = e.target.closest('.reply-box');
                const commentId = replyBox.id.replace('reply-box-', '');
                const commentRef = doc(db, 'comments', commentId);
                const replyText = replyBox.querySelector('textarea').value.trim();
                
                if (!replyText) return;
                
                const replyData = {
                    text: replyText,
                    userName: currentUser.displayName,
                    userProfilePic: currentUser.photoURL,
                    userId: currentUser.uid,
                    timestamp: Timestamp.fromDate(new Date())
                };

                try {
                    await updateDoc(commentRef, { replies: arrayUnion(replyData) });
                    replyBox.querySelector('textarea').value = '';
                    replyBox.style.display = 'none';
                } catch (error) {
                    console.error("Error adding reply: ", error);
                }
            }
        });
        
        async function toggleArrayVote(docRef, fieldName, userId) {
            try {
                const docSnap = await getDoc(docRef);
                if (!docSnap.exists()) return;
                const data = docSnap.data();
                const array = data[fieldName] || [];
                const operation = array.includes(userId) ? arrayRemove(userId) : arrayUnion(userId);
                await updateDoc(docRef, { [fieldName]: operation });
            } catch (error) {
                console.error(`Error toggling ${fieldName}:`, error);
            }
        }
    </script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
¬† window.dataLayer = window.dataLayer || [];
¬† function gtag(){dataLayer.push(arguments);}
¬† gtag('js', new Date()); 

¬† gtag('config', 'G-J1YTKP10ZX');
</script>
