<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Art of Building a Reading Habit That Actually Sticks | Elvion AI Blog</title>
    <meta name="description" content="Stop starting and stopping your reading goal. This deep dive shows you how to build a sustainable reading habit using small, systematic adjustments, not fleeting motivation.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@600;700;800;900&family=Times+New+Roman&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- DUAL THEME VARIABLES (Default: DARK MODE) --- */
        :root {
            /* Elvion AI Cyan/Blue Theme */
            --dark-navy: #00001a;
            --bg-color: #0d1117;
            --text-color: #e6edf3;
            --heading-color: #ffffff;
            --cyan-glow: #00ffff;
            --light-blue-glow: #00aaff;
            --link-color: var(--cyan-glow);
            --link-hover-color: var(--light-blue-glow);
            --border-color: #21262d;
            --card-bg: #161b22;
            --button-bg: linear-gradient(45deg, var(--cyan-glow), var(--light-blue-glow));
            --button-text-color: #0d1117; /* Dark text on bright button */
            --button-hover-bg: linear-gradient(45deg, #00d4d4, #0077ff);
            --navbar-bg: rgba(13, 17, 23, 0.95);
            --footer-bg: #0a0e14;
            --highlight-color: rgba(0, 255, 255, 0.3);
            --comment-bg: #0d1117;
            --shadow-glow: 0 0 10px rgba(0, 255, 255, 0.15);
            /* Dark Mode Headline Color */
            --headline-color: var(--light-blue-glow);
            /* Verified Badge Color */
            --verified-color: #1DA1F2; /* Standard Blue Checkmark */
            /* New Admin Glow Badge Colors */
            --admin-color: #FFD700; /* Gold */
            --admin-glow: rgba(255, 215, 0, 0.5);
            /* New Audio Player */
            --audio-widget-bg: rgba(22, 27, 34, 0.9);

            /* Modal Colors */
            --modal-bg: #161b22;
            --modal-border: var(--link-color);
        }

        /* LIGHT MODE VARIABLES */
        body.light-theme {
            --bg-color: #f7f7f7; /* Less whitish, slight off-white */
            --text-color: #333333;
            --heading-color: #111111;
            --link-color: #0056b3;
            --link-hover-color: #003d80;
            --border-color: #e0e0e0;
            --card-bg: #ffffff; /* Card background is still white */
            --button-bg: #0056b3;
            --button-text-color: #ffffff;
            --button-hover-bg: #003d80;
            --navbar-bg: rgba(255, 255, 255, 0.95);
            --footer-bg: #eeeeee;
            --highlight-color: #ffeb3b; /* A subtle yellow highlight */
            --comment-bg: #ffffff;
            --shadow-glow: none;
            /* Light Mode Headline Color */
            --headline-color: #111111; /* Black headline */
            /* Verified Badge Color */
            --verified-color: #1DA1F2;
            /* New Admin Glow Badge Colors */
            --admin-color: #CCAA00; /* Darker Gold */
            --admin-glow: none;
            /* New Audio Player */
            --audio-widget-bg: rgba(255, 255, 255, 0.9);

            /* Modal Colors */
            --modal-bg: #ffffff;
            --modal-border: var(--link-color);
        }

        /* --- GLOBAL STYLES --- */
        html { scroll-behavior: smooth; }

        body {
            /* Changed to Times New Roman for the body text */
            font-family: 'Times New Roman', serif;
            margin: 0;
            padding-top: 60px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            font-size: 1.1rem;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        h1, h2, h3, h4 {
            /* Kept Orbitron for headings for a distinct look */
            font-family: 'Orbitron', sans-serif;
            color: var(--heading-color);
            margin-top: 0;
            line-height: 1.3;
            text-shadow: var(--shadow-glow);
        }

        p, ul, ol, blockquote {
            font-family: 'Times New Roman', serif; /* Explicitly set for content */
        }

        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .post-container {
             max-width: 800px;
             margin: 0 auto;
             padding: 0 1rem;
        }

        /* --- Navbar Styles (Existing) --- */
        .navbar {
            position: fixed; top: 0; width: 100%;
            background: var(--navbar-bg);
            padding: 1rem 0; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(5px);
        }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .navbar-brand { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--heading-color); text-shadow: var(--shadow-glow); }
        .nav-links { display: flex; list-style: none; margin: 0; padding: 0; }
        .nav-links li { margin-left: 2rem; }
        .nav-links a {
            color: var(--text-color); font-weight: 500; font-family: 'Inter', sans-serif; font-size: 1rem;
            text-transform: uppercase; letter-spacing: 0.5px; padding: 0.5rem 0; position: relative;
        }
        .nav-links .active-link { color: var(--link-color); }
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0;
            background: var(--link-color); transition: width 0.3s ease-in-out;
        }
        .nav-links a:hover::after, .nav-links .active-link::after { width: 100%; }

        .hamburger { display: none; flex-direction: column; cursor: pointer; padding: 0.5rem; background: transparent; border: none; }
        .hamburger .bar {
            width: 25px; height: 3px; background-color: var(--heading-color); margin: 4px 0; transition: 0.4s; box-shadow: none;
        }
        .hamburger.active .bar:nth-child(2) { opacity: 0; }
        .hamburger.active .bar:nth-child(1) { transform: translateY(7px) rotate(45deg); }
        .hamburger.active .bar:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

        #theme-toggle {
            background: transparent;
            border: 1px solid var(--text-color);
            color: var(--text-color);
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            margin-left: 1rem;
            font-size: 1.1rem;
        }
        #theme-toggle:hover {
            border-color: var(--link-color);
            color: var(--link-color);
            box-shadow: 0 0 5px var(--link-color);
        }
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* --- Footer Styles (Existing) --- */
        .footer {
            background: var(--footer-bg); color: var(--text-color); padding: 4rem 0 2rem; font-size: 0.9rem;
            border-top: 1px solid var(--border-color); text-align: center; position: relative; margin-top: 4rem;
        }
        .footer .container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            text-align: left;
            max-width: 900px;
        }
        .footer .col h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        .footer ul {
            list-style: none;
            padding: 0;
        }
        .footer li {
            margin-bottom: 0.5rem;
        }
        .footer a {
            color: var(--text-color);
            font-size: 0.9rem;
        }
        .footer a:hover {
            color: var(--link-color);
            text-decoration: none;
        }
        .footer .brand-info {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--link-color);
        }
        .footer .legal-info {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            color: #777;
        }

        /* --- Single Post Styles --- */
        .post-main { padding-top: 3rem; padding-bottom: 3rem; position: relative; }
        .post-header { border-bottom: 1px solid var(--border-color); padding-bottom: 1.5rem; margin-bottom: 2rem; }
        .post-header .post-tag {
            display: inline-block; padding: 0.4rem 1rem; background: var(--button-bg);
            color: var(--button-text-color); font-weight: 700; font-size: 0.85rem;
            border-radius: 20px; text-transform: uppercase; margin-bottom: 1rem;
            background-image: var(--button-bg); /* Apply gradient */
        }
        .post-meta {
            display: flex; flex-wrap: wrap; gap: 1.5rem;
            color: rgba(224, 224, 224, 0.7); font-size: 0.95rem; margin-top: 1rem;
        }
        body.light-theme .post-meta { color: #666; }
        .post-meta span { display: flex; align-items: center; gap: 0.5rem; }
        .post-meta i { color: var(--link-color); }

        /* REVERTED: Article Image Styles */
        .post-thumbnail-container {
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-glow);
        }
        .post-thumbnail-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article-content blockquote {
            border-left: 4px solid var(--link-color);
            color: var(--text-color);
            background: var(--card-bg);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 4px;
        }

        /* UPDATED: Headline colors */
        .article-content h2 {
            font-size: 2rem; margin-top: 3rem; margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;
            color: var(--headline-color);
            /* Make H2 Clickable */
            cursor: pointer;
            transition: color 0.2s, text-shadow 0.2s;
        }
        .article-content h2:hover {
             color: var(--link-color);
             text-shadow: 0 0 5px rgba(0, 255, 255, 0.4);
        }
        .article-content h3 { color: var(--heading-color); font-size: 1.5rem; margin-top: 2rem; }
        .article-content ul, .article-content ol { padding-left: 1.5rem; margin-bottom: 1.5rem; }
        /* Changed b color to match the desired highlight color in dark/light mode */
        .article-content b { color: var(--cyan-glow); font-weight: 700; }
        body.light-theme .article-content b { color: var(--link-color); }

        /* TTS Word Highlighting Style */
        .article-content span.tts-highlight {
            background-color: var(--highlight-color);
            border-radius: 2px;
            padding: 2px 0;
            margin: 0;
            transition: background-color 0.05s;
        }
        body.light-theme .article-content span.tts-highlight {
             background-color: var(--highlight-color);
        }

        /* NEW: Button Style */
        .btn-primary {
            background: var(--button-bg); color: var(--button-text-color); border: none;
            padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: 700;
            font-family: 'Orbitron', sans-serif; font-size: 1rem; transition: all 0.3s ease;
            text-transform: uppercase;
        }
        .btn-primary:hover {
            background: var(--button-hover-bg);
            box-shadow: var(--shadow-glow);
        }
        .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }


        /* --- NEW AUDIO WIDGET STYLES (Fixed Position, Glowing) --- */
        #audio-widget-container {
            position: fixed;
            bottom: -150px; /* Start off-screen */
            left: 50%;
            transform: translateX(-50%);
            width: min(90%, 500px);
            padding: 1rem;
            background: var(--audio-widget-bg);
            border: 2px solid var(--link-color);
            border-radius: 12px 12px 0 0;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            z-index: 999;
            transition: bottom 0.5s ease-out;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        #audio-widget-container.active {
            bottom: 0;
        }
        body.light-theme #audio-widget-container {
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.15);
            border-color: var(--link-color);
        }

        .widget-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        #widget-play-pause-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.1rem;
            box-shadow: 0 0 10px var(--cyan-glow);
            animation: pulse-widget 1.5s infinite alternate;
        }
        #widget-play-pause-btn:hover {
            box-shadow: 0 0 15px var(--light-blue-glow);
        }
        @keyframes pulse-widget {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }

        .widget-progress-info {
            flex-grow: 1;
        }

        .widget-progress-container {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            cursor: pointer;
        }
        #widget-audio-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--cyan-glow), var(--light-blue-glow));
            border-radius: 4px;
        }
        .widget-time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 0.2rem;
        }

        #widget-voice-display {
            font-size: 0.9rem;
            color: var(--text-color);
            font-weight: 600;
        }

        /* Initial "Listen" button */
        #initial-listen-cta {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        #initial-listen-cta h3 {
            margin-top: 0;
            font-size: 1.5rem;
        }
        #initial-listen-cta select, #initial-listen-cta button {
            margin-top: 1rem;
        }

        /* Remove old audio player section */
        .audio-player { display: none !important; }

        /* Form Controls */
        .form-input {
            background: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-color);
            display: block; width: 100%; padding: 0.8rem; margin-bottom: 1rem; border-radius: 4px; box-sizing: border-box;
            font-family: 'Times New Roman', serif; /* Use T.N.R. for input */
            font-size: 1rem;
        }
        .form-input:focus {
            border-color: var(--link-color);
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3);
            outline: none;
        }
        textarea.form-input { min-height: 100px; resize: vertical; }

        /* --- COMMENT EDITOR TOOLBAR --- */
        .comment-editor-toolbar {
            display: flex;
            gap: 5px;
            margin-bottom: 0.5rem;
            padding: 5px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            flex-wrap: wrap;
        }
        .comment-editor-toolbar button {
            background: none;
            border: none;
            color: var(--text-color);
            padding: 0.4rem 0.6rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s, color 0.2s;
            line-height: 1;
        }
        .comment-editor-toolbar button:hover {
            background: var(--card-bg);
            color: var(--link-color);
        }
        .comment-editor-toolbar button i {
            font-size: 1rem;
        }


        /* --- Comment Section Styles (Authentication & Likes/Replies) --- */
        .comments-wrapper {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }
        .comments-wrapper h2 {
            font-size: 1.8rem;
            margin-bottom: 2rem;
            border-bottom: none;
        }

        /* New: Authentication Prompt */
        .auth-prompt {
            background: var(--card-bg);
            border: 1px solid var(--link-color);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 3rem;
            text-align: center;
        }
        .auth-prompt h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
        }
        .auth-prompt .guest-comment-link {
            display: block;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .comment-form-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 3rem;
        }
        .comment-form-container h3 {
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
        }

        .comment {
            background: var(--comment-bg); border: 1px solid var(--border-color);
            display: flex; gap: 1rem; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        /* NEW: Reply Indentation */
        .comment.reply {
            margin-left: 50px; /* Indent replies */
            border-left: 4px solid var(--link-hover-color); /* Visual distinction */
            margin-top: -0.5rem; /* Reduce vertical spacing between parent and first reply */
            margin-bottom: 1rem;
        }

        /* NEW: Styling for the dynamic reply/edit form */
        .reply-form-container {
            margin-top: 1rem;
            padding: 1rem;
            border-top: 1px dashed var(--border-color);
            background: var(--bg-color); /* Use base color for subtle contrast */
            border-radius: 4px;
        }
        .reply-form-container .form-input {
            margin-bottom: 0.5rem;
        }

        .comment-avatar {
            width: 45px; height: 45px; border-radius: 50%; background: var(--link-color);
            display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
            color: var(--button-text-color); font-weight: 700; flex-shrink: 0;
        }
        .comment-user {
            font-weight: 600; color: var(--cyan-glow); font-size: 1rem;
            display: inline-block; margin-bottom: 0.3rem;
        }
        body.light-theme .comment-user { color: var(--link-color); }

        /* Standard Verified Badge - Instagram Blue */
        .verified-badge {
            background: var(--verified-color);
            color: white;
            margin-left: 5px;
            font-size: 0.65rem;
            vertical-align: middle;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            line-height: 1;
            transform: translateY(-2px);
        }
        .verified-badge i { font-size: 0.75rem; }

        /* NEW: Admin Verified Badge (Glowing Gold/Cyan) */
        .admin-verified-badge {
            background: linear-gradient(45deg, var(--cyan-glow), var(--admin-color));
            color: var(--button-text-color); /* Dark text on bright badge */
            margin-left: 5px;
            font-size: 0.65rem;
            vertical-align: middle;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 17px; /* Slightly larger */
            height: 17px;
            border-radius: 50%;
            line-height: 1;
            transform: translateY(-2px);
            box-shadow: 0 0 5px var(--admin-glow), 0 0 10px var(--cyan-glow);
        }
        body.light-theme .admin-verified-badge {
             box-shadow: none; /* Turn off glow in light mode */
             background: var(--admin-color);
             color: var(--heading-color);
        }
        .admin-verified-badge i { font-size: 0.8rem; }

        .admin-badge {
            color: gold; margin-left: 5px; font-size: 0.8rem;
            vertical-align: middle;
        }
        .guest-badge {
            color: #999; margin-left: 5px; font-size: 0.8rem;
            vertical-align: middle;
        }
        .comment-meta {
            font-size: 0.85rem;
            color: #888;
            margin-top: 0.5rem;
        }
        .comment-actions {
            font-size: 0.9rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            color: #777;
        }
        .comment-actions button {
            background: none; border: none; color: #777; cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }
        .comment-actions button:hover {
            color: var(--link-color);
        }
        .comment-actions button:disabled {
            color: #555;
            cursor: not-allowed;
            opacity: 0.6;
        }
        .comment-actions i {
            margin-right: 5px;
        }
        .like-btn.liked {
            color: #E91E63;
        }

        .no-comments {
            text-align: center;
            padding: 3rem;
            color: #777;
        }

        /* Modal Styles */
        .link-modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }
        .link-modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        .link-modal-content {
            background: var(--modal-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.4);
            max-width: 400px;
            width: 90%;
            border: 2px solid var(--modal-border);
            text-align: center;
            transform: scale(0.95);
            transition: transform 0.3s;
        }
        .link-modal-overlay.open .link-modal-content {
             transform: scale(1);
        }
        .link-modal-content h3 {
             margin-bottom: 1.5rem;
             color: var(--headline-color);
             font-size: 1.6rem;
        }
        .modal-links a {
             display: block;
             background: var(--button-bg);
             color: var(--button-text-color);
             padding: 0.75rem;
             margin-bottom: 1rem;
             border-radius: 8px;
             font-weight: 700;
             text-decoration: none;
             transition: opacity 0.2s, box-shadow 0.2s;
        }
        .modal-links a:hover {
             opacity: 0.9;
             box-shadow: 0 0 10px var(--cyan-glow);
        }
        .modal-links i {
            margin-right: 10px;
        }

        /* Responsive adjustments (Existing) */
        @media (max-width: 992px) {
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                background: var(--navbar-bg);
                position: absolute;
                top: 100%;
                left: 0;
                padding: 1rem 0;
                border-top: 1px solid var(--border-color);
            }
            .nav-links.active {
                display: flex;
            }
            .nav-links li {
                margin: 0.5rem 2rem;
            }
            .nav-links a::after { display: none; }
            .hamburger { display: flex; }
            .footer .container { grid-template-columns: repeat(2, 1fr); }
            .footer .col:nth-child(1), .footer .col:nth-child(2) { margin-bottom: 1.5rem; }

            #audio-widget-container {
                width: 100%;
                border-left: none;
                border-right: none;
                border-radius: 12px 12px 0 0;
            }
        }

        @media (max-width: 500px) {
            .footer .container { grid-template-columns: 1fr; text-align: center; }
            .footer .col { margin-bottom: 1rem; }
            .comment.reply {
                margin-left: 20px;
            }
        }
    </style>
</head>
<body>

    <header class="navbar">
        <div class="container">
            <a href="index.html" class="navbar-brand">Elvion AI</a>

            <div class="nav-controls">
                <nav class="nav-links">
                    <li><a href="https://elvionai.github.io/university.html">Digital University</a></li>
                    <li><a href="https://elvionai.github.io/blog.html" class="active-link">Back to Blog</a></li>
                    <li><a href="https://elvionai.github.io/about.html">About Us</a></li>
                </nav>
                <button id="theme-toggle" aria-label="Toggle theme">
                    <i class="fas fa-sun"></i>
                </button>
                <button class="hamburger" aria-label="Toggle navigation">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <main class="post-main">
        <div class="post-container">

            <header class="post-header">
                <span class="post-tag">Literature</span>
                <h1>The Art of Building a Reading Habit That Actually Sticks</h1>
                <div class="post-meta">
                    <span><i class="fas fa-user-edit"></i>Kolade Ogunlana
                        <span class="verified-badge" title="Verified Author"><i class="fas fa-check"></i></span>
                    </span>
                    <span><i class="fas fa-calendar-alt"></i> Nov 8, 2025</span>
                    <span id="estimated-time"><i class="fas fa-clock"></i> Calculating read time...</span>
                </div>
            </header>

            <div class="post-thumbnail-container">
                <img src="https://i.postimg.cc/cJLzzHND/20251108-190250.jpg" alt="A photo of a person's hands holding a book open, surrounded by a cozy, inviting reading environment with good lighting, symbolizing the comfort of a good reading habit.">
            </div>

            <section id="initial-listen-cta">
                <h3>ðŸ”Š Listen to this article</h3>
                <div style="display: flex; gap: 1rem; justify-content: center; align-items: center; max-width: 400px; margin: 0 auto;">
                    <select id="voice-select" class="form-input" style="margin-bottom: 0;">
                        <option value="" disabled selected>Select AI Voice...</option>
                        <option value="https://elvionai.github.io/audios/e135afb3-8022-4264-8c80-96491bb1.MP3" data-duration="936.0">Philadelphia (Female)</option>
                        <option value="https://elvionai.github.io/audios/16ff96b5-380c-4bb5-9407-ebbcde90.MP3" data-duration="936.0">Funny Daddy (Male)</option>
                    </select>
                    <select id="speed-select" class="form-input" style="margin-bottom: 0;">
                        <option value="1.0">Normal</option>
                        <option value="0.75">0.75x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                    </select>
                </div>
            </section>

            <article class="article-content" id="article-content">
                <p>Let me guess. You bought that book three months ago. It's sitting on your nightstand right now, judging you. </p>
                <p>Maybe you've even cracked it open a few times. Read the first chapter with all the enthusiasm of someone starting a new diet on January 1st. Then life happened.</p>
                <p>Work got crazy. Netflix released a new season of that show. Your phone buzzed with notifications. And now that book is just <b>expensive furniture</b>, gathering dust and broken promises.</p>
                <p>Trust me, I've been there. We've all been there.</p>
                <p>But here's the thing about reading habits, they're not built on <b>motivation</b>. Motivation is that friend who shows up to the party all excited and then disappears after twenty minutes. Reading habits are built on <b>systems, tiny adjustments, and honestly, a little bit of trickery</b> you play on yourself.</p>
                <p>So, if you're ready to actually become the person who reads regularly, not just the person who buys books and feels guilty about it, buckle up. Because unlike those articles that give you "5 Quick Tips" and send you on your way, we're going <b>deep</b>. </p>

                <h2>Why most reading jabits fail and It's not your fault</h2>
                <p>Before we get into solutions, let's talk about why you keep failing. And no, it's not because you lack discipline or because you're lazy or because you're "just not a reader." </p>
                <p>Most reading habits fail because of <b>three fundamental mistakes</b>:</p>

                <h3>1. You set impossible goals</h3>
                <p>"I'm going to read one book every week!" you declare with the confidence of someone who's never actually tried to read 52 books in a year while holding down a job, maintaining relationships, and occasionally sleeping.</p>
                <p>Look, if you're currently reading zero books a year, jumping to 52 is like deciding to run a marathon when you can't jog around the block. It's not ambition. It's <b>self-sabotage</b> with good intentions.</p>
                <p>Warren Buffett didn't start reading 500 pages a day. He built up to it. Bill Gates didn't wake up one day reading 50 books a year. These habits took time to develop.</p>

                <h3>2. You're reading the wrong books</h3>
                <p>"Everyone says I should read this classic Russian novel about existential dread and the human condition, so I'll start there!"</p>
                <p>No. Stop. Put down the book that's been sitting on your shelf since your college literature class tried to murder your love of reading.</p>
                <p>If the book bores you, if it feels like <b>homework</b>, if you'd rather watch paint dry than turn the next page, it doesn't matter how critically acclaimed it is. <b>Close it. Walk away. Find something you actually enjoy.</b></p>
                <p>Oprah Winfrey learned to read at age 3 and discovered a whole new world through books. You know why? Because she read things that excited her imagination, not things she felt obligated to read.</p>

                <h3>3. You're waiting for the perfect moment</h3>
                <p>"I'll read when I have more time."<br>"I'll start this weekend when things calm down."<br>"Once this project is done, then I'll have space to read."</p>
                <p>Here's a truth bomb, <b>that perfect moment isn't coming</b>. ðŸ’€ðŸ’€ðŸ’€ðŸ’€</p>
                <p>Life doesn't get less busy. It gets more complicated. Waiting for time is like waiting for the ocean to stop having waves. The successful readers don't find time. They <b>make time</b>. They steal it. They protect it like it's made of gold.</p>
                <p>Barack Obama read for at least half an hour every night in the White House, typically until midnight or later. You know, while running an entire country.</p>
                <p>If the <b>President of the United States</b> can find 30 minutes to read, you probably can too.</p>

                <h2>Start Stupidly Small</h2>
                <p>Alright, let's build your reading habit from the ground up. And I mean ground floor. Basement level. Start so small it feels almost <b>insulting</b>.</p>
                <p>James Clear, the guy who literally wrote the book on habits *Atomic Habits*, recommends this: <b>read one page per day</b>.</p>
                <p><b>One. Single. Page.</b></p>
                <p>"But that's nothing!" you're thinking. "At that rate, it'll take me a year to finish a book!" </p>
                <p>Exactly.</p>
                <p>And you know what's better than finishing zero books? Finishing <b>one book in a year</b>. Because once you build the habit of reading one page, you'll naturally read more. Most days you won't stop at one page. But on the crazy days, when everything is falling apart and you're barely holding it together, you can still manage one page.</p>
                <p>The goal isn't the page. The goal is <b>showing up</b>. The goal is making reading so <b>easy</b> that you can't talk yourself out of it.</p>
                <p>Start with just <b>5-10 minutes a day</b> if one page feels too abstract. During breakfast. During your lunch break. Before bed. Just 5 minutes. That's one song. That's one scroll session on social media. You have 5 minutes.</p>
                <p>And here's the secret, once you start, you usually keep going. It's the starting that's hard. The rest takes care of itself.</p>

                <h2>Make your space beg you to read</h2>
                <p>Your environment is either <b>helping you read or sabotaging you</b>. There's no neutral ground.</p>
                <p>Look around your bedroom right now. What's easier to reach from your bed, your book or your phone? </p>
                <p>Yeah. That's what I thought.</p>
                <p>When you make your bed each morning, <b>place a book on your pillow</b>. Just that simple action. Every morning, book on pillow.</p>
                <p>What happens? When you crawl into bed at night, there's a book waiting for you. It's right there. It's obvious. It's in your face. You have to physically move it to go to sleep. And once you're holding it, well, might as well read a page or two.</p>
                <p>This is called "<b>priming your environment</b>," and it works because humans are inherently lazy in the best way. We do whatever requires the least friction.</p>
                
                <p>Other environmental hacks that actually work:</p>
                <ul>
                    <li><b>Create a book nook.</b> Dedicate a specific corner, chair, or spot in your home that's just for reading. Make it comfortable. Add good lighting. Keep books there. Make it inviting. When you sit in that space, your brain knows, we read here.</li>
                    <li><b>Put books everywhere.</b> On your table, By your bathroom, don't judge, some of the best reading happens there. In your car. In your bag. Literally surround yourself with books so they're always within reach.</li>
                    <li><b>Replace your phone with a book on your nightstand.</b> This one's hard, but it's also life-changing. Don't take your phone to bed. Take a book instead. Your sleep will improve. Your anxiety will decrease. And you'll actually read before bed instead of scrolling through other people's lives until 2 AM.</li>
                </ul>

                <h2>Using your phone for good instead of evil</h2>
                <p>Speaking of phones, let's address the elephant in the room. Your phone is the <b>enemy</b> of your reading habit. ðŸ’€ðŸ’€ðŸ’€ðŸ’€</p>
                <p>It's designed to be addictive. Every app you have is engineered by teams of PhDs whose entire job is to keep you scrolling, clicking, and engaged. You're not weak for getting distracted. You're human.</p>
                <p>But here's the move, instead of fighting your phone addiction directly, <b>redirect it</b>.</p>
                <p><b>Move all your reading apps to your home screen.</b> Kindle, audible, apple books, Whatever you use; front and center.</p>
                <p>Then move everything else, social media, games, time-wasters, into folders buried three screens deep.</p>
                <p>Why does this work? Because your brain operates on the <b>path of least resistance</b>. When you unlock your phone and reading apps are right there, you're way more likely to tap them than hunt for Instagram.</p>
                <p>Better yet, <b>keep a PDF of a book on your phone</b>. Seriously. Just one PDF. Whenever you feel the urge to scroll through social media, open the PDF instead. You're still looking at your phone, so your brain gets the dopamine hit of screen time), but you're reading instead of rotting.</p>
                <p>This single hack has saved people hundreds of hours and helped them finish books they otherwise wouldn't have touched.</p>

                <h2>Accountability that doesn't suck</h2>
                <p>Reading doesn't have to be a solo activity. In fact, it probably shouldn't be. </p>
                <p><b>Get a book buddy.</b> Find a friend who also wants to read more. Pick a book together, set a deadline, check in with each other & discuss what you're reading.</p>
                <p>Why does this work? We don't want to let people down. If you tell your friend you'll read 50 pages by Friday, you're way more likely to actually do it than if you just tell yourself.</p>
                <p>Plus, discussing books makes reading <b>more fun</b>. You catch things you missed, you see different perspectives, you remember more of what you read.</p>
                <p>Don't have a friend who reads? <b>Join an online book club.</b> Find a community on reddit, goodreads, or Facebook.</p>
                <p>Engage with bookstagram or book bloggers, the internet is full of people who want to talk about books. Find your people.</p>
                <p>Mark Zuckerberg, when he challenged himself to read a book every week in 2015, didn't do it alone. He created a facebook page called "A year of books" and shared his progress publicly. The <b>accountability</b> kept him going.</p>

                <h2>Why finishing every book Is a trap</h2>
                <p>You don't have to finish every book you start. </p>
                <p>In fact, you shouldn't.</p>
                <p><b>Life's too short to read bad books.</b> Or books that are good but not for you right now. Or books you thought you'd love but actually kind of hate.</p>
                <p>Here's the rule, give a book a fair chance. Read <b>50-100 pages</b>. If it's not clicking, if you're dreading picking it up, if it feels like a chore, <b>close it. Put it down, move on.</b></p>
                <p>This isn't failure. This is curation. This is respecting your time and attention.</p>
                <p>The fastest way to kill your reading habit is to force yourself through books you hate. Because then reading becomes <b>punishment</b>. It becomes something you avoid. And then you stop reading altogether.</p>
                <p>Some books aren't meant for you. Some books are meant for you but not right now. Some books are just bad. All of that is okay, permission granted to quit.</p>

                <h2>The calendar hack</h2>
                <p>Get a <b>wall calendar</b>. It can be digital or physical, but physical hits different.</p>
                <p>Every day you read, even if it's just one page, <b>mark that day with a bright green or blue marker</b>, fill it in completely, make it satisfying.</p>
                <p>If you miss a day, put a big red X through it and write down how many consecutive days you had before the miss.</p>

                <p>Why does this work? Two reasons:</p>
                <ol>
                    <li>You get a <b>visual representation</b> of your habit, you can see your progress. You can see the streak building, it's tangible; it's real.</li>
                    <li>Your brain hates breaking streaks. Once you get 5 days, then 10 days, then 15 days in a row, <b>you don't want to break the chain</b>. That momentum becomes self-sustaining. You read not because you feel motivated, but because you don't want to ruin your streak.</li>
                </ol>
                <p>This is the same psychological principle that makes apps like Duolingo so addictive. They know if they can get you to a 30-day streak, you'll keep going just to protect the streak.</p>

                <h2>The "read in bursts" strategy: For the actually busy People</h2>
                <p>Maybe you genuinely don't have consistent time every day. Maybe your schedule is chaos. Maybe some days are packed and others are open. </p>
                <p>That's okay. Use the "<b>read in bursts</b>" strategy.</p>
                <p>Instead of trying to read 30 minutes every single day which might not be realistic for you, <b>identify the days when you have more flexibility and go deep</b>. Read for 2-3 hours on those days.</p>
                <p>For example, maybe your weekdays are brutal, but your weekends are open. Don't force yourself to read on Tuesday when you're exhausted and overwhelmed. But on saturday morning, go to a canteen and <b>read for three hours</b>.</p>
                <p>Or maybe mondays are your slow day, block off monday morning for reading, <b>protect that time, make it sacred</b>.</p>
                <p>The key is consistency of the habit, not consistency of the daily time. If reading in bursts works better for your life, do that. The goal is to read regularly, not to conform to someone else's schedule.</p>

                <h2>Why variety keeps you hooked</h2>
                <p>Don't just read one type of book. Don't lock yourself into a genre. </p>
                <p><b>Mix it up</b>, read fiction and nonfiction. Read history and science, memoirs and fantasy, poetry and business books, humor and horror.</p>

                <p>Why?</p>
                <p>Because <b>different books serve different needs</b>. And when you're bored with one genre, you can switch to another instead of stopping reading altogether.</p>
                <p>Sometimes you want to escape into a story, learn something new, be challenged intellectually, or you just want to laugh.</p>
                <p>Having a <b>variety of books</b> on your reading list means you always have something that matches your mood. You're never stuck forcing yourself through a book that doesn't fit how you're feeling.</p>

                <h2>How to remember what you read</h2>
                <p>Here's a problem nobody talks about, you read a book, you love it, and then two months later you can't remember what it was about. </p>
                <p>This is normal, your brain forgets things, that's not a bug, it's a feature. Your brain is protecting you from information overload.</p>
                <p>But if you want reading to actually <b>change you</b>, to actually stick, you need to engage with it more deeply than just moving your eyes across the page.</p>
                <p><b>Read with a pencil</b>, underline passages that resonate, write notes in the margins. Argue with the author, question claims, connect ideas.</p>
                <p>This physical interaction with the text creates <b>stronger memories</b>. It forces you to slow down. It makes you think.</p>
                <p>After you finish a book, <b>write a tiny book report</b>. Not an essay, just 3-5 sentences about what you learned, what surprised you, what you disagreed with, or how you'll apply it.</p>
                <p>This act of <b>synthesis</b>, of putting the ideas in your own words, is what moves information from short-term memory to long-term understanding.</p>
                <p>Reading without reflection is just entertainment, reading with reflection is <b>education</b>.</p>

                <h2>Reading with your ears</h2>
                <p>Let's address a controversial topic, are audiobooks "<b>real reading</b>?" </p>
                <p><b>Yes, obviously, stop being weird about it.</b></p>
                <p>Audiobooks aren't cheating. They're not lesser. They're just a <b>different format</b>. And for some people, for some situations, they're actually better.</p>
                <p>If you commute, audiobooks are a game-changer. If you exercise, audiobooks turn workout time into learning time. If you do household chores, audiobooks make folding laundry bearable.</p>
                <p>Some books are better as audiobooks, memoirs narrated by the author. Fiction with great narration, self-help books you can listen to while doing other things.</p>
                <p>Download audiobook apps, load them up, listen on the go.</p>
                <p>If your excuse for not reading is "I don't have time to sit down with a book," <b>audiobooks eliminate that excuse entirely</b>.</p>

                <h2>The hard truth, you have to want It.</h2>
                <p>Look, I can give you all the strategies in the world. I can show you what Warren buffett, Bill gates, Oprah winfrey, and Elon musk do. I can explain the psychology, the hacks, the systems. ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥</p>
                <p>But none of it matters if you <b>don't actually want to read</b>.</p>
                <p>You have to decide that reading is <b>important, valuable, and worth your time and attention</b>.</p>
                <p>You have to decide that learning, growing, expanding your perspective, and feeding your mind matters more than scrolling through Instagram for the 47th time today.</p>
                <p>Reading isn't a magic pill, it won't solve all your problems. It won't make you instantly successful or happy or enlightened.</p>
                <p>But it will make you <b>smarter, more empathetic, knowledgeable, interesting, thoughtful, more you; but better</b>.</p>
                <p>As <b>Warren Buffett</b> said, "knowledge builds up like compound interest. Every page you read, every book you finish, every idea you absorb, it all stacks. Over weeks, months, years, decades, that compounding creates something extraordinary."</p>
                <p>But it only works if you <b>start</b>. And it only sticks if you <b>keep going</b>. </p>

                <p>So here's what you're going to do,</p>
                <p>Not tomorrow, next week or when things "calm down." <b>Today, right now</b>. </p>
                <ol>
                    <li><b>Pick one book</b>, not ten books, <b>one</b>. Something you're actually excited about. Sounds fun or interesting or useful, not something you feel like you "should" read.</li>
                    <li><b>Commit to one page per day.</b> Just one. Set the bar so low you can't fail.</li>
                    <li><b>Put that book somewhere you'll see it.</b> On your pillow, next to your table, on your desk, make it visible.</li>
                    <li><b>Read that one page today</b>, before you go to bed tonight, <b>one page</b>.</li>
                    <li><b>Mark today on a calendar</b>, start your streak.</li>
                </ol>
                <p>That's it, that's the whole plan.</p>
                <p>Don't overthink it or make it complicated. Don't create some elaborate system before you've even started.</p>
                <p>Just read one page.</p>
                <p>Tomorrow, read one page again. And the day after that, and the day after that.</p>
                <p>Most days you'll read more than one page, some days you'll read 50 pages, other days you'll get so sucked into a book you'll finish it in one sitting.</p>
                <p>But on the hard days, on the days when everything goes wrong, you'll still read that one page. And that <b>one page keeps the habit alive</b>.</p>
                <p>Six months from now, you'll have read multiple books. You'll have a streak you're proud of, a knowledge you didn't have before, you'll be different.</p>
                <p>Not because you're special, but because you <b>showed up, every single day</b>.</p>
                <p>That's how you build a reading habit that actually sticks.</p>
                <p>Now stop reading this article and go read your actual book. </p>
            </article>

            <div style="text-align: center; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                <a href="https://elvionai.github.io/blog.html" class="btn-primary" role="button">
                    <i class="fas fa-book-reader"></i> Find Your Next Read
                </a>
            </div>

            <section class="comments-wrapper" id="comments">
                <h2>ðŸ’¬ Join the Conversation (<span id="comment-count">0</span> Comments)</h2>

                <div id="auth-prompt" class="auth-prompt">
                    <h3>Join the discussion!</h3>
                    <p>Sign in to post, like, and reply with a verified profile, or comment as a guest.</p>
                    <button id="google-sign-in-btn" class="btn-primary" style="background: #DB4437; background-image: none;">
                        <i class="fab fa-google"></i> Sign in with Google
                    </button>
                    <a href="#" id="guest-comment-link" class="guest-comment-link">Or, comment as a Guest User (No likes/replies)</a>
                    <p id="auth-status" style="margin-top: 1rem; font-size: 0.9rem;"></p>
                </div>

                <div class="comment-form-container" id="comment-form-container" style="display: none;">
                    <h3>Leave a Comment As <span id="current-user-name" style="color: var(--link-color);"></span></h3>
                    <form id="comment-form">
                        <div id="guest-name-input" style="display: none; margin-bottom: 1rem;">
                            <label for="guest-name-field" class="form-label">Your Name <span style="color: red;">*</span></label>
                            <input type="text" id="guest-name-field" class="form-input" placeholder="Enter a name to display" required>
                        </div>

                        <div class="comment-editor-toolbar">
                            <button type="button" data-format="bold" aria-label="Bold"><i class="fas fa-bold"></i></button>
                            <button type="button" data-format="italic" aria-label="Italic"><i class="fas fa-italic"></i></button>
                            <button type="button" data-format="link" aria-label="Insert Link"><i class="fas fa-link"></i></button>
                            <button type="button" data-format="blockquote" aria-label="Insert Blockquote"><i class="fas fa-quote-left"></i></button>
                            <span style="margin-left: auto; font-size: 0.9rem; color: #777;">Formatting: **B**, _I_, >Q</span>
                        </div>

                        <div>
                            <label for="comment-input-text" class="form-label">Share your thoughts <span style="color: red;">*</span></label>
                            <textarea id="comment-input-text" class="form-input" placeholder="What did you think? Use the toolbar above for formatting!" required></textarea>
                        </div>
                        <button type="submit" id="comment-button" class="btn-primary">
                            <i class="fas fa-paper-plane"></i> Post Comment
                        </button>
                    </form>
                </div>

                <div id="comment-list-container">
                    <div id="comment-list">
                        <p class="loading-message" style="text-align: center; color: #777;">Loading comments...</p>
                    </div>
                </div>

            </section>

        </div>
    </main>

    <div class="link-modal-overlay" id="linkModalOverlay">
        <div class="link-modal-content">
            <h3 id="modalBookTitle">Get Book Here</h3>
            <div class="modal-links">
                </div>
            <button class="btn-primary" onclick="document.getElementById('linkModalOverlay').classList.remove('open');" style="background: #555; background-image: none; margin-top: 1rem;">Close</button>
        </div>
    </div>

    <div id="audio-widget-container">
        <div id="widget-voice-display">Ready to play.</div>
        <div class="widget-controls">
            <button id="widget-play-pause-btn" class="btn-primary" aria-label="Play audio">
                <i class="fas fa-play"></i>
            </button>
            <div class="widget-progress-info">
                <div class="widget-progress-container" id="widget-progress-container">
                    <div id="widget-audio-progress-bar"></div>
                </div>
                <div class="widget-time-info">
                    <span id="widget-current-time">0:00</span>
                    <span id="widget-duration">0:00</span>
                </div>
            </div>
            <button id="widget-close-btn" class="btn-primary" onclick="resetPlayer(); document.getElementById('audio-widget-container').classList.remove('active');" style="background: #dc3545; background-image: none; width: 45px; height: 45px; border-radius: 50%; padding: 0;" aria-label="Close audio player">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>


    <footer class="footer">
        <div class="container">
            <div class="col">
                <span class="brand-info">Elvion AI</span>
                <p>Where Assistance Meets Excellence.</p>
            </div>
            <div class="col">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="https://elvionai.github.io/index.html#hero">Home</a></li>
                    <li><a href="https://elvionai.github.io/blog.html">Blog</a></li>
                    <li><a href="https://elvionai.github.io/university.html">University</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Company</h4>
                <ul>
                    <li><a href="https://elvionai.github.io/about.html">About Us</a></li>
                    <li><a href="mailto:contact@elvionai.com">Contact Us</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="https://elvionai.github.io/privacy.html">Privacy Policy</a></li>
                    <li><a href="https://elvionai.github.io/terms.html">Terms of Service</a></li>
                </ul>
            </div>
            <div class="legal-info">
                &copy; <span id="current-year-footer"></span> Elvion AI. All rights reserved.
            </div>
        </div>
    </footer>

    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js"></script>

    <script>
        // --- THEME TOGGLE & NAV SCRIPT (Existing) ---
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const toggleButton = document.getElementById('theme-toggle');
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');

            const savedTheme = localStorage.getItem('theme') || 'dark';

            function applyTheme(theme) {
                if (theme === 'light') {
                    body.classList.add('light-theme');
                    toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    body.classList.remove('light-theme');
                    toggleButton.innerHTML = '<i class="fas fa-sun"></i>';
                }
                localStorage.setItem('theme', theme);
            }

            applyTheme(savedTheme);

            toggleButton.addEventListener('click', () => {
                const currentTheme = body.classList.contains('light-theme') ? 'light' : 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
            });
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 992) {
                        hamburger.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
            });

            document.getElementById('current-year-footer').textContent = new Date().getFullYear();
        });
    </script>

    <script>
        // --- BOOK LINK DATA (Placeholder since this article is about habits, not specific books) ---
        // If specific book titles were mentioned, the user would need to provide the Amazon/Goodreads links
        const BOOK_LINKS = {
            atomichabits: {
                title: "Atomic Habits by James Clear",
                amazon: "https://www.amazon.com/Atomic-Habits-Proven-Build-Break/dp/0735211299",
                goodreads: "https://www.goodreads.com/book/show/40121378-atomic-habits"
            }
        };

        // --- MODAL JS LOGIC (Minimal for non-book article) ---
        document.addEventListener('DOMContentLoaded', () => {
            const modalOverlay = document.getElementById('linkModalOverlay');
            const modalTitle = document.getElementById('modalBookTitle');
            const modalLinksContainer = modalOverlay.querySelector('.modal-links');
            // Check for any specific book callouts that might use data-book-id
            const clickableTitles = document.querySelectorAll('.article-content h2[data-book-id]');

            clickableTitles.forEach(h2 => {
                h2.addEventListener('click', (e) => {
                    const bookId = e.currentTarget.getAttribute('data-book-id');
                    const book = BOOK_LINKS[bookId];

                    if (book) {
                        modalTitle.textContent = book.title;
                        modalLinksContainer.innerHTML = `
                            <a href="${book.amazon}" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-amazon"></i> Buy on Amazon
                            </a>
                            <a href="${book.goodreads}" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-goodreads"></i> See on Goodreads
                            </a>
                        `;
                        modalOverlay.classList.add('open');
                    }
                });
            });

            // Close modal when clicking outside
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    modalOverlay.classList.remove('open');
                }
            });
        });

        // --- WORD-FOR-WORD TEXT TO SPEECH SCRIPT ---
        document.addEventListener('DOMContentLoaded', () => {
            const voiceSelect = document.getElementById('voice-select');
            const speedSelect = document.getElementById('speed-select');
            const articleContent = document.getElementById('article-content');
            const estimatedTimeEl = document.getElementById('estimated-time');

            // Widget Elements
            const widgetContainer = document.getElementById('audio-widget-container');
            const widgetPlayPauseBtn = document.getElementById('widget-play-pause-btn');
            const widgetCloseBtn = document.getElementById('widget-close-btn');
            const widgetProgressBar = document.getElementById('widget-audio-progress-bar');
            const widgetProgressContainer = document.getElementById('widget-progress-container');
            const widgetCurrentTimeEl = document.getElementById('widget-current-time');
            const widgetDurationEl = document.getElementById('widget-duration');
            const widgetVoiceDisplay = document.getElementById('widget-voice-display');

            // Data
            const WPM = 200;
            let ALL_WORD_SPANS = [];
            let TOTAL_WORD_COUNT = 0;

            let audio = new Audio();
            let isPlaying = false;
            let currentWordIndex = -1;
            let currentTTSDuration = 0;
            let wordTimings = [];

            // --- 1. Content Processing: Dynamic Span Injection (CRITICAL FOR HIGHLIGHTING) ---

            function processNode(node) {
                if (node.nodeType === 3) { // Text node
                    const text = node.textContent;
                    if (text.trim().length > 0) {
                        // Regex to wrap non-whitespace sequences in span
                        return text.replace(/([^\s]+)/g, '<span class="word-content">$&</span>');
                    }
                    return text; // Return original if just whitespace
                } else if (node.nodeType === 1) { // Element node (e.g., <b>, <i>, <a>, <h2>, <li>)
                    // Recurse for elements, re-creating the structure and processing children
                    const clone = node.cloneNode(false); // Clone the element tag, but not its children
                    let newContent = '';
                    Array.from(node.childNodes).forEach(child => {
                        newContent += processNode(child);
                    });
                    clone.innerHTML = newContent; // Update the cloned element's content
                    return clone.outerHTML; // Return the full element HTML
                }
                return '';
            }

            function wrapWordsInSpans(element) {
                // Target all structural elements that contain readable text
                const elementsToScan = element.querySelectorAll('p, li, blockquote, h2, h3');

                elementsToScan.forEach(el => {
                    let newHtml = '';
                    Array.from(el.childNodes).forEach(node => {
                        newHtml += processNode(node);
                    });
                    el.innerHTML = newHtml;
                });

                // Final Recalculation after DOM manipulation
                ALL_WORD_SPANS = Array.from(articleContent.querySelectorAll('.word-content'));
                TOTAL_WORD_COUNT = ALL_WORD_SPANS.length;
                calculateReadTime();
            }

            function formatTime(seconds) {
                const min = Math.floor(seconds / 60);
                const sec = Math.floor(seconds % 60);
                return `${min}:${sec.toString().padStart(2, '0')}`;
            }

            function calculateReadTime() {
                const readTimeMinutes = Math.ceil(TOTAL_WORD_COUNT / WPM);
                estimatedTimeEl.innerHTML = `<i class="fas fa-clock"></i> ${readTimeMinutes} min read`;
            }

            function generateWordTimings(duration) {
                if (TOTAL_WORD_COUNT === 0 || duration === 0) return [];

                const averageWordTime = duration / TOTAL_WORD_COUNT;
                const timings = [];
                let currentTime = 0;

                for (let i = 0; i < TOTAL_WORD_COUNT; i++) {
                    const wordDuration = averageWordTime;
                    const endTime = currentTime + wordDuration;

                    timings.push({
                        start: currentTime,
                        end: endTime,
                        index: i
                    });
                    currentTime = endTime;
                }
                return timings;
            }

            // --- 2. Player Controls & Highlighting ---

            function removeHighlighting() {
                ALL_WORD_SPANS.forEach(span => span.classList.remove('tts-highlight'));
            }

            function updateWidgetDisplay() {
                 widgetContainer.classList.add('active');
                 const selectedOption = voiceSelect.options[voiceSelect.selectedIndex];
                 widgetVoiceDisplay.textContent = selectedOption.text;
            }

            function resetPlayer() {
                isPlaying = false;
                widgetPlayPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                widgetPlayPauseBtn.setAttribute('aria-label', 'Play audio');
                audio.pause();
                audio.currentTime = 0;
                widgetProgressBar.style.width = '0%';
                widgetCurrentTimeEl.textContent = '0:00';
                removeHighlighting();
                currentWordIndex = -1;
            }

            window.resetPlayer = resetPlayer; // Expose to global scope for modal closing

            function seekAudio(event) {
                if (!audio.src || isNaN(audio.duration) || audio.duration === 0) return;
                const rect = widgetProgressContainer.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const width = rect.width;
                const seekTime = (clickX / width) * audio.duration;
                audio.currentTime = seekTime;

                highlightWordByTime(seekTime);
            }

            function highlightWordByTime(time) {
                if (wordTimings.length === 0) return;

                const targetWord = wordTimings.find(t => time >= t.start && time < t.end);

                let targetIndex = targetWord ? targetWord.index : -1;

                if (time >= currentTTSDuration) {
                    targetIndex = -1;
                }

                if (targetIndex !== currentWordIndex) {
                    removeHighlighting();
                    currentWordIndex = targetIndex;

                    if (currentWordIndex >= 0 && currentWordIndex < ALL_WORD_SPANS.length) {
                        const wordSpan = ALL_WORD_SPANS[currentWordIndex];
                        wordSpan.classList.add('tts-highlight');

                        const parentEl = wordSpan.closest('p, li, blockquote, h2, h3');
                        if (parentEl) {
                            const rect = parentEl.getBoundingClientRect();
                            const viewportHeight = window.innerHeight;

                            if (rect.top < viewportHeight * 0.25 || rect.bottom > viewportHeight * 0.75) {
                                parentEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                        }
                    }
                }
            }

            function updateProgress() {
                if (isNaN(audio.duration) || audio.duration === 0) return;
                const progress = (audio.currentTime / audio.duration) * 100;
                widgetProgressBar.style.width = `${progress}%`;
                widgetCurrentTimeEl.textContent = formatTime(audio.currentTime);

                highlightWordByTime(audio.currentTime);
            }

            // --- 3. Event Listeners ---

            voiceSelect.addEventListener('change', () => {
                resetPlayer();

                const selectedOption = voiceSelect.options[voiceSelect.selectedIndex];
                const audioSrc = selectedOption.value;
                currentTTSDuration = parseFloat(selectedOption.dataset.duration || 0);

                if (audioSrc && currentTTSDuration > 0) {
                    audio.src = audioSrc;
                    wordTimings = generateWordTimings(currentTTSDuration);

                    widgetDurationEl.textContent = formatTime(currentTTSDuration);
                    updateWidgetDisplay();
                    audio.playbackRate = parseFloat(speedSelect.value);

                    widgetVoiceDisplay.textContent = `Ready: ${selectedOption.text}`;
                } else {
                    widgetContainer.classList.remove('active');
                }
            });

            speedSelect.addEventListener('change', () => {
                audio.playbackRate = parseFloat(speedSelect.value);
                if(isPlaying) {
                    widgetVoiceDisplay.textContent = `${voiceSelect.options[voiceSelect.selectedIndex].text} @ ${speedSelect.value}x speed...`;
                }
            });

            widgetPlayPauseBtn.addEventListener('click', () => {
                if (!audio.src) return;

                if (!isPlaying) {
                    isPlaying = true;
                    audio.play().catch(e => console.error("Audio play failed:", e));
                    widgetPlayPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    widgetPlayPauseBtn.setAttribute('aria-label', 'Pause audio');
                    widgetVoiceDisplay.textContent = `${voiceSelect.options[voiceSelect.selectedIndex].text} @ ${audio.playbackRate}x speed...`;
                } else {
                    isPlaying = false;
                    audio.pause();
                    widgetPlayPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                    widgetPlayPauseBtn.setAttribute('aria-label', 'Play audio');
                    widgetVoiceDisplay.textContent = "Paused";
                }
            });

            widgetCloseBtn.addEventListener('click', () => {
                resetPlayer();
                widgetContainer.classList.remove('active');
                voiceSelect.selectedIndex = 0;
            });

            widgetProgressContainer.addEventListener('click', seekAudio);

            audio.addEventListener('loadedmetadata', () => {
                if (audio.duration && currentTTSDuration === 0) {
                    currentTTSDuration = audio.duration;
                    widgetDurationEl.textContent = formatTime(audio.duration);
                    wordTimings = generateWordTimings(currentTTSDuration);
                }
            });

            audio.addEventListener('timeupdate', updateProgress);

            audio.onended = () => {
                resetPlayer();
                widgetVoiceDisplay.textContent = "Finished reading.";
            };

            // Initial load: Process content first
            wrapWordsInSpans(articleContent);
        });
    </script>

    <script>
        // --- COMMENT EDITOR TOOLBAR LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            // Expose formatting function globally for use by the generic toolbar listener
            window.applyFormatting = (textarea, format) => {
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const value = textarea.value;
                const selectedText = value.substring(start, end);
                let formattedText = selectedText;
                let wrap = '';

                switch (format) {
                    case 'bold':
                        wrap = '**';
                        formattedText = wrap + selectedText + wrap;
                        break;
                    case 'italic':
                        wrap = '_';
                        formattedText = wrap + selectedText + wrap;
                        break;
                    case 'blockquote':
                        wrap = '>';
                        // Ensure blockquote starts on a new line and formats multiple lines
                        const prefix = (start > 0 && value[start - 1] !== '\n') ? '\n' : '';
                        formattedText = prefix + wrap + ' ' + selectedText.replace(/\n/g, '\n> ');
                        break;
                    case 'link':
                        const linkUrl = prompt("Enter URL:", "https://");
                        if (linkUrl) {
                            const linkText = selectedText || "link text";
                            formattedText = `[${linkText}](${linkUrl})`;
                        } else {
                            return;
                        }
                        break;
                }

                textarea.value = value.substring(0, start) + formattedText + value.substring(end);
                textarea.focus();

                // Cursor/Selection positioning logic
                if (wrap && selectedText === "") {
                    // Place cursor inside the new wrap markers for B/I/Q
                    textarea.selectionStart = start + wrap.length + (format === 'blockquote' ? 1 : 0);
                    textarea.selectionEnd = start + wrap.length + (format === 'blockquote' ? 1 : 0);
                } else if (wrap || format === 'link') {
                    // Select the newly formatted text
                    textarea.selectionStart = start;
                    textarea.selectionEnd = start + formattedText.length;
                }
            };

            document.querySelectorAll('.comment-editor-toolbar button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const format = e.currentTarget.dataset.format;
                    const formContainer = e.currentTarget.closest('.comment-form-container') || e.currentTarget.closest('.reply-form-container');

                    let textarea;
                    if (formContainer.id === 'comment-form-container') {
                         textarea = document.getElementById('comment-input-text');
                    } else if (formContainer) {
                         textarea = formContainer.querySelector('textarea');
                    }

                    if (textarea && window.applyFormatting) {
                        window.applyFormatting(textarea, format);
                    }
                });
            });
        });
    </script>


    <script type="module">
        // --- FIREBASE/COMMENT SCRIPT ---

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
        import {
            getFirestore, collection, addDoc, query, where,
            onSnapshot, doc, arrayUnion, arrayRemove, runTransaction, serverTimestamp,
            setDoc, deleteDoc, getDoc
        } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

        // --- 0. CONFIG & INITIALIZATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
            authDomain: "elvionai.firebaseapp.com",
            projectId: "elvionai",
            storageBucket: "elvionai.firebasestorage.app",
            messagingSenderId: "161078300830",
            appId: "1:161077300830:web:f460df8591704eb0e96b8f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const ARTICLE_ID = 'reading-habit-stick-04'; // Article ID

        const ADMIN_EMAIL = 'koladhino@gmail.com';

        // --- 1. DOM Elements (omitted for brevity, assume linked correctly) ---
        const commentForm = document.getElementById('comment-form');
        const commentTextInput = document.getElementById('comment-input-text');
        const commentList = document.getElementById('comment-list');
        const commentCountEl = document.getElementById('comment-count');
        const submitBtn = document.getElementById('comment-button');
        const authPrompt = document.getElementById('auth-prompt');
        const commentFormContainer = document.getElementById('comment-form-container');
        const googleSignInBtn = document.getElementById('google-sign-in-btn');
        const currentUserNameEl = document.getElementById('current-user-name');
        const guestCommentLink = document.getElementById('guest-comment-link');
        const guestNameInputDiv = document.getElementById('guest-name-input');
        const guestNameField = document.getElementById('guest-name-field');

        let currentUser = null;
        let isGuestMode = false;
        let currentReplyToId = null;

        // --- 2. Authentication & Guest Logic (SetAuthState now checks Admin status) ---

        function setAuthState(user) {
            currentUser = user;

            document.querySelectorAll('.reply-form-container').forEach(el => el.remove());
            currentReplyToId = null;

            if (user) {
                isGuestMode = false;
                authPrompt.style.display = 'none';
                commentFormContainer.style.display = 'block';
                currentUserNameEl.textContent = user.displayName || user.email;
                guestNameInputDiv.style.display = 'none';
                guestNameField.removeAttribute('required');
                guestNameField.value = '';
            } else {
                if (!isGuestMode) {
                    authPrompt.style.display = 'block';
                    commentFormContainer.style.display = 'none';
                    currentUserNameEl.textContent = 'Guest';
                    guestNameInputDiv.style.display = 'none';
                } else {
                    authPrompt.style.display = 'none';
                    commentFormContainer.style.display = 'block';
                    currentUserNameEl.textContent = 'Guest User';
                    guestNameInputDiv.style.display = 'block';
                    guestNameField.setAttribute('required', 'required');
                }
            }
            loadComments();
        }

        guestCommentLink.addEventListener('click', (e) => {
            e.preventDefault();
            isGuestMode = true;
            setAuthState(null);
            guestNameField.focus();
        });

        googleSignInBtn.addEventListener('click', async () => {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error("Google Sign-In Error:", error);
            }
        });

        onAuthStateChanged(auth, user => {
            setAuthState(user);
        });

        // --- 3. Comment Display & Actions (Updated for Admin Delete) ---

        function createCommentElement(comment) {
            const div = document.createElement('div');
            div.className = 'comment';

            if (comment.parentId) {
                div.classList.add('reply');
            }

            const userName = escapeHtml(comment.userName) || 'Anonymous';
            const initial = userName.charAt(0).toUpperCase();

            let timestampString;
            if (comment.timestamp && typeof comment.timestamp.toDate === 'function') {
                timestampString = new Date(comment.timestamp.toDate()).toLocaleString();
            } else if (comment.timestamp) {
                const date = comment.timestamp || new Date();
                timestampString = date instanceof Date ? date.toLocaleString() : 'Just now';
            } else {
                timestampString = 'Pending...';
            }

            let badge = '';
            const isAdmin = currentUser && currentUser.email === ADMIN_EMAIL;

            if (comment.userEmail === ADMIN_EMAIL) {
                 // NEW: Apply glowing admin badge
                 badge = '<span class="admin-verified-badge" title="Verified Admin"><i class="fas fa-crown"></i></span>';
            } else if (comment.userId && comment.userId !== 'guest') {
                // Standard Verified Badge
                badge = '<span class="verified-badge" title="Verified User"><i class="fas fa-check"></i></span>';
            } else {
                badge = '<span class="guest-badge" title="Guest User"><i class="fas fa-user-tag"></i> Guest</span>';
            }

            const isLiked = currentUser && !isGuestMode && comment.likes && comment.likes.includes(currentUser.uid);
            const likeCount = comment.likes ? comment.likes.length : 0;

            const canPerformAction = currentUser && !isGuestMode;
            const actionDisabled = !canPerformAction;

            // Can modify if they are the poster OR if the current user is an Admin
            const canModify = (currentUser && comment.userId === currentUser.uid) || isAdmin;
            const canDelete = canModify; // Admin can delete anyone's comment. User can delete their own.

            const processedText = formatCommentText(comment.text);

            div.innerHTML = `
                <div class="comment-avatar">${initial}</div>
                <div class="comment-content" style="flex-grow: 1;" data-comment-id="${comment.id}">
                    <span class="comment-user">${userName}</span>${badge}
                    ${comment.editedAt ? '<span class="guest-badge" style="margin-left: 5px;">(edited)</span>' : ''}
                    <p class="comment-text">${processedText}</p>
                    <div class="comment-meta">ðŸ• ${timestampString}</div>
                    <div class="comment-actions">
                        <button class="like-btn ${isLiked ? 'liked' : ''}" data-comment-id="${comment.id}" ${actionDisabled ? 'disabled' : ''}>
                            <i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
                            <span>Like</span> (<span class="like-count">${likeCount}</span>)
                        </button>
                        <button class="reply-btn" data-comment-id="${comment.id}" ${actionDisabled ? 'disabled' : ''}>
                            <i class="fas fa-reply"></i> Reply
                        </button>
                        ${canModify ? `<button class="edit-btn" data-comment-id="${comment.id}"><i class="fas fa-edit"></i> Edit</button>` : ''}
                        ${canDelete ? `<button class="delete-btn" data-comment-id="${comment.id}" style="color: #dc3545;"><i class="fas fa-trash-alt"></i> Delete</button>` : ''}
                    </div>

                    </div>
            `;

            // Add listeners for actions
            const likeBtn = div.querySelector('.like-btn');
            if (likeBtn && !actionDisabled) {
                likeBtn.addEventListener('click', () => toggleLike(comment.id, likeBtn));
            }

            const editBtn = div.querySelector('.edit-btn');
            if (editBtn) {
                editBtn.addEventListener('click', () => handleEditButtonClick(comment.id, comment.text));
            }

            const deleteBtn = div.querySelector('.delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', () => deleteComment(comment.id));
            }

            return div;
        }

        function renderComments(comments) {
            commentList.innerHTML = '';

            const topLevelComments = comments.filter(c => !c.parentId);
            const repliesByParentId = comments
                .filter(c => c.parentId)
                .reduce((acc, reply) => {
                    acc[reply.parentId] = acc[reply.parentId] || [];
                    acc[reply.parentId].push(reply);
                    return acc;
                }, {});

            topLevelComments.forEach(comment => {
                const topEl = createCommentElement(comment);
                commentList.appendChild(topEl);

                const replyBtn = topEl.querySelector('.reply-btn');
                if (replyBtn) {
                     replyBtn.addEventListener('click', (e) => handleReplyButtonClick(e));
                }

                const replies = repliesByParentId[comment.id] || [];
                replies.forEach(reply => {
                    const replyEl = createCommentElement(reply);
                    commentList.appendChild(replyEl);

                    const nestedReplyBtn = replyEl.querySelector('.reply-btn');
                    if (nestedReplyBtn) {
                        nestedReplyBtn.addEventListener('click', (e) => handleReplyButtonClick(e));
                    }
                });
            });

            if (comments.length === 0) {
                commentList.innerHTML = `
                    <div class="no-comments">
                        <i class="fas fa-comments" style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem; display: block;"></i>
                        <p>No comments yet. Be the first to share your thoughts! ðŸŒŸ</p>
                    </div>
                `;
            }
        }


        function loadComments() {
             const q = query(collection(db, 'comments'),
                             where('articleId', '==', ARTICLE_ID));

             commentList.innerHTML = `<p class="loading-message" style="text-align: center; color: #777;">Loading comments...</p>`;


             onSnapshot(q, (snapshot) => {
                    commentList.innerHTML = '';

                    if (snapshot.empty) {
                        commentList.innerHTML = `
                            <div class="no-comments">
                                <i class="fas fa-comments" style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem; display: block;"></i>
                                <p>No comments yet. Be the first to share your thoughts! ðŸŒŸ</p>
                            </div>
                        `;
                        commentCountEl.textContent = '0';
                        return;
                    }

                    commentCountEl.textContent = snapshot.size;

                    const sortedDocs = snapshot.docs.sort((a, b) => {
                        const timeA = a.data().timestamp;
                        const timeB = b.data().timestamp;

                        const dateA = timeA && timeA.toDate ? timeA.toDate() : new Date(0);
                        const dateB = timeB && timeB.toDate ? timeB.toDate() : new Date(0);

                        return dateB - dateA; // Sort descending (newest first)
                    });

                    const comments = sortedDocs.map(doc => ({ id: doc.id, ...doc.data() }));
                    renderComments(comments);

                }, error => {
                    console.error("Error loading comments:", error);
                    commentList.innerHTML = `<p class="loading-message" style="color: red;">Failed to load comments. (Check Firestore Security Rules)</p>`;
                });
        }

        // --- 4. Comment Submission & Actions ---

        commentForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!currentUser && !isGuestMode) {
                console.warn('User must sign in or choose to comment as a Guest!');
                return;
            }

            const commentText = commentTextInput.value.trim();

            if (!commentText) {
                console.warn('Comment text is empty.');
                return;
            }

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Posting...';

            let commentData = {};

            if (isGuestMode) {
                const guestName = guestNameField.value.trim();
                if (!guestName) {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Post Comment';
                    return;
                }
                commentData = {
                    articleId: ARTICLE_ID,
                    userId: 'guest',
                    userName: guestName,
                    userEmail: '',
                    text: commentText,
                    timestamp: serverTimestamp(),
                    likes: []
                };
            } else {
                commentData = {
                    articleId: ARTICLE_ID,
                    userId: currentUser.uid,
                    userName: currentUser.displayName || currentUser.email.split('@')[0],
                    userEmail: currentUser.email,
                    text: commentText,
                    timestamp: serverTimestamp(),
                    likes: []
                };
            }

            try {
                await addDoc(collection(db, 'comments'), commentData);

                commentTextInput.value = '';
                guestNameField.value = '';

                if (isGuestMode) {
                    isGuestMode = false;
                    setAuthState(auth.currentUser);
                }

            } catch (error) {
                console.error('Error posting comment:', error);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Post Comment';
            }
        });

        async function toggleLike(commentId, button) {
             if (!currentUser || isGuestMode) return;

             const commentRef = doc(db, 'comments', commentId);
             const userId = currentUser.uid;

             try {
                 await runTransaction(db, async (transaction) => {
                     const docSnapshot = await transaction.get(commentRef);
                     if (!docSnapshot.exists()) {
                         throw "Comment does not exist!";
                     }

                     const data = docSnapshot.data();
                     const likes = data.likes || [];
                     const isCurrentlyLiked = likes.includes(userId);

                     if (isCurrentlyLiked) {
                         transaction.update(commentRef, {
                             likes: arrayRemove(userId)
                         });
                     } else {
                         transaction.update(commentRef, {
                             likes: arrayUnion(userId)
                         });
                     }
                 });
             } catch (error) {
                 console.error("Transaction failed:", error);
             }
        }

        // NEW: Handler for dynamically created reply forms submission
        async function handleReplySubmit(e) {
            e.preventDefault();
            if (!currentUser || isGuestMode) return;

            const form = e.target;
            const parentId = form.dataset.parentId;
            const textarea = form.querySelector('textarea');
            const replyText = textarea.value.trim();
            const submitButton = form.querySelector('.btn-primary');

            if (!replyText) return;

            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Posting...';

            const replyData = {
                articleId: ARTICLE_ID,
                userId: currentUser.uid,
                userName: currentUser.displayName || currentUser.email.split('@')[0],
                userEmail: currentUser.email,
                text: replyText,
                timestamp: serverTimestamp(),
                likes: [],
                parentId: parentId
            };

            try {
                await addDoc(collection(db, 'comments'), replyData);
            } catch (error) {
                console.error('Error posting reply:', error);
            } finally {
                form.closest('.reply-form-container').remove();
                currentReplyToId = null;
            }
        }

        // NEW: Function to create the dynamic reply form HTML
        function createReplyFormHtml(parentId) {
            const formContainer = document.createElement('div');
            formContainer.className = 'reply-form-container';
            formContainer.innerHTML = `
                <h4 style="font-size: 1.2rem; margin-top: 0; margin-bottom: 0.5rem; color: var(--heading-color);">
                    Replying to a comment as <span style="color: var(--link-color);">${currentUser.displayName || currentUser.email.split('@')[0]}</span>
                </h4>

                <div class="comment-editor-toolbar">
                    <button type="button" data-format="bold" aria-label="Bold"><i class="fas fa-bold"></i></button>
                    <button type="button" data-format="italic" aria-label="Italic"><i class="fas fa-italic"></i></button>
                    <button type="button" data-format="link" aria-label="Insert Link"><i class="fas fa-link"></i></button>
                    <button type="button" data-format="blockquote" aria-label="Insert Blockquote"><i class="fas fa-quote-left"></i></button>
                    <span style="margin-left: auto; font-size: 0.9rem; color: #777;">Formatting: **B**, _I_, >Q</span>
                </div>

                <form class="reply-form" data-parent-id="${parentId}">
                    <textarea class="form-input" placeholder="Your reply (Use the toolbar above for formatting!)" required></textarea>
                    <button type="submit" class="btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        <i class="fas fa-paper-plane"></i> Post Reply
                    </button>
                    <button type="button" class="btn-cancel-reply btn-primary" style="background: #555; background-image: none; margin-left: 1rem; padding: 0.5rem 1rem; font-size: 0.9rem;">
                        Cancel
                    </button>
                </form>
            `;

            const form = formContainer.querySelector('.reply-form');
            const cancelBtn = formContainer.querySelector('.btn-cancel-reply');
            const textarea = formContainer.querySelector('textarea');

            form.addEventListener('submit', handleReplySubmit);
            cancelBtn.addEventListener('click', () => {
                formContainer.remove();
                currentReplyToId = null;
            });

            // Re-apply toolbar listener for the dynamically created form
            formContainer.querySelectorAll('.comment-editor-toolbar button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const format = e.currentTarget.dataset.format;
                    // Use the existing global formatting logic
                    if (window.applyFormatting) {
                        window.applyFormatting(textarea, format);
                    }
                });
            });

            return formContainer;
        }

        // NEW: Handler for reply button click
        function handleReplyButtonClick(e) {
            e.preventDefault();
            if (!currentUser || isGuestMode) return; // Guard for unauthenticated users

            const replyBtn = e.currentTarget;
            const parentId = replyBtn.dataset.commentId;

            document.querySelectorAll('.reply-form-container').forEach(el => el.remove());

            if (currentReplyToId === parentId) {
                currentReplyToId = null;
                return;
            }

            const formEl = createReplyFormHtml(parentId);
            const commentContentDiv = replyBtn.closest('.comment-content');

            if (commentContentDiv) {
                commentContentDiv.appendChild(formEl);
                formEl.querySelector('textarea').focus();
                currentReplyToId = parentId;
            }
        }

        // NEW: Function to handle edit button click (shows a new form)
        function handleEditButtonClick(commentId, originalText) {
            document.querySelectorAll('.reply-form-container').forEach(el => el.remove());
            currentReplyToId = null;

            const commentEl = document.querySelector(`.comment-content[data-comment-id="${commentId}"]`);
            if (!commentEl) return;

            const editContainer = document.createElement('div');
            editContainer.className = 'reply-form-container';
            editContainer.innerHTML = `
                <h4 style="font-size: 1.2rem; margin-top: 0; margin-bottom: 0.5rem; color: var(--heading-color);">
                    Editing Comment
                </h4>
                <div class="comment-editor-toolbar">
                    <button type="button" data-format="bold" aria-label="Bold"><i class="fas fa-bold"></i></button>
                    <button type="button" data-format="italic" aria-label="Italic"><i class="fas fa-italic"></i></button>
                    <button type="button" data-format="link" aria-label="Insert Link"><i class="fas fa-link"></i></button>
                    <button type="button" data-format="blockquote" aria-label="Insert Blockquote"><i class="fas fa-quote-left"></i></button>
                    <span style="margin-left: auto; font-size: 0.9rem; color: #777;">Formatting: **B**, _I_, >Q</span>
                </div>
                <form class="edit-form" data-parent-id="${commentId}">
                    <textarea class="form-input" required>${originalText}</textarea>
                    <button type="submit" class="btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <button type="button" class="btn-cancel-reply btn-primary" style="background: #555; background-image: none; margin-left: 1rem; padding: 0.5rem 1rem; font-size: 0.9rem;">
                        Cancel
                    </button>
                </form>
            `;

            commentEl.appendChild(editContainer);
            const textarea = editContainer.querySelector('textarea');
            textarea.focus();

            editContainer.querySelector('.edit-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                const newText = textarea.value.trim();
                const submitButton = e.target.querySelector('.btn-primary');
                submitButton.disabled = true;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                await updateComment(commentId, newText);
                editContainer.remove();
            });

            editContainer.querySelector('.btn-cancel-reply').addEventListener('click', () => {
                editContainer.remove();
            });

            // Re-apply toolbar listener for the dynamically created form
            editContainer.querySelectorAll('.comment-editor-toolbar button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const format = e.currentTarget.dataset.format;
                    // Use the existing global formatting logic
                    if (window.applyFormatting) {
                        window.applyFormatting(textarea, format);
                    }
                });
            });
        }

        // NEW: Firestore Update function (for editing)
        async function updateComment(commentId, newText) {
            if (!currentUser) return;
            const commentRef = doc(db, 'comments', commentId);

            try {
                await setDoc(commentRef, {
                    text: newText,
                    editedAt: serverTimestamp()
                }, { merge: true });
            } catch (error) {
                console.error("Error updating comment:", error);
            }
        }

        // NEW: Firestore Delete function (FIXED with getDoc)
        async function deleteComment(commentId) {
            if (!currentUser) {
                 alert("You must be signed in to delete comments.");
                 return;
            }

            const commentRef = doc(db, 'comments', commentId);

            try {
                // 1. Check for authorization before proceeding
                const docSnapshot = await getDoc(commentRef);
                if (!docSnapshot.exists()) {
                    alert("Comment not found.");
                    return;
                }

                const commentData = docSnapshot.data();
                const isCommentOwner = currentUser.uid === commentData.userId;
                const isAdmin = currentUser.email === ADMIN_EMAIL;

                if (!isCommentOwner && !isAdmin) {
                    alert("You are not authorized to delete this comment.");
                    return;
                }
            } catch (error) {
                 console.error("Error checking delete permissions:", error);
                 alert("Failed to verify user permissions.");
                 return;
            }

            if (!confirm("Are you sure you want to delete this comment? This action cannot be undone.")) return;

            try {
                // 2. Perform the deletion
                await deleteDoc(commentRef);
            } catch (error) {
                console.error("Error deleting comment:", error);
                alert("Failed to delete comment. Please check your Firestore security rules (if deletion is denied).");
            }
        }


        // --- 5. Utility Functions ---

        function escapeHtml(text) {
            if (typeof text !== 'string') return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // UPDATED: Added Blockquote (>) formatting
        function formatCommentText(text) {
            let safeText = escapeHtml(text);

            // 1. Format blockquotes: lines starting with >
            safeText = safeText.replace(/(^|\n)(>\s*[^\n]*)+/g, (match) => {
                const lines = match.trim().split('\n').map(line => {
                    // Remove '>' and trim leading space
                    return line.replace(/^[>\s]+/, '');
                });
                // Join lines with <br> and wrap in blockquote
                return `<blockquote>${lines.join('<br>')}</blockquote>`;
            });

            // 2. Format bold: **text**
            safeText = safeText.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
            // 3. Format italics: _text_
            safeText = safeText.replace(/_(.*?)_/g, '<i>$1</i>');
            // 4. Format links: [text](url)
            safeText = safeText.replace(/\[([^\]]+)\]\((https?:\/\/[^\s\)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
            // 5. Format standalone links (fallback)
            safeText = safeText.replace(/(https?:\/\/[^\s]+)/g, (match) => {
                 if (safeText.includes(`](${match})`)) return match;
                 return `<a href="${match}" target="_blank" rel="noopener noreferrer">${match}</a>`;
            });

            // 6. Format remaining line breaks (now only applies outside blockquotes)
            safeText = safeText.replace(/\n/g, '<br>');

            return safeText;
        }

        // --- 6. Initialization (Handled by onAuthStateChanged) ---
    </script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
Â  window.dataLayer = window.dataLayer || [];
Â  function gtag(){dataLayer.push(arguments);}
Â  gtag('js', new Date()); 

Â  gtag('config', 'G-J1YTKP10ZX');
</script>
