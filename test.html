<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Craft Unforgettable Characters: A Writer's Guide | Elvion AI Blog</title>
    <meta name="description" content="Master the art of character creation with proven techniques to build compelling, three-dimensional characters that readers will love.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@600;700;800;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- DUAL THEME VARIABLES (Default: DARK MODE) --- */
        :root {
            /* Elvion AI Cyan/Blue Theme */
            --dark-navy: #00001a;
            --bg-color: #0d1117; 
            --text-color: #e6edf3;
            --heading-color: #ffffff;
            --cyan-glow: #00ffff;
            --light-blue-glow: #00aaff; 
            --link-color: var(--cyan-glow);
            --link-hover-color: var(--light-blue-glow);
            --border-color: #21262d;
            --card-bg: #161b22; 
            --button-bg: linear-gradient(45deg, var(--cyan-glow), var(--light-blue-glow));
            --button-text-color: #0d1117; /* Dark text on bright button */
            --button-hover-bg: linear-gradient(45deg, #00d4d4, #0077ff);
            --navbar-bg: rgba(13, 17, 23, 0.95);
            --footer-bg: #0a0e14;
            --highlight-color: rgba(0, 255, 255, 0.3); 
            --comment-bg: #0d1117;
            --shadow-glow: 0 0 10px rgba(0, 255, 255, 0.15);
        }

        /* LIGHT MODE VARIABLES (COMMITTED: Reduced extreme whiteness, improved contrast) */
        body.light-theme {
            --bg-color: #f0f0f0; /* Slightly darker white */
            --text-color: #222222; /* Darker text for contrast */
            --heading-color: #111111;
            --link-color: #0056b3;
            --link-hover-color: #003d80;
            --border-color: #d0d0d0; /* Darker border */
            --card-bg: #ffffff;
            --button-bg: #0056b3;
            --button-text-color: #ffffff;
            --button-hover-bg: #003d80;
            --navbar-bg: #ffffff;
            --footer-bg: #f1f1f1;
            --highlight-color: #fff9c4;
            --comment-bg: #ffffff;
            --shadow-glow: none;
        }

        /* --- GLOBAL STYLES --- */
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding-top: 60px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            font-size: 1.1rem;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        h1, h2, h3, h4 {
            font-family: 'Orbitron', sans-serif;
            color: var(--heading-color);
            margin-top: 0;
            line-height: 1.3;
            text-shadow: var(--shadow-glow);
        }
        
        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .post-container {
             max-width: 800px;
             margin: 0 auto;
             padding: 0 1rem;
        }

        /* --- Navbar Styles --- */
        .navbar {
            position: fixed; top: 0; width: 100%; 
            background: var(--navbar-bg); 
            padding: 1rem 0; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5); 
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(5px);
        }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .navbar-brand { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--heading-color); text-shadow: var(--shadow-glow); }
        .nav-links { display: flex; list-style: none; margin: 0; padding: 0; }
        .nav-links li { margin-left: 2rem; }
        .nav-links a { 
            color: var(--text-color); font-weight: 500; font-family: 'Inter', sans-serif; font-size: 1rem;
            text-transform: uppercase; letter-spacing: 0.5px; padding: 0.5rem 0; position: relative; 
        }
        .nav-links .active-link { color: var(--link-color); }
        .nav-links a::after { 
            content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; 
            background: var(--link-color); transition: width 0.3s ease-in-out; 
        }
        .nav-links a:hover::after, .nav-links .active-link::after { width: 100%; }
        
        .hamburger { display: none; flex-direction: column; cursor: pointer; padding: 0.5rem; background: transparent; border: none; }
        .hamburger .bar { 
            width: 25px; height: 3px; background-color: var(--heading-color); margin: 4px 0; transition: 0.4s; box-shadow: none; 
        }
        .hamburger.active .bar:nth-child(2) { opacity: 0; }
        .hamburger.active .bar:nth-child(1) { transform: translateY(7px) rotate(45deg); }
        .hamburger.active .bar:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }
        
        #theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            margin-left: 1rem;
        }
        #theme-toggle:hover {
            border-color: var(--link-color);
            color: var(--link-color);
        }
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* --- Footer Styles --- */
        .footer {
            background: var(--footer-bg); color: var(--text-color); padding: 4rem 0 2rem; font-size: 0.9rem;
            border-top: 1px solid var(--border-color); text-align: center; position: relative; margin-top: 4rem;
        }
        .footer .container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            text-align: left;
            max-width: 900px;
        }
        .footer .col h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        .footer ul {
            list-style: none;
            padding: 0;
        }
        .footer li {
            margin-bottom: 0.5rem;
        }
        .footer a {
            color: var(--text-color);
            font-size: 0.9rem;
        }
        .footer a:hover {
            color: var(--link-color);
            text-decoration: none;
        }
        .footer .brand-info {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--link-color);
        }
        .footer .legal-info { 
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            color: #777; 
        }

        /* --- Single Post Styles --- */
        .post-main { padding-top: 3rem; padding-bottom: 3rem; position: relative; }
        .post-header { border-bottom: 1px solid var(--border-color); padding-bottom: 1.5rem; margin-bottom: 2rem; }
        .post-header .post-tag { 
            display: inline-block; padding: 0.4rem 1rem; background: var(--button-bg); 
            color: var(--button-text-color); font-weight: 700; font-size: 0.85rem; 
            border-radius: 20px; text-transform: uppercase; margin-bottom: 1rem;
            background-image: var(--button-bg); /* Apply gradient */
        }
        .post-meta {
            display: flex; flex-wrap: wrap; gap: 1.5rem; 
            color: rgba(224, 224, 224, 0.7); font-size: 0.95rem; margin-top: 1rem;
        }
        .post-meta span { display: flex; align-items: center; gap: 0.5rem; }
        .post-meta i { color: var(--link-color); }
        
        .post-thumbnail-placeholder {
            height: 300px; line-height: 300px; text-align: center; font-size: 4rem;
            background-color: var(--card-bg); 
            border: 1px solid var(--border-color);
            color: var(--link-color);
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        
        .article-content blockquote {
            border-left: 4px solid var(--link-color);
            color: var(--text-color);
            background: var(--card-bg);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 4px;
        }
        
        /* COMMITTED: Heading color changes for both themes */
        .article-content h2 { 
            font-size: 2rem; margin-top: 3rem; margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;
            color: var(--light-blue-glow); /* Dark mode glow */
        }
        .article-content h3 { color: var(--heading-color); font-size: 1.5rem; margin-top: 2rem; }
        
        body.light-theme .article-content h2 {
            color: var(--heading-color); /* Light mode black jor */
        }
        body.light-theme .article-content h3 {
             color: var(--heading-color); /* Light mode black jor */
        }
        /* End of committed heading color changes */
        
        .article-content ul, .article-content ol { padding-left: 1.5rem; margin-bottom: 1.5rem; }
        .article-content strong, .article-content b { color: var(--cyan-glow); font-weight: 600; }


        /* --- Audio Player Styles (Committed: Aesthetic Glow) --- */
        .audio-player {
            background: var(--card-bg); border: 1px solid var(--border-color);
            padding: 1.25rem; border-radius: 8px; margin-bottom: 2.5rem;
            display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between;
            gap: 1rem;
            /* Added aesthetic glow for the player container */
            box-shadow: 0 0 15px rgba(0, 170, 255, 0.2); 
        }
        #reading-time {
            font-size: 0.95rem;
            color: var(--link-color);
            font-weight: 600;
        }
        
        /* Word Highlighting (Inline span) */
        .word-highlight {
            background-color: var(--highlight-color);
            padding: 0 1px;
            border-radius: 2px;
            transition: background-color 0.1s;
        }
        body.light-theme .word-highlight {
            box-shadow: none; 
            color: var(--heading-color);
        }

        .btn-primary {
            background: var(--button-bg); color: var(--button-text-color); border: none;
            padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: 700;
            font-family: 'Orbitron', sans-serif; font-size: 1rem; transition: all 0.3s ease;
            text-transform: uppercase;
        }
        .btn-primary:hover { 
            background: var(--button-hover-bg); 
            box-shadow: var(--shadow-glow);
        }
        .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }

        /* Form Controls */
        .form-input {
            background: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-color);
            display: block; width: 100%; padding: 0.8rem; margin-bottom: 1rem; border-radius: 4px; box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-input:focus { 
            border-color: var(--link-color); 
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3); 
            outline: none;
        }
        textarea.form-input { min-height: 100px; resize: vertical; }
        
        /* COMMITTED: Hidden email field for the new auth flow */
        #comment-email-group { display: none; }

        /* --- Comment Section Styles --- */
        .comments-wrapper { 
            margin-top: 4rem;
            padding-top: 2rem; 
            border-top: 1px solid var(--border-color); 
        }
        .comments-wrapper h2 { 
            font-size: 1.8rem;
            margin-bottom: 2rem;
            border-bottom: none;
        }

        .comment-form-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 3rem;
        }
        .comment-form-container h3 {
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
        }

        .comment {
            background: var(--comment-bg); border: 1px solid var(--border-color);
            display: flex; gap: 1rem; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .comment-avatar { 
            width: 45px; height: 45px; border-radius: 50%; background: var(--link-color); 
            display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
            color: var(--button-text-color); font-weight: 700; flex-shrink: 0;
        }
        .comment-user { 
            font-weight: 600; color: var(--cyan-glow); font-size: 1rem; 
            display: block; margin-bottom: 0.3rem;
        }
        .comment-meta {
            font-size: 0.85rem;
            color: #888;
            margin-top: 0.5rem;
        }
        .no-comments {
            text-align: center;
            padding: 3rem;
            color: #777;
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                background: var(--navbar-bg);
                position: absolute;
                top: 100%;
                left: 0;
                padding: 1rem 0;
                border-top: 1px solid var(--border-color);
            }
            .nav-links.active {
                display: flex;
            }
            .nav-links li {
                margin: 0.5rem 2rem;
            }
            .nav-links a::after { display: none; }
            .hamburger { display: flex; }
            .footer .container { grid-template-columns: repeat(2, 1fr); }
            .footer .col:nth-child(1), .footer .col:nth-child(2) { margin-bottom: 1.5rem; }
        }

        @media (max-width: 500px) {
            .footer .container { grid-template-columns: 1fr; text-align: center; }
            .footer .col { margin-bottom: 1rem; }
            .audio-player { flex-direction: column; align-items: stretch; }
        }
    </style>
</head>
<body>
    
    <header class="navbar">
        <div class="container">
            <a href="index.html" class="navbar-brand">Elvion AI</a>
            
            <div class="nav-controls">
                <nav class="nav-links">
                    <li><a href="university.html">University</a></li>
                    <li><a href="blog.html" class="active-link">Blog</a></li>
                    <li><a href="about.html">About Us</a></li>
                </nav>
                <button id="theme-toggle" aria-label="Toggle theme">
                    <i class="fas fa-sun"></i> 
                </button>
                <button class="hamburger" aria-label="Toggle navigation">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <main class="post-main">
        <div class="post-container">

            <header class="post-header">
                <span class="post-tag">Creative Writing</span>
                <h1>How to Craft Unforgettable Characters: A Writer's Guide</h1>
                <div class="post-meta">
                    <span><i class="fas fa-user-edit"></i> By Elvion AI Staff</span>
                    <span><i class="fas fa-calendar-alt"></i> Nov 5, 2025</span>
                    <span id="estimated-time"><i class="fas fa-clock"></i> Calculating read time...</span>
                </div>
            </header>

            <div class="post-thumbnail-placeholder">
                <i class="fas fa-feather-pointed"></i>
            </div>
            
            <section class="audio-player">
                <span id="reading-time"></span>
                <select id="voice-select" class="form-input" style="width: 250px; margin: 0; flex-grow: 1;">
                    <option value="" disabled selected>Select Voice...</option>
                    <option value="audios/a5cae336-01dd-431b-b388-9a319258d85f.wav">Philadelphia AI (Female)</option>
                    <option value="audios/c72d8fbf-8a99-451d-b94c-8d7c8ffef5e5.wav">Funny Daddy (Male)</option>
                </select>
                <button id="audio-play-pause-btn" class="btn-primary" style="width: 200px;">
                    <i class="fas fa-play"></i>
                    <span>Listen</span>
                </button>
                <span id="speech-status" style="font-size: 0.9rem; color: #aaa;">Ready. Select a voice and listen.</span>
            </section>
            
            <article class="article-content" id="article-content">
                <p>Your characters are the heart of your story. They are the vessels through which your reader experiences the world you've built, the conflicts you've crafted, and the emotions you want to evoke. A weak plot can sometimes be saved by compelling characters, but even the most brilliant plot will fall flat if the characters feel like cardboard cutouts. So, how do you create three-dimensional, <b>unforgettable characters</b> that leap off the page?</p>

                <h2>1. Beyond the Surface: The Iceberg Method</h2>
                <p>What we see of a character‚Äîtheir appearance, their job, their actions‚Äîis just the tip of the iceberg. The real substance lies beneath the surface. This is their <b>backstory</b>. You don't need to dump all of this information on the reader (in fact, please don't!), but <i>you</i> need to know it. What was their childhood like? What's their biggest regret? What is the secret they've never told anyone? This hidden weight informs their every decision, fear, and desire.</p>

                <blockquote>
                    <b>Pro-Tip:</b> Ask yourself: What is the single most important event that shaped my character into who they are today? How does it affect their behavior in Chapter 1?
                </blockquote>

                <h2>2. Give Them Flaws (Real Ones)</h2>
                <p>Perfection is boring. A character who is always right, always strong, and always kind is not relatable‚Äîthey're annoying. Real people are messy. They are impatient, they are selfish, they are afraid of spiders, they procrastinate. A flaw makes a character human. More importantly, a character's <b>fatal flaw</b> is often the engine of the plot. It's the internal obstacle they must overcome to achieve their external goal. Is your hero brave? Make them reckless. Is your heroine brilliant? Make her arrogant.</p>

                <h2>3. Wants vs. Needs</h2>
                <p>This is a classic writing technique for a reason. Every compelling character has two goals:</p>
                
                <ul>
                    <li><b>The Want:</b> This is the external, conscious goal. It's what the character <i>thinks</i> they need to be happy. (e.g., "I want to win the championship.")</li>
                    <li><b>The Need:</b> This is the internal, often subconscious truth. It's what the character <i>actually</i> needs to grow as a person. (e.g., "I need to learn to trust my teammates.")</li>
                </ul>

                <p>The best stories create conflict by putting the Want and the Need at odds. The character's journey (their "arc") is complete when they either sacrifice their Want to achieve their Need, or finally realize that what they Needed was the key to getting what they Wanted all along.</p>
                
                <h2>4. Let Their Voice Be Heard</h2>
                <p>How does your character speak? Their dialogue is a window into their soul. A character's voice is more than just an accent; it's their word choice, their sentence structure, their rhythm, and what they choose to say (or not say).</p>
                
                <h3>Quick Voice Tips:</h3>
                <ul>
                    <li>An educated professor might use complex sentences and precise vocabulary.</li>
                    <li>A nervous teenager might speak in short, halting sentences, using a lot of "like" or "um."</li>
                    <li>A cynical detective might use dry, sarcastic wit.</li>
                </ul>
                <p>Try this exercise: Write a scene with two characters arguing, but remove all dialogue tags ("he said," "she yelled"). Can you tell who is speaking just by their words and rhythm? If so, you're on the right track.</p>

                <h2>5. Make Them Act: Decisions Define Character</h2>
                <p>Don't just <i>tell</i> us your character is brave; put them in a situation where they must <i>choose</i> to be brave, especially when it's hard. Character is revealed through action and choice, especially choices made under pressure. The harder the choice, the more we learn about who they really are. A character who chooses to run into a burning building is defined by that action in a way no amount of descriptive prose ever could.</p>
                
                <p>Ultimately, an unforgettable character feels <i>real</i>. They are a bundle of contradictions, flaws, desires, and secrets, just like us. By digging deep into their past, understanding their internal conflicts, and letting them express themselves through a unique voice, you can create characters that readers will carry with them long after the final page.</p>
            </article>

            <section class="comments-wrapper" id="comments">
                <h2>üí¨ Join the Conversation (<span id="comment-count">0</span> Comments)</h2>

                <div class="comment-form-container">
                    <h3>Leave a Comment</h3>
                    <form id="comment-form">
                        <div>
                            <label for="comment-name" class="form-label">Your Name <span style="color: red;">*</span></label>
                            <input type="text" id="comment-name" class="form-input" placeholder="Your display name" required>
                        </div>
                        <div id="comment-email-group">
                            <label for="comment-email" class="form-label">Your Email (Optional, won't be displayed)</label>
                            <input type="email" id="comment-email" class="form-input" placeholder="your@email.com">
                        </div>
                        <div>
                            <label for="comment-input-text" class="form-label">Share your thoughts <span style="color: red;">*</span></label>
                            <textarea id="comment-input-text" class="form-input" placeholder="What did you think about this article?" required></textarea>
                        </div>
                        <button type="submit" id="comment-button" class="btn-primary">
                            <i class="fas fa-paper-plane"></i> Post Comment
                        </button>
                    </form>
                    
                    <div id="auth-prompt" style="text-align: center; margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem; display: none;">
                        <p style="margin-bottom: 0.8rem; font-size: 0.95rem;">To access full features (Likes, Replies, Verified Badge), please sign in:</p>
                        <button class="btn-primary" id="google-sign-up" style="background: #db4437; color: white;">
                            <i class="fab fa-google"></i> Sign up with Google
                        </button>
                    </div>
                </div>

                <div id="comment-list-container">
                    <div id="comment-list">
                        <p class="loading-message" style="text-align: center; color: #777;">Loading comments...</p>
                    </div>
                </div>

            </section>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="col">
                <span class="brand-info">Elvion AI</span>
                <p>Where Assistance Meets Excellence.</p>
            </div>
            <div class="col">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html#hero">Home</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="university.html">University</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Company</h4>
                <ul>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="mailto:contact@elvionai.com">Contact Us</a></li>
                </ul>
            </div>
            <div class="col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                    <li><a href="terms.html">Terms of Service</a></li>
                </ul>
            </div>
            <div class="legal-info">
                &copy; <span id="current-year-footer"></span> Elvion AI. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script>
        // --- Theme Toggle Script & Hamburger ---
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const toggleButton = document.getElementById('theme-toggle');
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');

            // Default to dark theme, but check local storage
            const savedTheme = localStorage.getItem('theme') || 'dark';

            function applyTheme(theme) {
                if (theme === 'light') {
                    body.classList.add('light-theme');
                    toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    body.classList.remove('light-theme');
                    toggleButton.innerHTML = '<i class="fas fa-sun"></i>';
                }
                localStorage.setItem('theme', theme);
            }

            applyTheme(savedTheme);

            toggleButton.addEventListener('click', () => {
                const currentTheme = body.classList.contains('light-theme') ? 'light' : 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });

            // --- Mobile Menu ---
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
            });
            // Close menu on link click
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 992) {
                        hamburger.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
            });

            document.getElementById('current-year-footer').textContent = new Date().getFullYear();
        });
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const playPauseBtn = document.getElementById('audio-play-pause-btn');
            const speechStatus = document.getElementById('speech-status');
            const articleContent = document.getElementById('article-content');
            const voiceSelect = document.getElementById('voice-select');
            const estimatedTimeEl = document.getElementById('estimated-time');
            
            const WPM = 200; // Average words per minute for reading time calculation

            let isPlaying = false;
            let isPaused = false;
            let wordsMap = []; 
            let wordIndexInMap = 0;
            let readingInterval;
            let currentAudioFile = ''; // Store the selected file path

            // --- 1. Content Processing & Read Time ---
            function processArticleContent() {
                let totalWordCount = 0;
                wordsMap = [];
                
                const elements = articleContent.querySelectorAll('p, h2, h3, li, blockquote');
                
                elements.forEach(el => {
                    const originalHTML = el.innerHTML;
                    const text = el.textContent.trim();
                    if (text.length === 0) return;
                    
                    // Simplified text processing for word counting
                    // Match words including internal apostrophes and trailing punctuation
                    const words = text.match(/\b\w+['‚Äô]*\w*[\.,;:]*\b/g) || []; 
                    
                    words.forEach((word) => {
                        wordsMap.push({ text: word, element: el });
                        totalWordCount++;
                    });
                    
                    // Store full element text for re-highlighting
                    el.setAttribute('data-original-html', originalHTML);
                });
                
                // Calculate and display reading time
                const readTimeMinutes = Math.ceil(totalWordCount / WPM);
                estimatedTimeEl.innerHTML = `<i class="fas fa-clock"></i> ${readTimeMinutes} min read`;
                document.getElementById('reading-time').textContent = `Duration: ${readTimeMinutes} min`;
            }
            
            // --- 2. Simulation Logic (Replaces Web Speech) ---
            function startSpeakingSimulation() {
                removeHighlighting();
                wordIndexInMap = 0; 
                
                if (wordsMap.length === 0) {
                    speechStatus.textContent = "No text found to read.";
                    return;
                }

                isPlaying = true;
                speechStatus.textContent = `Playing ${voiceSelect.options[voiceSelect.selectedIndex].text} audio...`;
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';

                // Simulate word-by-word reading based on WPM rate
                const delayPerWord = (60 / WPM) * 1000; // Delay in milliseconds
                
                readingInterval = setInterval(() => {
                    if (wordIndexInMap < wordsMap.length) {
                        highlightWord(wordsMap[wordIndexInMap]);
                        wordIndexInMap++;
                    } else {
                        // Reading finished
                        clearInterval(readingInterval);
                        resetPlayer();
                        speechStatus.textContent = "Finished reading.";
                    }
                }, delayPerWord);
            }

            function highlightWord(wordData) {
                // 1. Clean up old highlight from the previous word's element
                removeHighlighting();
                
                const currentElement = wordData.element;
                const wordToHighlight = wordData.text;
                
                // 2. Restore the element's original content before applying new highlight
                currentElement.innerHTML = currentElement.getAttribute('data-original-html') || currentElement.textContent;

                // 3. Regex to find the word, avoiding corrupting existing HTML structure 
                const escapedWord = wordToHighlight.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                // This regex tries to match the whole word boundary, case insensitive, ignoring trailing punctuation
                const regex = new RegExp(`(\\b${escapedWord.replace(/[\.,;:]+$/, '')}\\b)`, 'i');
                
                if (regex.test(currentElement.innerHTML)) {
                    // Apply the highlight only to the first match in the element
                    let highlightedHtml = currentElement.innerHTML.replace(regex, `<span class="word-highlight">$&</span>`);
                    currentElement.innerHTML = highlightedHtml;
                    currentElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }

            // Clears ONLY the last highlighted word
            function removeHighlighting() {
                const highlightedSpans = articleContent.querySelectorAll('.word-highlight');
                highlightedSpans.forEach(span => {
                    // Restore the original text content
                    span.outerHTML = span.textContent; 
                });
            }
            
            function resetPlayer() {
                isPlaying = false;
                isPaused = false;
                wordIndexInMap = 0;
                removeHighlighting();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i> <span>Listen</span>';
                clearInterval(readingInterval);
            }

            // --- 3. Event Listeners ---
            playPauseBtn.addEventListener('click', () => {
                currentAudioFile = voiceSelect.value;
                if (!currentAudioFile) {
                    speechStatus.textContent = "Please select a voice first!";
                    return;
                }
                
                if (!isPlaying && !isPaused) {
                    // Start playback
                    startSpeakingSimulation();
                } else if (isPlaying && !isPaused) {
                    // Pause playback
                    isPlaying = false;
                    isPaused = true;
                    clearInterval(readingInterval);
                    speechStatus.textContent = "Paused";
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i> <span>Resume</span>';
                } else if (!isPlaying && isPaused) {
                    // Resume playback
                    isPlaying = true;
                    isPaused = false;
                    speechStatus.textContent = `Reading aloud from ${wordIndexInMap}...`;
                    // Resume the simulation from the current word index
                    startSpeakingSimulation();
                }
            });
            
            voiceSelect.addEventListener('change', () => {
                resetPlayer();
                speechStatus.textContent = `Selected: ${voiceSelect.options[voiceSelect.selectedIndex].text}`;
            });
            
            // Initial load: process content
            processArticleContent();
            
        });
    </script>


    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
            authDomain: "elvionai.firebaseapp.com",
            projectId: "elvionai",
            storageBucket: "elvionai.firebasestorage.app",
            messagingSenderId: "161078300830",
            appId: "1:161078300830:web:f460df8591704eb0e96b8f"
        };

        // Initialize Firebase
        try {
            firebase.initializeApp(firebaseConfig);
        } catch (e) {
            console.error("Firebase Init Error (Check API Key/Config):", e);
        }
        
        const db = firebase.firestore();
        const ARTICLE_ID = 'crafting-characters-01';
        const ADMIN_EMAIL = 'koladhino@gmail.com'; // Admin user for badge

        // --- Simulated Auth State (Replace with real Firebase Auth integration) ---
        let isAuthenticated = false; // Set to true to test the authenticated user flow
        const mockAuthenticatedUser = {
            displayName: 'Authenticated User',
            email: 'authenticated.user@example.com'
        };
        // End of Simulated Auth State

        // --- DOM Elements ---
        const commentForm = document.getElementById('comment-form');
        const commentNameInput = document.getElementById('comment-name');
        const commentTextInput = document.getElementById('comment-input-text');
        const commentList = document.getElementById('comment-list');
        const commentCountEl = document.getElementById('comment-count');
        const submitBtn = document.getElementById('comment-button');
        const authPrompt = document.getElementById('auth-prompt');


        // Load comments
        function loadComments() {
            db.collection('comments')
                .where('articleId', '==', ARTICLE_ID)
                .orderBy('timestamp', 'desc')
                .onSnapshot(snapshot => {
                    commentList.innerHTML = '';
                    
                    if (snapshot.empty) {
                        commentList.innerHTML = `
                            <div class="no-comments">
                                <i class="fas fa-comments" style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem; display: block;"></i>
                                <p>No comments yet. Be the first to share your thoughts! üåü</p>
                            </div>
                        `;
                        commentCountEl.textContent = '0';
                        return;
                    }

                    commentCountEl.textContent = snapshot.size;

                    snapshot.forEach(doc => {
                        const comment = doc.data();
                        const commentEl = createCommentElement(comment);
                        commentList.appendChild(commentEl);
                    });
                }, error => {
                    console.error("Error loading comments:", error);
                    commentList.innerHTML = `<p class="loading-message" style="color: red;">Failed to load comments. (Check Firestore Rules)</p>`;
                });
        }

        // Create comment element (Committed: Added Verified/Admin badges, Like/Reply placeholders)
        function createCommentElement(comment) {
            const div = document.createElement('div');
            div.className = 'comment';
            
            const userName = escapeHtml(comment.userName) || 'Anonymous';
            const initial = userName.charAt(0).toUpperCase();
            const timestamp = comment.timestamp ? new Date(comment.timestamp.toDate()).toLocaleString() : 'Just now';
            
            // Feature Flags based on user data
            const isVerified = comment.email === mockAuthenticatedUser.email; // Simple mock check
            const isAdmin = comment.email === ADMIN_EMAIL;
            
            const verificationBadge = isVerified ? '<span style="color: #00d4d4; margin-left: 5px;" title="Verified User">‚úî</span>' : '';
            const adminBadge = isAdmin ? '<span style="color: #ffcc00; margin-left: 5px;" title="Site Administrator">üåü Admin</span>' : '';

            div.innerHTML = `
                <div class="comment-avatar">${initial}</div>
                <div class="comment-content" style="flex-grow: 1;">
                    <span class="comment-user">${userName}${verificationBadge}${adminBadge}</span>
                    <p class="comment-text">${escapeHtml(comment.text)}</p>
                    <div class="comment-meta">
                        üïê ${timestamp}
                        <span style="margin-left: 15px; cursor: pointer; user-select: none;"><i class="fas fa-heart"></i> Like (0)</span>
                        <span style="margin-left: 10px; cursor: pointer; user-select: none;"><i class="fas fa-reply"></i> Reply</span>
                    </div>
                    <div class="comment-replies"></div>
                </div>
            `;
            
            return div;
        }

        // Handle comment submission
        commentForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const userName = commentNameInput.value.trim();
            const commentText = commentTextInput.value.trim();
            
            if (!commentText) {
                alert('Please share your thoughts before posting! üòä');
                return;
            }

            // --- AUTHENTICATION GATE (Committed: Logic added) ---
            if (!isAuthenticated) {
                if (!userName) {
                    alert('Please enter a display name for anonymous posting, or sign in for full features.');
                    return;
                }
                authPrompt.style.display = 'block';
            } else {
                 authPrompt.style.display = 'none';
            }


            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Posting...';
            
            // Determine user info based on auth state
            const postUserName = isAuthenticated ? mockAuthenticatedUser.displayName : userName;
            const postEmail = isAuthenticated ? mockAuthenticatedUser.email : 'anonymous';


            try {
                await db.collection('comments').add({
                    articleId: ARTICLE_ID,
                    userName: postUserName,
                    email: postEmail,
                    text: commentText,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Clear form inputs
                commentTextInput.value = '';
                if (isAuthenticated) { 
                     // Clear the name input only if the name is pre-filled/known from auth
                     commentNameInput.value = mockAuthenticatedUser.displayName;
                } else {
                     // Keep anonymous name for quick subsequent comments
                }

            } catch (error) {
                console.error('Error posting comment:', error);
                alert('Oops! Failed to post comment. Check console and Firestore rules. üòÖ');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Post Comment';
            }
        });

        // Initialize user input based on simulated auth status
        function initAuthUI() {
            if (isAuthenticated) {
                commentNameInput.value = mockAuthenticatedUser.displayName;
                commentNameInput.disabled = true;
                authPrompt.style.display = 'none';
            } else {
                commentNameInput.value = '';
                commentNameInput.disabled = false;
                // authPrompt remains hidden until the user tries to post without a name
            }
        }
        
        // Simulating Google sign-up button click
        document.getElementById('google-sign-up').addEventListener('click', () => {
             alert("Simulating Google Sign-in... User authenticated! Please refresh to see the change.");
             // In a real app, Firebase auth would happen here, setting isAuthenticated = true and updating mockAuthenticatedUser
        });

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize comments and UI on load
        document.addEventListener('DOMContentLoaded', () => {
            loadComments();
            initAuthUI();
        });
    </script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
¬† window.dataLayer = window.dataLayer || [];
¬† function gtag(){dataLayer.push(arguments);}
¬† gtag('js', new Date()); 

¬† gtag('config', 'G-J1YTKP10ZX');
</script>
