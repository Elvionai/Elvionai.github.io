<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Craft Unforgettable Characters: A Writer's Guide | Elvion AI Blog</title>
    <meta name="description" content="Master the art of character creation with proven techniques to build compelling, three-dimensional characters that readers will love.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --dark-navy: #00001a;
            --black-bg: #000000;
            --cyan-glow: #00ffff;
            --light-blue-glow: #00aaff;
            --text-color: #e0e0e0;
            --heading-color: #ffffff;
            --gradient-start: #0a1128;
            --gradient-end: #121a30;
            --card-bg: rgba(18, 26, 48, 0.7);
            --border-glow: 0 0 10px var(--cyan-glow), 0 0 20px var(--light-blue-glow);
            --hover-glow: 0 0 15px var(--cyan-glow), 0 0 30px var(--light-blue-glow);
            --button-bg: linear-gradient(45deg, var(--cyan-glow), var(--light-blue-glow));
            --button-text-color: var(--black-bg);
            --star-color: rgba(255, 255, 255, 0.7);
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding-top: 60px;
            background-color: var(--black-bg);
            color: var(--text-color);
            line-height: 1.8;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        h1, h2, h3, h4 {
            font-family: 'Orbitron', sans-serif;
            color: var(--heading-color);
            margin-top: 0;
            text-shadow: var(--border-glow);
        }
        
        a {
            color: var(--cyan-glow);
            text-decoration: none;
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }

        a:hover {
            color: var(--light-blue-glow);
            text-shadow: 0 0 5px var(--cyan-glow);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        #stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background-color: var(--star-color);
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 4s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(0, 0, 26, 0.95);
            padding: 1rem 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
        }

        .navbar-brand {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--heading-color);
            text-shadow: var(--border-glow);
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-links li {
            margin-left: 2rem;
        }

        .nav-links a {
            color: var(--text-color);
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            text-shadow: none;
        }

        /* Article Styles */
        .article-container {
            position: relative;
            z-index: 2;
            padding: 3rem 0;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            color: var(--cyan-glow);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        .article-header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
        }

        .article-category {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: var(--button-bg);
            color: var(--button-text-color);
            font-weight: 700;
            font-size: 0.85rem;
            border-radius: 20px;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .article-title {
            font-size: 2.8rem;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: var(--cyan-glow);
        }

        .article-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            color: rgba(224, 224, 224, 0.7);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .article-meta span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .article-meta i {
            color: var(--light-blue-glow);
        }

        /* Audio Player */
        .audio-player-section {
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .audio-icon {
            font-size: 2rem;
            color: var(--cyan-glow);
        }

        .audio-player-section audio {
            flex: 1;
            height: 40px;
            outline: none;
        }

        .audio-player-section audio::-webkit-media-controls-panel {
            background: rgba(0, 170, 255, 0.1);
        }

        /* Article Content */
        .article-content {
            font-size: 1.1rem;
            line-height: 1.9;
            margin-bottom: 4rem;
        }

        .article-content h2 {
            font-size: 2rem;
            margin-top: 3rem;
            margin-bottom: 1rem;
            color: var(--light-blue-glow);
        }

        .article-content h3 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .article-content p {
            margin-bottom: 1.5rem;
        }

        .article-content ul, .article-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }

        .article-content li {
            margin-bottom: 0.8rem;
        }

        .article-content strong {
            color: var(--cyan-glow);
            font-weight: 600;
        }

        .highlight-box {
            background: rgba(0, 255, 255, 0.05);
            border-left: 4px solid var(--cyan-glow);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 4px;
        }

        .emoji-large {
            font-size: 1.3em;
        }

        /* Comments Section */
        .comments-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2.5rem;
            border: 1px solid rgba(0, 255, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
        }

        .comments-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
        }

        .comments-header h3 {
            margin: 0;
            font-size: 1.8rem;
        }

        .comment-count {
            background: rgba(0, 255, 255, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--cyan-glow);
        }

        .comment-form {
            margin-bottom: 3rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--cyan-glow);
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.9rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--cyan-glow);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .auth-notice {
            background: rgba(0, 170, 255, 0.1);
            border: 1px solid rgba(0, 170, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .auth-notice i {
            color: var(--light-blue-glow);
            font-size: 1.2rem;
        }

        .auth-links {
            margin-left: auto;
        }

        .auth-links a {
            margin-left: 1rem;
            padding: 0.4rem 1rem;
            background: var(--button-bg);
            color: var(--button-text-color);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .btn-submit {
            padding: 0.9rem 2rem;
            background: var(--button-bg);
            color: var(--button-text-color);
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: var(--hover-glow);
        }

        .btn-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Comment Display */
        .comments-list {
            margin-top: 2rem;
        }

        .comment {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .comment:hover {
            border-color: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.1);
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .comment-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--button-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: var(--button-text-color);
            font-weight: 700;
        }

        .comment-user-info {
            flex: 1;
        }

        .comment-username {
            font-weight: 600;
            color: var(--cyan-glow);
            font-size: 1rem;
        }

        .comment-timestamp {
            font-size: 0.85rem;
            color: rgba(224, 224, 224, 0.5);
        }

        .comment-text {
            line-height: 1.6;
            color: var(--text-color);
        }

        .no-comments {
            text-align: center;
            padding: 3rem;
            color: rgba(224, 224, 224, 0.5);
        }

        .no-comments i {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
            opacity: 0.3;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--cyan-glow);
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            background: var(--dark-navy);
            color: var(--text-color);
            padding: 3rem 0 2rem;
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 255, 255, 0.1);
            text-align: center;
            margin-top: 4rem;
        }

        @media (max-width: 768px) {
            .article-title {
                font-size: 2rem;
            }
            
            .article-content {
                font-size: 1rem;
            }

            .comments-section {
                padding: 1.5rem;
            }

            .audio-player-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="stars-container"></div>
    
    <header class="navbar">
        <div class="container">
            <a href="index.html" class="navbar-brand">Elvion AI</a>
            <nav class="nav-links">
                <li><a href="blog.html">Blog</a></li>
                <li><a href="university.html">University</a></li>
                <li><a href="about.html">About</a></li>
            </nav>
        </div>
    </header>

    <main class="article-container container">
        <a href="blog.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to Blog
        </a>

        <article>
            <header class="article-header">
                <span class="article-category">‚úçÔ∏è Creative Writing</span>
                <h1 class="article-title">How to Craft Unforgettable Characters: A Writer's Guide</h1>
                <div class="article-meta">
                    <span><i class="fas fa-calendar-alt"></i> November 4, 2025</span>
                    <span><i class="fas fa-clock"></i> 8 min read</span>
                    <span><i class="fas fa-user"></i> By Elvion AI Team</span>
                </div>
            </header>

            <!-- Audio Player -->
            <div class="audio-player-section">
                <div class="audio-icon">üéß</div>
                <div style="flex: 1;">
                    <strong style="display: block; margin-bottom: 0.5rem;">Listen to this article</strong>
                    <audio controls style="width: 100%;">
                        <source src="article-audio.mp3" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>

            <div class="article-content">
                <p>Your characters are the beating heart of your story. ‚ù§Ô∏è They're the reason readers turn pages late into the night, shed tears, and remember your work years after finishing it. But creating truly <strong>unforgettable characters</strong> isn't about giving them a cool name or a tragic backstory‚Äîit's about breathing life into them until they feel as real as people you know.</p>

                <p>Whether you're writing your first short story or your tenth novel, mastering character development is the key to captivating your audience. Let's dive deep into proven techniques that will help you create characters readers will never forget. üìö‚ú®</p>

                <h2>üåü What Makes a Character Truly Compelling?</h2>

                <p>Before we explore how to build characters, let's understand what makes them compelling in the first place. According to story development experts, memorable characters share these core qualities:</p>

                <ul>
                    <li><strong>Sympathetic (not necessarily likable)</strong> ‚Äì Readers need to understand and connect with them, even if they're flawed</li>
                    <li><strong>Nuanced and layered</strong> ‚Äì Real people are complex, and so should your characters be</li>
                    <li><strong>Authentically flawed</strong> ‚Äì Perfect characters are boring; flaws make them human</li>
                    <li><strong>Active and driven</strong> ‚Äì They pursue goals and make meaningful choices</li>
                </ul>

                <div class="highlight-box">
                    <strong>üí° Pro Tip:</strong> The most powerful characters aren't just swept along by the plot‚Äîthey drive it forward through their decisions, mistakes, and growth.
                </div>

                <h2>üéØ Start With What Matters Most to Them</h2>

                <p>The foundation of any compelling character is understanding their <strong>deep-rooted motivation</strong>. What do they want more than anything? What are they afraid of losing? What principles would they never compromise? ü§î</p>

                <p>Character motivations are the engine of your story. When you know what truly matters to your protagonist, every scene becomes an opportunity to test them, challenge them, or force them to make impossible choices.</p>

                <h3>Questions to Ask Your Characters:</h3>
                <ul>
                    <li>What do you love most in this world? üíñ</li>
                    <li>What's your greatest fear?</li>
                    <li>What belief drives your decisions?</li>
                    <li>What would you sacrifice everything for?</li>
                    <li>What secret do you hide from everyone?</li>
                </ul>

                <h2>üß† Create Characters From the Inside Out</h2>

                <p>Many writers make the mistake of starting with physical appearance or surface-level traits. While those details matter, truly three-dimensional characters are built from the inside out. Start with their psychological core, then work outward. üé≠</p>

                <h3>The Character Core Method:</h3>

                <ol>
                    <li><strong>Their Wound</strong> ‚Äì What past experience shaped who they are today?</li>
                    <li><strong>Their Belief System</strong> ‚Äì What lies or truths do they believe about themselves and the world?</li>
                    <li><strong>Their Want vs. Need</strong> ‚Äì What do they think they want vs. what they actually need?</li>
                    <li><strong>Their Ghost</strong> ‚Äì What haunts them from their past?</li>
                </ol>

                <p>This internal framework gives you a blueprint for how your character will react to every situation in your story. When the plot throws challenges at them, you'll instinctively know how they'd respond. üé™</p>

                <h2>‚ö° Give Them Genuine Flaws and Fears</h2>

                <p>Here's a secret: readers don't connect with perfect characters. They connect with <strong>flawed, struggling, beautifully imperfect humans</strong> who remind them of themselves or people they know.</p>

                <div class="highlight-box">
                    <strong>Remember:</strong> Flaws aren't just quirks like "talks too much" or "is clumsy." Real flaws are deep-seated issues like pride, fear of vulnerability, inability to trust, or self-destructive patterns. These are the struggles that create internal conflict and character growth. üå±
                </div>

                <p>Your character's flaws should directly conflict with what they want to achieve. If your protagonist is terrified of rejection but needs to open their heart to find love, you've created built-in tension and a compelling character arc. üíî‚û°Ô∏è‚ù§Ô∏è</p>

                <h2>üé¨ Show Character Through Action</h2>

                <p>One of the most powerful writing principles is "<strong>show, don't tell</strong>." Instead of telling readers that your character is brave, show them running into a burning building. Instead of saying they're caring, show them sacrificing their lunch break to help a struggling colleague. ü¶∏</p>

                <p>Actions reveal character more effectively than any description. What your characters <em>do</em> under pressure shows readers who they truly are.</p>

                <h3>Techniques to Reveal Character:</h3>
                <ul>
                    <li><strong>Choices under pressure</strong> ‚Äì How do they react when everything's on the line? ‚ö†Ô∏è</li>
                    <li><strong>Small, consistent behaviors</strong> ‚Äì Habits reveal personality</li>
                    <li><strong>Dialogue patterns</strong> ‚Äì How they speak shows their background, education, and values üí¨</li>
                    <li><strong>Relationships</strong> ‚Äì How they treat others reveals their true nature</li>
                </ul>

                <h2>üìñ Build a Rich Backstory (But Don't Dump It)</h2>

                <p>Your character's history shapes who they are, but that doesn't mean readers need to know everything. The key is knowing your character's backstory intimately so it informs their present actions‚Äîthen revealing it strategically throughout the narrative. üï∞Ô∏è</p>

                <p>Think of backstory like an iceberg: 90% of it stays hidden beneath the surface, subtly influencing everything your character does. Only the most relevant pieces should emerge at the right dramatic moments.</p>

                <h2>üåà Make Them Contradictory and Complex</h2>

                <p>Real people are walking contradictions, and your characters should be too. The tough detective who cries at children's movies. The shy librarian who performs standup comedy. These contradictions make characters feel authentic and surprising. üé≠</p>

                <p>Embrace complexity: your villain can love their dog, your hero can be selfish sometimes, your mentor can have crippling self-doubt. These contradictions don't weaken your characters‚Äîthey make them unforgettable.</p>

                <h2>üí™ Put Them Through Transformation</h2>

                <p>The most satisfying character arcs involve genuine transformation. Your protagonist shouldn't be the same person at the end of your story. They should have grown, changed, learned, or evolved through their experiences. ü¶ã</p>

                <div class="highlight-box">
                    <strong>The Character Arc Formula:</strong><br>
                    1. Start with a flawed belief or limitation<br>
                    2. Challenge them with situations that expose this flaw<br>
                    3. Force them to choose between old patterns and growth<br>
                    4. Show the consequences of their choice<br>
                    5. Reveal their transformation (or tragic failure to transform)
                </div>

                <h2>‚ú® Final Thoughts</h2>

                <p>Creating unforgettable characters is both an art and a craft. It requires deep empathy, careful planning, and the courage to explore the full spectrum of human experience‚Äîincluding the messy, uncomfortable parts. üé®</p>

                <p>Remember: your characters don't need to be likable, but they must be <strong>understandable, compelling, and real</strong>. Give them depth, contradictions, motivations, and room to grow. Let them make mistakes, struggle with internal conflicts, and ultimately transform through their journey.</p>

                <p>When you invest this level of care into your characters, readers won't just read your story‚Äîthey'll live it through the eyes of people who feel as real as friends. And that's when the magic happens. ‚ú®üìö</p>

                <p><strong>Now go forth and create characters that will live forever in your readers' hearts! üíñ</strong></p>
            </div>
        </article>

        <!-- Comments Section -->
        <section class="comments-section">
            <div class="comments-header">
                <h3>üí¨ Comments</h3>
                <span class="comment-count" id="commentCount">0</span>
            </div>

            <!-- Authentication Notice -->
            <div class="auth-notice" id="authNotice">
                <i class="fas fa-info-circle"></i>
                <span>Sign in to comment, or leave a quick comment with your email below! üòä</span>
                <div class="auth-links">
                    <a href="signup-login.html">Sign In</a>
                </div>
            </div>

            <!-- Comment Form -->
            <form class="comment-form" id="commentForm">
                <div class="form-group" id="emailGroup">
                    <label for="userEmail">Your Email (optional if signed in) üìß</label>
                    <input type="email" id="userEmail" placeholder="your@email.com" autocomplete="email">
                </div>
                
                <div class="form-group">
                    <label for="userName">Your Name ‚ú®</label>
                    <input type="text" id="userName" placeholder="What should we call you?" required autocomplete="name">
                </div>

                <div class="form-group">
                    <label for="commentText">Share your thoughts üí≠</label>
                    <textarea id="commentText" placeholder="What did you think about this article? Do you have tips to share?" required></textarea>
                </div>

                <button type="submit" class="btn-submit" id="submitBtn">
                    <i class="fas fa-paper-plane"></i> Post Comment
                </button>
            </form>

            <!-- Comments List -->
            <div class="comments-list" id="commentsList">
                <div class="loading">
                    <i class="fas fa-spinner"></i> Loading comments...
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; <span id="current-year"></span> Elvion AI. All rights reserved. ‚ú®</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration (Replace with your actual config)
        const firebaseConfig = {
            apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk",
            authDomain: "elvionai.firebaseapp.com",
            projectId: "elvionai",
            storageBucket: "elvionai.firebasestorage.app",
            messagingSenderId: "161078300830",
            appId: "1:161078300830:web:f460df8591704eb0e96b8f"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Article ID for this specific blog post
        const articleId = 'craft-unforgettable-characters';

        // Check authentication state
        let currentUser = null;

        auth.onAuthStateChanged(user => {
            currentUser = user;
            if (user) {
                document.getElementById('authNotice').innerHTML = `
                    <i class="fas fa-user-check"></i>
                    <span>Signed in as <strong>${user.displayName || user.email}</strong> üëã</span>
                    <div class="auth-links">
                        <a href="#" onclick="firebase.auth().signOut(); return false;">Sign Out</a>
                    </div>
                `;
                document.getElementById('emailGroup').style.display = 'none';
                document.getElementById('userName').value = user.displayName || '';
            }
        });

        // Load comments
        function loadComments() {
            db.collection('comments')
                .where('articleId', '==', articleId)
                .orderBy('timestamp', 'desc')
                .onSnapshot(snapshot => {
                    const commentsList = document.getElementById('commentsList');
                    const commentCount = document.getElementById('commentCount');
                    
                    if (snapshot.empty) {
                        commentsList.innerHTML = `
                            <div class="no-comments">
                                <i class="fas fa-comments"></i>
                                <p>No comments yet. Be the first to share your thoughts! üåü</p>
                            </div>
                        `;
                        commentCount.textContent = '0';
                        return;
                    }

                    commentCount.textContent = snapshot.size;
                    commentsList.innerHTML = '';

                    snapshot.forEach(doc => {
                        const comment = doc.data();
                        const commentEl = createCommentElement(comment);
                        commentsList.appendChild(commentEl);
                    });
                });
        }

        // Create comment element
        function createCommentElement(comment) {
            const div = document.createElement('div');
            div.className = 'comment';
            
            const initial = comment.userName.charAt(0).toUpperCase();
            const timestamp = comment.timestamp ? new Date(comment.timestamp.toDate()).toLocaleString() : 'Just now';
            
            div.innerHTML = `
                <div class="comment-header">
                    <div class="comment-avatar">${initial}</div>
                    <div class="comment-user-info">
                        <div class="comment-username">${escapeHtml(comment.userName)}</div>
                        <div class="comment-timestamp">üïê ${timestamp}</div>
                    </div>
                </div>
                <div class="comment-text">${escapeHtml(comment.text)}</div>
            `;
            
            return div;
        }

        // Handle comment submission
        document.getElementById('commentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const userName = document.getElementById('userName').value.trim();
            const commentText = document.getElementById('commentText').value.trim();
            const userEmail = document.getElementById('userEmail').value.trim();

            if (!userName || !commentText) {
                alert('Please fill in all required fields! üòä');
                return;
            }

            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Posting...';

            try {
                await db.collection('comments').add({
                    articleId: articleId,
                    userName: userName,
                    email: userEmail || (currentUser ? currentUser.email : 'anonymous'),
                    userId: currentUser ? currentUser.uid : 'guest',
                    text: commentText,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Clear form
                document.getElementById('commentText').value = '';
                if (!currentUser) {
                    document.getElementById('userName').value = '';
                    document.getElementById('userEmail').value = '';
                }

                // Show success
                alert('Comment posted successfully! üéâ');
            } catch (error) {
                console.error('Error posting comment:', error);
                alert('Oops! Failed to post comment. Please try again. üòÖ');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Post Comment';
            }
        });

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize stars animation
        document.addEventListener('DOMContentLoaded', () => {
            const starsContainer = document.getElementById('stars-container');
            const numStars = 100;
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 4}s`;
                star.style.animationDuration = `${3 + Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }

            document.getElementById('current-year').textContent = new Date().getFullYear();

            // Load comments
            loadComments();
        });
    </script>
</body>
</html>
