<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Elvion University</title>
  <meta name="description" content="Your personalized learning dashboard at Elvion University. Track progress, explore courses, and access Elvion AI tools.">
  <link rel="icon" href="https://i.postimg.cc/PqVhDskJ/file-00000000c7646246889393752cff8df2.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --dark-navy: #00001a;
      --black-bg: #000000;
      --cyan-glow: #00ffff;
      --light-blue-glow: #00aaff;
      --text-color: #e0e0e0;
      --heading-color: #ffffff;
      --gradient-start: #0a1128;
      --gradient-end: #121a30;
      --card-bg: rgba(18, 26, 48, 0.7);
      --border-glow: 0 0 10px var(--cyan-glow), 0 0 20px var(--light-blue-glow);
      --hover-glow: 0 0 15px var(--cyan-glow), 0 0 30px var(--light-blue-glow);
      --button-bg: linear-gradient(45deg, var(--cyan-glow), var(--light-blue-glow));
      --button-text-color: var(--black-bg);
      --star-color: rgba(255, 255, 255, 0.7);
      --progress-bg: rgba(224, 224, 224, 0.1);
      --progress-fill: linear-gradient(90deg, var(--cyan-glow), var(--light-blue-glow));
    }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', sans-serif;
      margin: 0; padding: 0;
      background-color: var(--black-bg);
      color: var(--text-color);
      line-height: 1.7;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Orbitron', sans-serif;
      color: var(--heading-color);
      margin-top: 0;
      text-shadow: var(--border-glow);
    }
    h1 { font-size: 3.5rem; }
    h2 { font-size: 2.5rem; }
    h3 { font-size: 1.8rem; }
    strong { color: var(--cyan-glow); font-weight: 600; }
    a {
      color: var(--cyan-glow);
      text-decoration: none;
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    a:hover {
      color: var(--light-blue-glow);
      text-shadow: 0 0 5px var(--cyan-glow);
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    section {
      padding: 3rem 0; /* Reduced padding for dashboard sections */
      position: relative;
      z-index: 2;
    }
    .text-center { text-align: center; }
    .lead {
      font-size: 1.2rem;
      max-width: 800px;
      margin: 1rem auto 3rem auto;
      color: rgba(224, 224, 224, 0.9);
      line-height: 1.8;
    }
    .btn {
      display: inline-block;
      padding: 0.9rem 2.2rem;
      border-radius: 50px;
      font-weight: 600;
      font-family: 'Orbitron', sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      border: none;
      color: var(--button-text-color);
      background: var(--button-bg);
      box-shadow: var(--border-glow);
      text-shadow: none;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--hover-glow);
      color: var(--black-bg);
    }
    #stars-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
    .star { position: absolute; background-color: var(--star-color); border-radius: 50%; opacity: 0; animation: twinkle 4s infinite ease-in-out; }
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* Dashboard Specific Styles */
    .dashboard-layout {
      display: flex;
      flex: 1; /* Allows main content to grow */
      padding-top: 80px; /* Space for fixed navbar */
      position: relative;
      z-index: 1;
    }
    .sidebar {
      width: 250px;
      background: rgba(0, 0, 26, 0.95);
      padding: 2rem 0;
      box-shadow: 4px 0 20px rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-right: 1px solid rgba(0, 255, 255, 0.2);
      position: fixed;
      height: calc(100% - 80px); /* Adjust for navbar height */
      top: 80px;
      overflow-y: auto;
    }
    .sidebar-nav {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .sidebar-nav li {
      margin-bottom: 0.5rem;
    }
    .sidebar-nav a {
      display: flex;
      align-items: center;
      padding: 1rem 1.5rem;
      color: var(--text-color);
      font-weight: 500;
      transition: background 0.3s ease, color 0.3s ease, text-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .sidebar-nav a i {
      margin-right: 1rem;
      font-size: 1.2rem;
      color: var(--cyan-glow);
      text-shadow: 0 0 5px var(--cyan-glow);
    }
    .sidebar-nav a::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: var(--cyan-glow);
      box-shadow: 0 0 10px var(--cyan-glow);
      transform: translateX(-100%);
      transition: transform 0.3s ease-in-out;
    }
    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      background: rgba(0, 255, 255, 0.08);
      color: var(--heading-color);
      text-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
    }
    .sidebar-nav a.active::before {
      transform: translateX(0);
    }

    .main-content {
      flex: 1;
      margin-left: 250px; /* Offset for sidebar */
      padding: 2rem;
      background: linear-gradient(45deg, var(--gradient-start), var(--gradient-end));
      min-height: calc(100vh - 80px - 4rem); /* Full height minus navbar and footer padding */
    }
    .dashboard-section {
      display: none; /* Hidden by default, shown by JS */
      animation: fadeIn 0.5s ease-out;
    }
    .dashboard-section.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Welcome Banner */
    .welcome-banner {
      background: linear-gradient(90deg, rgba(0, 255, 255, 0.1), rgba(0, 170, 255, 0.1));
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 3rem;
      text-align: center;
      box-shadow: var(--border-glow);
      position: relative;
      overflow: hidden;
    }
    .welcome-banner::before {
      content: '';
      position: absolute;
      top: -20%; left: -20%;
      width: 140%; height: 140%;
      background: radial-gradient(circle at 70% 30%, rgba(0,255,255,0.1) 0%, transparent 40%);
      animation: pulse-glow 10s infinite alternate ease-in-out;
      z-index: 0;
    }
    @keyframes pulse-glow {
      0% { transform: scale(1); opacity: 0.8; }
      100% { transform: scale(1.1) translate(5%, 5%); opacity: 1; }
    }
    .welcome-banner h2 {
      font-size: 2.2rem;
      margin-bottom: 0.8rem;
      color: var(--cyan-glow);
      text-shadow: 0 0 10px var(--cyan-glow);
      position: relative; z-index: 1;
    }
    .welcome-banner p {
      font-size: 1.1rem;
      color: var(--text-color);
      position: relative; z-index: 1;
    }

    /* Course Cards (My Courses) */
    .course-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }
    .dashboard-course-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--border-glow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(0, 255, 255, 0.1);
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .dashboard-course-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--hover-glow);
    }
    .dashboard-course-card h3 {
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }
    .dashboard-course-card p {
      font-size: 0.95rem;
      color: rgba(224, 224, 224, 0.8);
      flex-grow: 1;
    }
    .progress-bar-container {
      width: 100%;
      background-color: var(--progress-bg);
      border-radius: 10px;
      height: 10px;
      margin-top: 1rem;
      overflow: hidden;
      box-shadow: inset 0 0 5px rgba(0, 255, 255, 0.2);
    }
    .progress-bar-fill {
      height: 100%;
      width: 0%; /* Will be set by JS */
      background: var(--progress-fill);
      border-radius: 10px;
      transition: width 0.5s ease-out;
      box-shadow: 0 0 8px var(--cyan-glow);
    }
    .progress-text {
      font-size: 0.9rem;
      color: var(--cyan-glow);
      margin-top: 0.5rem;
      font-weight: 600;
      text-align: right;
    }
    .dashboard-course-card .btn {
      width: 100%;
      padding: 0.7rem 1.5rem;
      margin-top: 1.5rem;
      font-size: 0.95rem;
    }

    /* Course Detail View */
    #courseDetailSection {
        display: none;
    }
    .course-detail-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    .course-detail-header h2 {
      font-size: 2.8rem;
      color: var(--light-blue-glow);
      text-shadow: 0 0 12px var(--light-blue-glow), 0 0 25px var(--cyan-glow);
    }
    .course-detail-header p {
      max-width: 900px;
      margin: 1rem auto;
      font-size: 1.1rem;
      color: rgba(224, 224, 224, 0.9);
    }
    .course-modules {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--border-glow);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(0, 255, 255, 0.1);
    }
    .course-modules h3 {
      margin-bottom: 1.5rem;
      color: var(--cyan-glow);
      text-align: center;
    }
    .module-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(0, 255, 255, 0.05);
      transition: background 0.3s ease, transform 0.2s ease;
    }
    .module-item:hover {
      background: rgba(0, 255, 255, 0.05);
      transform: translateX(5px);
    }
    .module-info {
      display: flex;
      align-items: center;
      flex-grow: 1;
    }
    .module-info i {
      margin-right: 1rem;
      color: var(--light-blue-glow);
      font-size: 1.3rem;
    }
    .module-info span {
      font-weight: 500;
      font-size: 1.1rem;
    }
    .module-status {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .module-status .status-text {
      font-size: 0.9rem;
      color: rgba(224, 224, 224, 0.7);
    }
    .module-status .status-icon {
      color: var(--cyan-glow);
      font-size: 1.2rem;
    }
    .module-status .btn {
        padding: 0.5rem 1.2rem;
        font-size: 0.9rem;
        border-radius: 25px;
        margin: 0;
    }
    .lesson-content {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 2rem;
        margin-top: 2rem;
        border: 1px solid rgba(0, 255, 255, 0.1);
    }
    .lesson-content h4 {
        color: var(--cyan-glow);
        margin-bottom: 1rem;
    }
    .lesson-content iframe, .lesson-content audio {
        width: 100%;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }

    /* Explore Courses (reusing university.html styles) */
    .explore-courses-section .course-faculty { margin-bottom: 2rem; }
    .explore-courses-section .course-faculty h2 { font-size: 2rem; }
    .explore-courses-section .course-card { cursor: pointer; } /* Enable modal click */

    /* My Progress / Achievements */
    .progress-summary {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 3rem;
    }
    .progress-circle {
      position: relative;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: conic-gradient(var(--cyan-glow) var(--progress-percentage), var(--progress-bg) 0%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--heading-color);
      box-shadow: var(--hover-glow);
      margin-bottom: 1.5rem;
    }
    .progress-circle::after {
      content: '';
      position: absolute;
      background: var(--card-bg);
      width: 170px;
      height: 170px;
      border-radius: 50%;
    }
    .progress-circle span {
      position: relative;
      z-index: 1;
      text-shadow: var(--border-glow);
    }
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    .achievement-card {
      background: var(--card-bg);
      border-radius: 10px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 0 8px rgba(0, 255, 255, 0.2);
      border: 1px solid rgba(0, 255, 255, 0.1);
      transition: transform 0.2s ease;
    }
    .achievement-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 12px var(--cyan-glow);
    }
    .achievement-card i {
      font-size: 3rem;
      color: var(--light-blue-glow);
      margin-bottom: 0.8rem;
      text-shadow: 0 0 10px var(--light-blue-glow);
    }
    .achievement-card h4 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: var(--cyan-glow);
    }
    .achievement-card p {
      font-size: 0.9rem;
      color: rgba(224, 224, 224, 0.7);
    }
    .certificate-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: var(--border-glow);
      border: 1px solid rgba(0, 255, 255, 0.1);
      margin-top: 2rem;
    }
    .certificate-card h3 {
        color: var(--cyan-glow);
        margin-bottom: 1rem;
    }
    .certificate-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        justify-content: center;
    }
    .certificate-item {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        padding: 1rem;
        border: 1px solid rgba(0, 255, 255, 0.08);
        text-align: left;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 280px;
    }
    .certificate-item h4 {
        font-size: 1.1rem;
        color: var(--light-blue-glow);
        margin-bottom: 0.5rem;
    }
    .certificate-item p {
        font-size: 0.85rem;
        color: rgba(224, 224, 224, 0.6);
        flex-grow: 1;
    }
    .certificate-item .btn {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
        margin-top: 1rem;
    }

    /* Elvion AI Tools */
    .ai-tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }
    .tool-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--border-glow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(0, 255, 255, 0.1);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .tool-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--hover-glow);
    }
    .tool-card i {
      font-size: 3.5rem;
      color: var(--cyan-glow);
      margin-bottom: 1rem;
      text-shadow: 0 0 10px var(--cyan-glow);
    }
    .tool-card h3 {
      font-size: 1.5rem;
      margin-bottom: 0.8rem;
    }
    .tool-card p {
      font-size: 0.95rem;
      color: rgba(224, 224, 224, 0.8);
      flex-grow: 1;
      margin-bottom: 1.5rem;
    }
    .tool-card .btn {
      padding: 0.8rem 2rem;
      font-size: 0.9rem;
      width: auto;
    }

    /* Community & Support */
    .support-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      text-align: center;
    }
    .support-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--border-glow);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(0, 255, 255, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .support-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-glow);
    }
    .support-card i {
      font-size: 3rem;
      color: var(--light-blue-glow);
      margin-bottom: 1rem;
      text-shadow: 0 0 10px var(--light-blue-glow);
    }
    .support-card h3 {
      font-size: 1.4rem;
      margin-bottom: 0.8rem;
    }
    .support-card p {
      font-size: 0.95rem;
      color: rgba(224, 224, 224, 0.8);
      margin-bottom: 1.5rem;
    }
    .support-card .btn {
      padding: 0.7rem 1.8rem;
      font-size: 0.9rem;
    }


    /* Navbar (from university.html, adapted for dashboard) */
    .navbar {
      position: fixed; top: 0; width: 100%;
      background: rgba(0, 0, 26, 0.9); padding: 0.8rem 0; z-index: 1000;
      box-shadow: 0 4px 20px rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 255, 255, 0.2);
    }
    .navbar .container {
      display: flex; justify-content: space-between; align-items: center;
    }
    .navbar-brand {
      font-family: 'Orbitron', sans-serif; font-size: 1.6rem; font-weight: 700;
      color: var(--heading-color); text-shadow: var(--border-glow);
      margin-right: auto; /* Push user items to the right */
    }
    .navbar-user-area {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    .user-greeting {
      font-size: 1rem;
      color: var(--text-color);
      font-weight: 500;
    }
    .profile-dropdown-container {
      position: relative;
      z-index: 1001;
    }
    .profile-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--cyan-glow);
      color: var(--black-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: var(--border-glow);
      transition: box-shadow 0.3s ease;
    }
    .profile-avatar:hover {
      box-shadow: var(--hover-glow);
    }
    .profile-dropdown {
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      background: rgba(0, 0, 26, 0.95);
      border-radius: 10px;
      box-shadow: var(--hover-glow);
      border: 1px solid rgba(0, 255, 255, 0.2);
      min-width: 180px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    }
    .profile-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    .profile-dropdown ul {
      list-style: none;
      padding: 0.5rem 0;
      margin: 0;
    }
    .profile-dropdown ul li a {
      display: block;
      padding: 0.8rem 1.5rem;
      color: var(--text-color);
      font-weight: 400;
      transition: background 0.2s ease, color 0.2s ease;
    }
    .profile-dropdown ul li a:hover {
      background: rgba(0, 255, 255, 0.1);
      color: var(--cyan-glow);
    }

    /* Modal for Course Details (reused from university.html) */
    .modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; }
    .modal-content {
      background: var(--gradient-start); border: 2px solid var(--cyan-glow); border-radius: 15px; padding: 2rem;
      max-width: 700px; width: 90%; max-height: 85vh; overflow-y: auto; position: relative; box-shadow: var(--hover-glow);
    }
    .close-modal { position: absolute; top: 15px; right: 20px; font-size: 2rem; color: var(--cyan-glow); cursor: pointer; }
    .modal-video { margin: 1rem 0; }
    .modal-video iframe, .modal-video audio { width: 100%; height: 250px; border-radius: 10px; }
    .modal-section { margin: 1.5rem 0; }
    .modal-section h4 { color: var(--cyan-glow); margin-bottom: 0.8rem; font-size: 1.2rem; }
    .course-list { background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 8px; margin-top: 1rem; }
    .course-item { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid rgba(0, 255, 255, 0.1); }
    .course-item:last-child { border-bottom: none; }
    .course-code { color: var(--light-blue-glow); font-weight: 600; font-size: 0.9rem; }
    .modal-take-course-btn { /* Style for button inside modal */
        width: auto;
        padding: 0.8rem 2.2rem;
        margin-top: 2rem;
        border-radius: 50px;
        font-size: 1rem;
    }

    /* Footer */
    .footer {
      background: var(--dark-navy); color: var(--text-color); padding: 2rem 0; font-size: 0.9rem; border-top: 1px solid rgba(0, 255, 255, 0.1);
      z-index: 2;
    }
    .footer .container { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 1rem; }
    .footer .col { flex: 1; min-width: 150px; }
    .footer h4 { font-size: 1.1rem; margin-bottom: 1rem; color: var(--cyan-glow); }
    .footer ul { list-style: none; padding: 0; }
    .footer ul li { margin-bottom: 0.5rem; }
    .footer .brand-info { font-family: 'Orbitron', sans-serif; font-size: 1.3rem; font-weight: 700; color: var(--heading-color); margin-bottom: 0.8rem; }
    .footer .legal-info {
      margin-top: 1.5rem; text-align: center; width: 100%; border-top: 1px solid rgba(0, 255, 255, 0.1); padding-top: 1rem; color: rgba(224, 224, 224, 0.7);
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .sidebar {
        width: 80px; /* Collapsed sidebar */
        padding: 1rem 0;
      }
      .sidebar-nav a {
        justify-content: center;
        padding: 1rem 0.5rem;
      }
      .sidebar-nav a span {
        display: none; /* Hide text */
      }
      .sidebar-nav a i {
        margin-right: 0;
      }
      .main-content {
        margin-left: 80px; /* Adjust offset */
      }
      .navbar-user-area {
        gap: 1rem;
      }
      .user-greeting {
        display: none; /* Hide greeting on smaller screens */
      }
    }

    @media (max-width: 768px) {
      .dashboard-layout {
        flex-direction: column;
        padding-top: 60px; /* Adjust for smaller navbar */
      }
      .navbar {
        padding: 0.5rem 0;
      }
      .navbar-brand {
        font-size: 1.4rem;
      }
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        top: 0;
        box-shadow: none;
        border-right: none;
        border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        display: none; /* Hidden by default, toggled by hamburger */
      }
      .sidebar.active {
        display: block;
      }
      .sidebar-nav {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
      .sidebar-nav li {
        margin: 0.5rem 1rem;
      }
      .sidebar-nav a {
        flex-direction: column;
        text-align: center;
        padding: 0.5rem 1rem;
        border-radius: 10px;
      }
      .sidebar-nav a span {
        display: block; /* Show text again for vertical layout */
        font-size: 0.8rem;
        margin-top: 0.3rem;
      }
      .sidebar-nav a i {
        margin-right: 0;
        margin-bottom: 0.3rem;
      }
      .sidebar-nav a::before {
        display: none; /* Hide side bar on mobile */
      }
      .main-content {
        margin-left: 0;
        padding: 1rem;
        min-height: calc(100vh - 60px - 4rem - var(--sidebar-height-mobile, 0px)); /* Dynamic height */
      }
      .welcome-banner h2 {
        font-size: 1.8rem;
      }
      .welcome-banner p {
        font-size: 1rem;
      }
      .course-grid, .ai-tools-grid, .support-grid, .achievements-grid, .certificate-list {
        grid-template-columns: 1fr;
      }
      .footer .container {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div id="stars-container"></div>

  <header class="navbar">
    <div class="container">
      <a href="index.html" class="navbar-brand">Elvion AI</a>
      <div class="navbar-user-area">
        <span class="user-greeting" id="userGreeting">Welcome, Elvion Learner!</span>
        <div class="profile-dropdown-container">
          <div class="profile-avatar" id="profileAvatar">E</div>
          <div class="profile-dropdown" id="profileDropdown">
            <ul>
              <li><a href="https://elvionai.github.io/profile.html" target="_blank" rel="noopener noreferrer"><i class="fas fa-user-circle"></i> My Profile</a></li>
              <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
              <li><a href="#" id="logoutButton"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
          </div>
        </div>
      </div>
      <button class="hamburger" aria-label="Toggle navigation" style="display: none;">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </div>
  </header>

  <div class="dashboard-layout">
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <li><a href="#" data-section="myCourses" class="active"><i class="fas fa-book-open"></i> <span>My Courses</span></a></li>
        <li><a href="#" data-section="exploreCourses"><i class="fas fa-search"></i> <span>Explore Courses</span></a></li>
        <li><a href="#" data-section="myProgress"><i class="fas fa-trophy"></i> <span>My Progress</span></a></li>
        <li><a href="#" data-section="aiTools"><i class="fas fa-robot"></i> <span>Elvion AI Tools</span></a></li>
        <li><a href="#" data-section="communitySupport"><i class="fas fa-users"></i> <span>Community & Support</span></a></li>
      </nav>
    </aside>

    <main class="main-content">
      <!-- My Courses Section -->
      <section id="myCoursesSection" class="dashboard-section active">
        <div class="welcome-banner">
          <h2 id="welcomeUserMessage">Welcome back, Elvion Learner!</h2>
          <p>Your journey to mastery continues. Pick up where you left off or explore new opportunities.</p>
        </div>

        <h3>Your Learning Journey</h3>
        <p class="lead" id="enrolledCoursesLead">Keep pushing forward! Here are the courses you're currently enrolled in.</p>
        <div class="course-grid" id="myEnrolledCourses">
          <!-- Enrolled course cards will be injected here by JavaScript -->
        </div>
        <div id="noCoursesMessage" style="display: none; text-align: center; margin-top: 3rem;">
            <p class="lead">Looks like your learning adventure hasn't begun! ✨</p>
            <button class="btn" onclick="showSection('exploreCourses')">Explore Our Curriculum</button>
        </div>
      </section>

      <!-- Course Detail Section (Initially hidden) -->
      <section id="courseDetailSection" class="dashboard-section">
        <div class="course-detail-header">
            <button class="btn" onclick="showSection('myCourses')" style="margin-bottom: 2rem; padding: 0.7rem 1.5rem; font-size: 0.9rem;"><i class="fas fa-arrow-left"></i> Back to My Courses</button>
            <h2 id="courseDetailTitle"></h2>
            <p id="courseDetailDescription"></p>
        </div>
        <div class="course-modules" id="courseModulesContainer">
            <h3>Course Modules</h3>
            <div id="courseModulesList">
                <!-- Modules will be injected here by JavaScript -->
            </div>
            <div class="lesson-content" id="lessonContent" style="display:none;">
                <h4>Current Lesson: <span id="currentLessonTitle"></span></h4>
                <div id="lessonMedia"></div>
                <p id="lessonText"></p>
                <div style="text-align: right; margin-top: 1.5rem;">
                    <button class="btn" id="markLessonCompleteBtn"><i class="fas fa-check-circle"></i> Mark as Complete</button>
                </div>
            </div>
        </div>
      </section>

      <!-- Explore Courses Section -->
      <section id="exploreCoursesSection" class="dashboard-section explore-courses-section">
        <h2>Discover Your Next Challenge</h2>
        <p class="lead">Expand your horizons with our diverse range of free, accredited programs.</p>
        <div class="course-faculty">
          <h3>Faculty of Science & Technology</h3>
          <div class="course-grid" id="sciTechCourses"></div>
        </div>
        <div class="course-faculty">
          <h3>Faculty of Law</h3>
          <div class="course-grid" id="lawCourses"></div>
        </div>
        <div class="course-faculty">
          <h3>Faculty of Arts & Humanities</h3>
          <div class="course-grid" id="artsCourses"></div>
        </div>
        <div class="course-faculty">
          <h3>Faculty of Management & Social Sciences</h3>
          <div class="course-grid" id="managementCourses"></div>
        </div>
        <div class="course-faculty">
          <h3>Faculty of Education</h3>
          <div class="course-grid" id="educationCourses"></div>
        </div>
      </section>

      <!-- My Progress / Achievements Section -->
      <section id="myProgressSection" class="dashboard-section">
        <h2>Your Learning Milestones</h2>
        <p class="lead">Celebrate your achievements and see how far you've come!</p>

        <div class="progress-summary">
            <div class="progress-circle" id="overallProgressCircle" style="--progress-percentage: 0%;">
                <span id="overallProgressText">0%</span>
            </div>
            <p style="font-size: 1.2rem; font-weight: 600;">Overall Progress Across All Courses</p>
        </div>

        <h3 style="text-align: center; margin-top: 3rem;">Achievements Unlocked</h3>
        <div class="achievements-grid" id="achievementsGrid">
            <!-- Achievements will be injected here -->
            <div class="achievement-card">
                <i class="fas fa-star"></i>
                <h4>First Step</h4>
                <p>Completed your first module.</p>
            </div>
            <div class="achievement-card">
                <i class="fas fa-award"></i>
                <h4>Course Starter</h4>
                <p>Enrolled in 3 courses.</p>
            </div>
            <div class="achievement-card">
                <i class="fas fa-graduation-cap"></i>
                <h4>Dedicated Learner</h4>
                <p>Completed 1 full course.</p>
            </div>
        </div>

        <h3 style="text-align: center; margin-top: 3rem;">Your Certificates</h3>
        <div class="certificate-card">
            <p class="lead" id="noCertificatesMessage">No certificates earned yet. Keep learning to unlock them!</p>
            <div class="certificate-list" id="myCertificates">
                <!-- Certificates will be injected here -->
            </div>
        </div>
      </section>

      <!-- Elvion AI Tools Section -->
      <section id="aiToolsSection" class="dashboard-section">
        <h2>Elvion AI Command Center</h2>
        <p class="lead">Supercharge your studies and creativity with instant access to Elvion AI's powerful tools.</p>
        <div class="ai-tools-grid">
          <div class="tool-card">
            <i class="fas fa-comments"></i>
            <h3>Philadelphia AI Chat</h3>
            <p>Your warm, insightful, and creative AI companion for writing, learning, and chatting.</p>
            <a href="philadelphia.html" class="btn">Chat with Philly!</a>
          </div>
          <div class="tool-card">
            <i class="fas fa-robot"></i>
            <h3>Seraphina AI (Telegram)</h3>
            <p>Experience advanced text generation and emotional intelligence. Your personal creative assistant.</p>
            <a href="https://t.me/PhiladelphiaAIbot" target="_blank" rel="noopener noreferrer" class="btn">Try Seraphina!</a>
          </div>
          <div class="tool-card">
            <i class="fas fa-image"></i>
            <h3>Generate Image</h3>
            <p>Bring your ideas to life. Create stunning visuals from text prompts using Elvion's image tools.</p>
            <a href="philadelphia.html#tools" class="btn">Generate Image</a>
          </div>
          <div class="tool-card">
            <i class="fas fa-music"></i>
            <h3>Generate Music</h3>
            <p>Compose unique tunes and soundtracks. Describe your music, add lyrics, or provide a reference.</p>
            <a href="philadelphia.html#tools" class="btn">Create Music</a>
          </div>
          <div class="tool-card">
            <i class="fas fa-globe"></i>
            <h3>Create Website</h3>
            <p>Instantly build and deploy custom HTML websites with zero coding. Just describe what you want!</p>
            <a href="philadelphia.html#tools" class="btn">Build a Site</a>
          </div>
          <div class="tool-card">
            <i class="fas fa-file-pdf"></i>
            <h3>Research Report</h3>
            <p>Generate comprehensive, well-researched reports on any topic in PDF format.</p>
            <a href="philadelphia.html#tools" class="btn">Get a Report</a>
          </div>
        </div>
        <p class="lead" style="margin-top: 3rem;">Remember, all these tools and more are accessible via the 🔧 (wrench/tools icon) in the <a href="philadelphia.html">Philadelphia AI chat interface</a>!</p>
      </section>

      <!-- Community & Support Section -->
      <section id="communitySupportSection" class="dashboard-section">
        <h2>Connect & Get Help</h2>
        <p class="lead">Join our vibrant community and find answers to your questions.</p>
        <div class="support-grid">
            <div class="support-card">
                <i class="fas fa-question-circle"></i>
                <h3>FAQs</h3>
                <p>Find quick answers to common questions about courses, enrollment, and the platform.</p>
                <a href="#" class="btn">View FAQs</a>
            </div>
            <div class="support-card">
                <i class="fas fa-comments"></i>
                <h3>Community Forum</h3>
                <p>Engage with fellow learners, discuss topics, and share knowledge.</p>
                <a href="#" class="btn">Join Forum</a>
            </div>
            <div class="support-card">
                <i class="fas fa-life-ring"></i>
                <h3>Contact Support</h3>
                <p>Can't find what you're looking for? Reach out to our support team.</p>
                <a href="#" class="btn">Get Support</a>
            </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Course Detail Modal (for Explore Courses) -->
  <div id="modal" class="modal" onclick="hideModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <span class="close-modal" onclick="hideModal()">&times;</span>
      <h3 id="modal-title"></h3>
      <div class="modal-section">
        <h4>Course Introduction</h4>
        <div id="modal-description"></div>
      </div>
      <div id="modal-media" class="modal-video"></div>
      <div class="modal-section">
        <div><strong>Duration:</strong> <span id="modal-duration"></span></div>
        <div id="modal-jobs"></div>
      </div>
      <div class="modal-section">
        <h4>Courses & Course Codes</h4>
        <div class="course-list" id="modal-courses"></div>
      </div>
      <div style="text-align: center; margin-top: 2rem;">
        <button class="btn modal-take-course-btn" id="modal-enroll-btn">Enroll Now</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="col">
        <span class="brand-info">Elvion AI</span>
        <p>Where Assistance Meets Excellence.</p>
      </div>
      <div class="col">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#features">Features</a></li>
          <li><a href="index.html#products">Products</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>Company</h4>
        <ul>
          <li><a href="about.html">About Us</a></li>
          <li><a href="about.html#">Careers</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>Legal</h4>
        <ul>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
        </ul>
      </div>
      <div class="legal-info">
        &copy; <span id="current-year"></span> Elvion AI. All rights reserved.
      </div>
    </div>
  </footer>

  <script>
    // --- DUMMY DATA (Replace with Firebase/Backend Integration) ---
    const currentUser = {
      uid: "user123",
      displayName: "Alex Johnson",
      email: "alex.johnson@example.com",
      initial: "A"
    };

    const allUniversityCourses = [
      {
        id: "comp-sci",
        title: "Computer Science",
        description: "Learn the fundamentals of computing, programming languages, algorithms, data structures, software engineering, and system design. This comprehensive program prepares students for careers in the rapidly evolving technology sector.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Software Developer/Engineer</li><li>Systems Analyst</li><li>Database Administrator</li><li>IT Consultant</li><li>Web Developer</li><li>Data Scientist</li></ul>",
        mediaPath: "https://www.youtube.com/embed/5Qwwjych21o",
        mediaType: "video",
        modules: "CSC 101: Introduction to Programming|CSC 102: Data Structures|CSC 201: Object-Oriented Programming|CSC 202: Database Systems|CSC 301: Software Engineering|CSC 302: Computer Networks|CSC 401: Artificial Intelligence|CSC 402: Final Year Project",
        faculty: "sciTech"
      },
      {
        id: "software-eng",
        title: "Software Engineering",
        description: "Master the principles of designing, developing, testing, and maintaining large-scale software systems. Learn industry best practices, project management, and modern development methodologies.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Software Engineer</li><li>Technical Lead</li><li>Product Manager</li><li>DevOps Engineer</li><li>Quality Assurance Engineer</li><li>Solutions Architect</li></ul>",
        mediaPath: "https://www.youtube.com/embed/jMO9-bEDPq0",
        mediaType: "video",
        modules: "SWE 101: Software Development Fundamentals|SWE 201: Software Design Patterns|SWE 202: Software Testing and Quality Assurance|SWE 301: Project Management|SWE 302: Agile Development|SWE 401: Software Architecture|SWE 402: Capstone Project",
        faculty: "sciTech"
      },
      {
        id: "law-llb",
        title: "Law (LLB)",
        description: "Comprehensive study of legal principles, constitutional law, criminal law, civil law, and legal practice. This program combines theoretical knowledge with practical skills in legal research and advocacy.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Barrister</li><li>Solicitor</li><li>Legal Advisor</li><li>Judge/Magistrate</li><li>Corporate Lawyer</li><li>Human Rights Advocate</li><li>Legal Researcher</li></ul>",
        mediaPath: "https://www.youtube.com/embed/_c6iHL2Zd5o",
        mediaType: "video",
        modules: "LAW 101: Introduction to Law|LAW 102: Constitutional Law|LAW 201: Criminal Law|LAW 202: Contract Law|LAW 301: Tort Law|LAW 302: Property Law|LAW 401: Legal Practice and Procedure|LAW 402: Jurisprudence|LAW 501: Law Clinic",
        faculty: "law"
      },
      {
        id: "english-lit",
        title: "English & Literary Studies",
        description: "In-depth study of English language structure, literary analysis, composition, and communication skills. Explore works from various periods and develop advanced writing and critical thinking abilities.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Writer/Author</li><li>Editor</li><li>Teacher/Professor</li><li>Journalist</li><li>Content Creator</li><li>Literary Critic</li><li>Communications Specialist</li></ul>",
        mediaPath: "/university/a081468d-c79a-4912-9f49-764fb70ef1c7.wav", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "ENG 101: English Composition|ENG 102: Semantics|ENG 201: World Literature|ENG 202: Phonetics and Phonology|ENG 301: Contemporary Literature|ENG 302: Syntax|ENG 401: Literary Criticism|ENG 402: Research Project",
        faculty: "arts"
      },
      {
        id: "history-strat",
        title: "History & Strategic Studies",
        description: "Comprehensive study of world history, Nigerian history, international relations, and strategic analysis. Develop skills in research, analysis, and understanding of global affairs.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Historian</li><li>Research Analyst</li><li>Diplomatic Officer</li><li>Policy Analyst</li><li>Museum Curator</li><li>Archivist</li><li>International Relations Specialist</li></ul>",
        mediaPath: "/university/elegant_man_voice.mp3", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "HIS 101: Introduction to History|HIS 102: African History|HIS 201: Modern World History|HIS 202: Nigerian History|HIS 301: International Relations|HIS 302: Strategic Studies|HIS 401: Historical Research Methods|HIS 402: Thesis",
        faculty: "arts"
      },
      {
        id: "business-admin",
        title: "Business Administration",
        description: "Learn essential business principles including management, marketing, finance, human resources, and entrepreneurship. Develop skills needed to lead organizations and start your own business.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Business Manager</li><li>Entrepreneur</li><li>Marketing Manager</li><li>Operations Manager</li><li>Business Consultant</li><li>Project Manager</li><li>Sales Manager</li></ul>",
        mediaPath: "/university/wise_woman_voice.mp3", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "BUS 101: Principles of Management|BUS 102: Marketing Fundamentals|BUS 201: Financial Management|BUS 202: Human Resource Management|BUS 301: Strategic Management|BUS 302: Entrepreneurship|BUS 401: Business Ethics|BUS 402: Capstone Project",
        faculty: "management"
      },
      {
        id: "mass-comm",
        title: "Mass Communication",
        description: "Study journalism, broadcasting, public relations, advertising, and digital media. Learn to create compelling content and communicate effectively across various media platforms.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Journalist</li><li>PR Specialist</li><li>Media Producer</li><li>Broadcaster</li><li>Content Creator</li><li>Social Media Manager</li><li>Communications Director</li></ul>",
        mediaPath: "/university/wise_woman_voice (1).mp3", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "MASS 101: Introduction to Mass Communication|MASS 102: News Writing and Reporting|MASS 201: Broadcast Journalism|MASS 202: Public Relations|MASS 301: Digital Media Production|MASS 302: Media Ethics and Law|MASS 401: Investigative Journalism|MASS 402: Media Research Project",
        faculty: "management"
      },
      {
        id: "math-edu",
        title: "Mathematics Education",
        description: "Learn effective methods and strategies for teaching mathematics at various educational levels. Combine mathematical knowledge with pedagogical skills.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Mathematics Teacher</li><li>Curriculum Specialist</li><li>Education Consultant</li><li>Math Tutor</li><li>Educational Coordinator</li><li>Academic Support Specialist</li></ul>",
        mediaPath: "/university/abbess_voice.mp3", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "MATED 101: Foundations of Mathematics Teaching|MTH 101: Calculus I|MATED 201: Mathematics Curriculum and Instruction|MTH 201: Abstract Algebra|MATED 301: Assessment in Mathematics Education|MATED 302: Technology in Mathematics Teaching|MATED 401: Research in Mathematics Education|MATED 402: Student Teaching",
        faculty: "education"
      },
      {
        id: "adult-edu",
        title: "Adult Education",
        description: "Focus on teaching and learning strategies for adult learners, continuing education, and professional development programs.",
        careerOps: "<strong>Career Opportunities:</strong><ul><li>Adult Education Instructor</li><li>Training and Development Specialist</li><li>Corporate Trainer</li><li>Community Education Coordinator</li><li>Literacy Program Director</li><li>Professional Development Specialist</li></ul>",
        mediaPath: "/university/friendly_person_voice (1).mp3", // Dummy path, replace with actual
        mediaType: "audio",
        modules: "AED 101: Foundations of Adult Learning|AED 201: Adult Learning Theories|AED 202: Program Planning and Evaluation|AED 301: Community Education|AED 302: Literacy and Numeracy|AED 401: Research in Adult Education|AED 402: Practicum",
        faculty: "education"
      },
    ];

    // Dummy enrolled courses with progress
    let enrolledCourses = [
      {
        courseId: "comp-sci",
        progress: 75, // Percentage
        completedModules: ["CSC 101", "CSC 102", "CSC 201", "CSC 202", "CSC 301", "CSC 302"],
        currentModule: "CSC 401: Artificial Intelligence"
      },
      {
        courseId: "law-llb",
        progress: 20,
        completedModules: ["LAW 101"],
        currentModule: "LAW 102: Constitutional Law"
      },
      {
        courseId: "english-lit",
        progress: 100,
        completedModules: ["ENG 101", "ENG 102", "ENG 201", "ENG 202", "ENG 301", "ENG 302", "ENG 401", "ENG 402"],
        currentModule: "Completed"
      }
    ];

    // Dummy certificates
    const certificates = [
        { courseId: "english-lit", date: "2025-09-15" }
    ];

    // --- DOMContentLoaded & Initial Setup ---
    document.addEventListener('DOMContentLoaded', () => {
      // Set current year in footer
      document.getElementById('current-year').textContent = new Date().getFullYear();

      // Star animation
      const starsContainer = document.getElementById('stars-container');
      const numStars = 100, minSize = 1, maxSize = 3;
      function createStar() {
        const star = document.createElement('div'); star.className = 'star'; starsContainer.appendChild(star);
        const size = Math.random() * (maxSize - minSize) + minSize;
        star.style.width = `${size}px`; star.style.height = `${size}px`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 4}s`;
        star.style.animationDuration = `${3 + Math.random() * 2}s`;
      }
      for (let i = 0; i < numStars; i++) createStar();

      // Set user info
      if (currentUser) {
        document.getElementById('userGreeting').textContent = `Welcome, ${currentUser.displayName}!`;
        document.getElementById('welcomeUserMessage').textContent = `Welcome back, ${currentUser.displayName}!`;
        document.getElementById('profileAvatar').textContent = currentUser.initial;
      }

      // Populate dashboard sections
      renderMyCourses();
      renderExploreCourses();
      renderMyProgress();

      // Hamburger menu toggle for smaller screens
      const hamburger = document.querySelector('.hamburger');
      const sidebar = document.getElementById('sidebar');
      if (hamburger) {
          hamburger.addEventListener('click', () => {
              sidebar.classList.toggle('active');
          });
      }
    });

    // --- Navigation & Section Switching ---
    function showSection(sectionId) {
      document.querySelectorAll('.dashboard-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(sectionId + 'Section').classList.add('active');

      document.querySelectorAll('.sidebar-nav a').forEach(link => {
        link.classList.remove('active');
      });
      document.querySelector(`.sidebar-nav a[data-section="${sectionId}"]`).classList.add('active');

      // Hide course detail if not in course detail section
      if (sectionId !== 'courseDetail') {
          document.getElementById('courseDetailSection').style.display = 'none';
      }
      // Ensure myCourses section is displayed by default if no hash
      if (sectionId === 'myCourses') {
          document.getElementById('myCoursesSection').style.display = 'block';
      }
    }

    document.querySelectorAll('.sidebar-nav a').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const sectionId = this.dataset.section;
        showSection(sectionId);
      });
    });

    // --- Profile Dropdown Toggle ---
    document.getElementById('profileAvatar').addEventListener('click', function() {
      document.getElementById('profileDropdown').classList.toggle('active');
    });
    // Close dropdown if clicked outside
    document.addEventListener('click', function(event) {
      if (!event.target.closest('.profile-dropdown-container') && !event.target.closest('.profile-avatar')) {
        document.getElementById('profileDropdown').classList.remove('active');
      }
    });

    // --- Logout Function (Placeholder) ---
    document.getElementById('logoutButton').addEventListener('click', function(e) {
      e.preventDefault();
      // In a real app, you'd call Firebase signOut here
      // firebase.auth().signOut().then(() => {
      //   window.location.href = 'signup-login.html'; // Redirect to login page
      // }).catch((error) => {
      //   console.error("Logout Error:", error);
      // });
      alert("You have been logged out (simulated).");
      window.location.href = 'signup-login.html'; // Redirect to login page
    });

    // --- Render My Courses ---
    function renderMyCourses() {
      const myEnrolledCoursesContainer = document.getElementById('myEnrolledCourses');
      myEnrolledCoursesContainer.innerHTML = ''; // Clear previous content

      if (enrolledCourses.length === 0) {
        document.getElementById('myEnrolledCourses').style.display = 'none';
        document.getElementById('enrolledCoursesLead').style.display = 'none';
        document.getElementById('noCoursesMessage').style.display = 'block';
        return;
      } else {
        document.getElementById('myEnrolledCourses').style.display = 'grid';
        document.getElementById('enrolledCoursesLead').style.display = 'block';
        document.getElementById('noCoursesMessage').style.display = 'none';
      }

      enrolledCourses.forEach(enrolled => {
        const course = allUniversityCourses.find(c => c.id === enrolled.courseId);
        if (course) {
          const card = document.createElement('div');
          card.className = 'dashboard-course-card';
          card.innerHTML = `
            <h3>${course.title}</h3>
            <p>${course.description.substring(0, 100)}...</p>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: ${enrolled.progress}%;"></div>
            </div>
            <div class="progress-text">${enrolled.progress}% Complete</div>
            <button class="btn" onclick="viewCourseDetail('${course.id}')">
              ${enrolled.progress === 100 ? 'Review Course' : 'Continue Learning'}
            </button>
          `;
          myEnrolledCoursesContainer.appendChild(card);
        }
      });
    }

    // --- View Course Detail ---
    let activeCourseModules = [];
    function viewCourseDetail(courseId) {
      const course = allUniversityCourses.find(c => c.id === courseId);
      if (!course) return;

      const enrolled = enrolledCourses.find(e => e.courseId === courseId) || { completedModules: [], currentModule: null };
      activeCourseModules = course.modules.split('|').map(m => m.trim());

      document.getElementById('courseDetailTitle').textContent = course.title;
      document.getElementById('courseDetailDescription').innerHTML = course.description + '<br>' + course.careerOps;

      const modulesListContainer = document.getElementById('courseModulesList');
      modulesListContainer.innerHTML = ''; // Clear previous modules

      activeCourseModules.forEach(moduleName => {
        const moduleCode = moduleName.split(':')[0].trim();
        const isCompleted = enrolled.completedModules.includes(moduleCode);
        const isCurrent = enrolled.currentModule && enrolled.currentModule.startsWith(moduleCode);

        const moduleItem = document.createElement('div');
        moduleItem.className = 'module-item';
        moduleItem.innerHTML = `
          <div class="module-info">
            <i class="${isCompleted ? 'fas fa-check-circle' : (isCurrent ? 'fas fa-play-circle' : 'far fa-circle')}"></i>
            <span>${moduleName}</span>
          </div>
          <div class="module-status">
            <span class="status-text">${isCompleted ? 'Completed' : (isCurrent ? 'In Progress' : 'Not Started')}</span>
            <button class="btn ${isCompleted ? 'btn-secondary' : ''}"
                    onclick="startLesson('${courseId}', '${moduleName}')">
                ${isCompleted ? 'Review' : (isCurrent ? 'Resume' : 'Start Lesson')}
            </button>
          </div>
        `;
        modulesListContainer.appendChild(moduleItem);
      });

      showSection('courseDetail');
      document.getElementById('courseDetailSection').style.display = 'block'; // Explicitly show
    }

    // --- Start Lesson Function (Placeholder) ---
    let currentActiveCourseId = null;
    let currentActiveModule = null;

    function startLesson(courseId, moduleName) {
        currentActiveCourseId = courseId;
        currentActiveModule = moduleName;

        const course = allUniversityCourses.find(c => c.id === courseId);
        if (!course) return;

        document.getElementById('currentLessonTitle').textContent = moduleName;
        const lessonMedia = document.getElementById('lessonMedia');
        const lessonText = document.getElementById('lessonText');
        
        lessonMedia.innerHTML = '';
        lessonText.innerHTML = '';

        // Simulate lesson content
        if (course.mediaType === "audio") {
            lessonMedia.innerHTML = `
            <audio controls style="width:100%;outline:none;border-radius:10px;box-shadow:0 0 8px #00ffff;">
                <source src="${course.mediaPath}" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>`;
        } else if (course.mediaType === "video") {
            lessonMedia.innerHTML = `<iframe src="${course.mediaPath}" frameborder="0" allowfullscreen height="250px"></iframe>`;
        }

        lessonText.innerHTML = `<p>This is the content for <strong>${moduleName}</strong> in ${course.title}. Here you will find detailed explanations, examples, and exercises. Imagine engaging text, interactive diagrams, and perhaps a mini-quiz!</p>
                                <p>Elvion AI is here to help you understand complex concepts. Don't hesitate to use the AI Tools if you need to summarize, research, or generate content related to this lesson!</p>`;
        
        document.getElementById('lessonContent').style.display = 'block';
        document.getElementById('markLessonCompleteBtn').onclick = () => markLessonComplete(courseId, moduleName);

        // Scroll to lesson content
        document.getElementById('lessonContent').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // --- Mark Lesson Complete (Placeholder) ---
    function markLessonComplete(courseId, moduleName) {
        const enrolledIndex = enrolledCourses.findIndex(e => e.courseId === courseId);
        if (enrolledIndex !== -1) {
            const enrolled = enrolledCourses[enrolledIndex];
            const moduleCode = moduleName.split(':')[0].trim();
            if (!enrolled.completedModules.includes(moduleCode)) {
                enrolled.completedModules.push(moduleCode);
                
                // Update progress
                const totalModules = activeCourseModules.length;
                enrolled.progress = Math.round((enrolled.completedModules.length / totalModules) * 100);

                // Determine next module
                const currentModuleIndex = activeCourseModules.findIndex(m => m.startsWith(moduleCode));
                if (currentModuleIndex !== -1 && currentModuleIndex < totalModules - 1) {
                    enrolled.currentModule = activeCourseModules[currentModuleIndex + 1];
                } else {
                    enrolled.currentModule = "Completed";
                    if (!certificates.find(c => c.courseId === courseId)) {
                        certificates.push({ courseId: courseId, date: new Date().toISOString().split('T')[0] });
                        alert(`Congratulations! You've completed ${allUniversityCourses.find(c => c.id === courseId).title} and earned a certificate!`);
                    }
                }
                // In a real app, you'd update this in Firebase
                // db.collection("users").doc(currentUser.uid).collection("enrolledCourses").doc(courseId).update(enrolled);
            }
        }
        viewCourseDetail(courseId); // Re-render course detail to update status
        renderMyProgress(); // Update overall progress
    }


    // --- Render Explore Courses ---
    function renderExploreCourses() {
      const faculties = {
        sciTech: document.getElementById('sciTechCourses'),
        law: document.getElementById('lawCourses'),
        arts: document.getElementById('artsCourses'),
        management: document.getElementById('managementCourses'),
        education: document.getElementById('educationCourses')
      };

      // Clear previous content
      for (const key in faculties) {
        faculties[key].innerHTML = '';
      }

      allUniversityCourses.forEach(course => {
        const isEnrolled = enrolledCourses.some(e => e.courseId === course.id);
        const card = document.createElement('div');
        card.className = 'course-card';
        card.onclick = () => showModal(
          course.title,
          course.description,
          course.careerOps,
          course.mediaPath,
          course.modules,
          course.mediaType,
          '' // No specific degree for now
        );
        card.innerHTML = `
          <h3>${course.title}</h3>
          <b><i>Click here to view details</i></b>
          <p>${course.description.substring(0, 100)}...</p>
          <div class="course-meta">
            <span><strong>Duration:</strong> 1 Semester</span>
          </div>
          <button class="course-card-btn" ${isEnrolled ? 'disabled' : ''} onclick="event.stopPropagation(); enrollCourse('${course.id}')">
            ${isEnrolled ? 'Enrolled' : 'Enroll Now'}
          </button>
        `;
        if (faculties[course.faculty]) {
          faculties[course.faculty].appendChild(card);
        }
      });
    }

    // --- Enroll Course (Placeholder) ---
    function enrollCourse(courseId) {
      if (enrolledCourses.some(e => e.courseId === courseId)) {
        alert("You are already enrolled in this course!");
        return;
      }
      const course = allUniversityCourses.find(c => c.id === courseId);
      if (confirm(`Are you sure you want to enroll in "${course.title}"? It's free!`)) {
        enrolledCourses.push({
          courseId: courseId,
          progress: 0,
          completedModules: [],
          currentModule: course.modules.split('|')[0].trim() // First module
        });
        // In a real app, you'd add this to Firebase
        // db.collection("users").doc(currentUser.uid).collection("enrolledCourses").add({ courseId, progress: 0, completedModules: [] });
        alert(`Successfully enrolled in ${course.title}!`);
        renderMyCourses();
        renderExploreCourses(); // Update buttons
        renderMyProgress(); // Update overall progress
        showSection('myCourses'); // Go to my courses
      }
    }


    // --- Render My Progress ---
    function renderMyProgress() {
        const totalCourses = allUniversityCourses.length;
        const completedCoursesCount = enrolledCourses.filter(e => e.progress === 100).length;
        const totalEnrolledModules = enrolledCourses.reduce((sum, e) => sum + e.completedModules.length, 0);
        const allPossibleModules = allUniversityCourses.reduce((sum, c) => sum + c.modules.split('|').length, 0);

        let overallProgressPercentage = 0;
        if (allPossibleModules > 0) {
            overallProgressPercentage = Math.round((totalEnrolledModules / allPossibleModules) * 100);
        }
        
        document.getElementById('overallProgressCircle').style.setProperty('--progress-percentage', `${overallProgressPercentage}%`);
        document.getElementById('overallProgressText').textContent = `${overallProgressPercentage}%`;

        // Render Certificates
        const myCertificatesContainer = document.getElementById('myCertificates');
        myCertificatesContainer.innerHTML = '';
        if (certificates.length === 0) {
            document.getElementById('noCertificatesMessage').style.display = 'block';
        } else {
            document.getElementById('noCertificatesMessage').style.display = 'none';
            certificates.forEach(cert => {
                const course = allUniversityCourses.find(c => c.id === cert.courseId);
                if (course) {
                    const certItem = document.createElement('div');
                    certItem.className = 'certificate-item';
                    certItem.innerHTML = `
                        <h4>Certificate of Completion</h4>
                        <p>For successfully completing the course:</p>
                        <p><strong>${course.title}</strong></p>
                        <p>Awarded on: ${cert.date}</p>
                        <button class="btn"><i class="fas fa-download"></i> Download Certificate</button>
                    `;
                    myCertificatesContainer.appendChild(certItem);
                }
            });
        }
    }


    // --- Modal Functions (Reused & Adapted from university.html) ---
    function showModal(title, description, jobs, mediaPath, courses, mediaType, degree) {
      document.getElementById('modal-title').textContent = title;
      document.getElementById('modal-description').innerHTML = description;
      document.getElementById('modal-jobs').innerHTML = jobs;
      document.getElementById('modal-duration').textContent = "1 Semester";
      
      const modalMedia = document.getElementById('modal-media');
      modalMedia.innerHTML = ''; // Clear previous media
      if (mediaType === "audio") {
        modalMedia.innerHTML = `
          <audio controls style="width:100%;outline:none;border-radius:10px;box-shadow:0 0 8px #00ffff;">
            <source src="${mediaPath}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>`;
          modalMedia.style.height = 'auto'; // Adjust height for audio player
      } else if (mediaType === "video") {
        modalMedia.innerHTML = `<iframe src="${mediaPath}" frameborder="0" allowfullscreen height="250px"></iframe>`;
        modalMedia.style.height = '250px';
      } else {
        modalMedia.innerHTML = ''; // No media
        modalMedia.style.height = 'auto';
      }

      const courseList = courses.split('|');
      let coursesHtml = '';
      courseList.forEach(course => {
        const [code, name] = course.split(': ');
        coursesHtml += `
          <div class="course-item">
            <span>${name}</span>
            <span class="course-code">${code}</span>
          </div>
        `;
      });
      coursesHtml += `<div style="margin-top:1em;color:var(--cyan-glow);font-weight:600;">Duration outside Elvion: 4 years, 2 years masters.</div>`;
      if(degree){ coursesHtml += `<div style="margin-top:0.5em;">Degree: ${degree}</div>`; }
      document.getElementById('modal-courses').innerHTML = coursesHtml;
      
      const modalEnrollBtn = document.getElementById('modal-enroll-btn');
      const courseId = allUniversityCourses.find(c => c.title === title).id;
      const isEnrolled = enrolledCourses.some(e => e.courseId === courseId);
      if (isEnrolled) {
        modalEnrollBtn.textContent = 'Go to Course';
        modalEnrollBtn.onclick = () => { hideModal(); viewCourseDetail(courseId); };
        modalEnrollBtn.disabled = false;
      } else {
        modalEnrollBtn.textContent = 'Enroll Now';
        modalEnrollBtn.onclick = () => { hideModal(); enrollCourse(courseId); };
        modalEnrollBtn.disabled = false; // Always allow enrolling from modal
      }

      document.getElementById('modal').style.display = "flex";
    }

    function hideModal() {
      document.getElementById('modal').style.display = "none";
      // Pause any playing media when modal closes
      const mediaElement = document.querySelector('#modal-media iframe, #modal-media audio');
      if (mediaElement) {
        if (mediaElement.tagName === 'IFRAME') {
            const iframeSrc = mediaElement.src;
            mediaElement.src = iframeSrc; // Reloads the iframe, stopping video
        } else if (mediaElement.tagName === 'AUDIO') {
            mediaElement.pause();
            mediaElement.currentTime = 0;
        }
      }
    }

    // Initialize the default view
    showSection('myCourses');


    
    // --- FIREBASE INTEGRATION (EXAMPLE - UNCOMMENT AND CONFIGURE) ---
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
    import { getFirestore, doc, getDoc, collection, getDocs, updateDoc, arrayUnion, arrayRemove } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAyROm0aBGjry6NUfhNM3e0qwPcCDoIqSk", // Replace with your actual API Key
      authDomain: "elvionai.firebaseapp.com",
      projectId: "elvionai",
      storageBucket: "elvionai.firebasestorage.app",
      messagingSenderId: "161078300830",
      appId: "1:161078300830:web:f460df8591704eb0e96b8f"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    let currentUserData = null;
    let userEnrolledCourses = [];

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        currentUserData = user;
        document.getElementById('userGreeting').textContent = `Welcome, ${user.displayName || user.email.split('@')[0]}!`;
        document.getElementById('welcomeUserMessage').textContent = `Welcome back, ${user.displayName || user.email.split('@')[0]}!`;
        document.getElementById('profileAvatar').textContent = (user.displayName || user.email)[0].toUpperCase();

        await fetchUserCourses(user.uid);
        renderMyCourses();
        renderExploreCourses();
        renderMyProgress();
      } else {
        // No user is signed in, redirect to login
        window.location.href = 'signup-login.html';
      }
    });

    async function fetchUserCourses(uid) {
      const enrolledCoursesRef = collection(db, "users", uid, "enrolledCourses");
      const querySnapshot = await getDocs(enrolledCoursesRef);
      userEnrolledCourses = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      enrolledCourses = userEnrolledCourses; // Update global dummy data with real data
    }

    // Modified enrollCourse to use Firebase
    async function enrollCourse(courseId) {
      if (!currentUserData) {
        alert("Please log in to enroll in courses.");
        return;
      }
      if (userEnrolledCourses.some(e => e.courseId === courseId)) {
        alert("You are already enrolled in this course!");
        return;
      }

      const course = allUniversityCourses.find(c => c.id === courseId);
      if (confirm(`Are you sure you want to enroll in "${course.title}"? It's free!`)) {
        try {
          const newEnrollment = {
            courseId: courseId,
            progress: 0,
            completedModules: [],
            currentModule: course.modules.split('|')[0].trim(),
            enrolledAt: new Date()
          };
          const docRef = await addDoc(collection(db, "users", currentUserData.uid, "enrolledCourses"), newEnrollment);
          userEnrolledCourses.push({ id: docRef.id, ...newEnrollment });
          enrolledCourses = userEnrolledCourses; // Keep global dummy data in sync

          alert(`Successfully enrolled in ${course.title}!`);
          renderMyCourses();
          renderExploreCourses();
          renderMyProgress();
          showSection('myCourses');
        } catch (error) {
          console.error("Error enrolling in course: ", error);
          alert("Failed to enroll in course. Please try again.");
        }
      }
    }

    // Modified markLessonComplete to use Firebase
    async function markLessonComplete(courseId, moduleName) {
        const enrolledIndex = userEnrolledCourses.findIndex(e => e.courseId === courseId);
        if (enrolledIndex !== -1) {
            const enrolled = userEnrolledCourses[enrolledIndex];
            const moduleCode = moduleName.split(':')[0].trim();
            if (!enrolled.completedModules.includes(moduleCode)) {
                enrolled.completedModules.push(moduleCode);
                
                const totalModules = allUniversityCourses.find(c => c.id === courseId).modules.split('|').length;
                enrolled.progress = Math.round((enrolled.completedModules.length / totalModules) * 100);

                const currentModuleIndex = allUniversityCourses.find(c => c.id === courseId).modules.split('|').findIndex(m => m.startsWith(moduleCode));
                if (currentModuleIndex !== -1 && currentModuleIndex < totalModules - 1) {
                    enrolled.currentModule = allUniversityCourses.find(c => c.id === courseId).modules.split('|')[currentModuleIndex + 1];
                } else {
                    enrolled.currentModule = "Completed";
                    // Add certificate logic here
                    if (!certificates.find(c => c.courseId === courseId)) {
                        certificates.push({ courseId: courseId, date: new Date().toISOString().split('T')[0] });
                        // You might store certificates in Firestore as well
                    }
                }

                try {
                    const docRef = doc(db, "users", currentUserData.uid, "enrolledCourses", enrolled.id);
                    await updateDoc(docRef, {
                        completedModules: enrolled.completedModules,
                        progress: enrolled.progress,
                        currentModule: enrolled.currentModule
                    });
                    alert("Lesson marked as complete!");
                    viewCourseDetail(courseId);
                    renderMyProgress();
                } catch (error) {
                    console.error("Error updating course progress: ", error);
                    alert("Failed to mark lesson complete. Please try again.");
                }
            }
        }
    }

    document.getElementById('logoutButton').addEventListener('click', async function(e) {
      e.preventDefault();
      try {
        await signOut(auth);
        window.location.href = 'signup-login.html';
      } catch (error) {
        console.error("Logout Error:", error);
        alert("Failed to logout. Please try again.");
      }
    });
  </script>
</body>
</html>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J1YTKP10ZX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date()); 

  gtag('config', 'G-J1YTKP10ZX');
</script>
